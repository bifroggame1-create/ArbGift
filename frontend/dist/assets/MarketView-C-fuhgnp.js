const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/lottie-DzwejvuX.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{d as V,x as Se,j as Q,y as Le,o as n,c as u,k as le,z as $,r as b,b as l,h as W,t as C,A,n as D,l as M,a as ae,g as T,F as O,f as z,w as Z,T as U,B as ee,C as Fe,D as De}from"./vue-DrcrC0TO.js";import{_ as Ae,a as j,u as se}from"./index-BDA98zN8.js";import{s as Ee,g as te,a as Ge}from"./client-pJ2CWAUX.js";const Te=["src","alt"],Oe=V({__name:"LottieGift",props:{src:{},fallbackSrc:{},alt:{default:"Gift"},size:{default:100},autoplay:{type:Boolean,default:!0},loop:{type:Boolean,default:!0}},setup(c){let r=null;const s=async()=>(r||(r=await Ae(()=>import("./lottie-DzwejvuX.js").then(P=>P.l),__vite__mapDeps([0,1]))),r.default),o=c,h=b(null),m=b(!1);let _=null;async function w(){if(!h.value||!o.src){m.value=!0;return}_&&(_.destroy(),_=null),m.value=!1;try{const P=await s();if(!h.value)return;_=P.loadAnimation({container:h.value,renderer:"svg",loop:o.loop,autoplay:o.autoplay,path:o.src}),_.addEventListener("data_failed",()=>{m.value=!0,_?.destroy(),_=null}),_.addEventListener("error",()=>{m.value=!0,_?.destroy(),_=null})}catch{m.value=!0}}return Se(()=>o.src,()=>{w()}),Q(()=>{w()}),Le(()=>{_&&(_.destroy(),_=null)}),(P,E)=>(n(),u("div",{ref_key:"container",ref:h,class:"lottie-gift",style:le({width:c.size+"px",height:c.size+"px"})},[m.value&&c.fallbackSrc?(n(),u("img",{key:0,src:c.fallbackSrc,alt:c.alt,class:"lottie-gift__fallback",loading:"lazy",draggable:"false"},null,8,Te)):$("",!0)],4))}}),ze=j(Oe,[["__scopeId","data-v-66204c08"]]),He={class:"gift-card__image"},Ne=["src","alt"],Ve={key:2,class:"gift-card__placeholder"},je={class:"gift-card__info"},Ze={class:"gift-card__name"},Ue={class:"gift-card__serial"},Ie={key:0,width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor"},We=V({__name:"GiftCard",props:{gift:{},selectable:{type:Boolean},isSelected:{type:Boolean}},emits:["click","buy","select"],setup(c,{emit:r}){const s=c,o=r,{hapticImpact:h}=se(),m=b(!1),_=M(()=>{if(s.gift.animation_url)return s.gift.animation_url;if(s.gift.lottie_url)return s.gift.lottie_url;const f=s.gift.image_url;return f&&f.includes("nft.fragment.com/gift/")?f.replace(/\.(webp|jpg|png|medium\.jpg|large\.jpg|small\.jpg)$/i,".lottie.json"):null}),w=M(()=>Math.round(Math.min(window.innerWidth/3-16,140))),P=M(()=>s.gift.tg_id?s.gift.tg_id:s.gift.index?s.gift.index:s.gift.id),E=M(()=>{const f=s.gift.lowest_price_ton||s.gift.min_price_ton||s.gift.price||0,g=Number(f);return g<=0?null:g.toFixed(2).replace(/\.?0+$/,"")}),L=M(()=>{const f=s.gift;if(f.backdrop_center_color&&f.backdrop_edge_color){const F=B(f.backdrop_center_color),t=B(f.backdrop_edge_color);return{"--card-bg":`linear-gradient(180deg, ${F} 0%, ${t} 100%)`}}const x=d(s.gift.name||"")%360;return{"--card-bg":`linear-gradient(180deg, hsl(${x}, 25%, 28%) 0%, hsl(${x}, 30%, 18%) 100%)`}}),B=f=>"#"+(f&16777215).toString(16).padStart(6,"0"),d=f=>{let g=0;for(let x=0;x<f.length;x++)g=(g<<5)-g+f.charCodeAt(x)|0;return Math.abs(g)},p=()=>{h("light"),s.selectable?o("select",s.gift):o("click",s.gift)},y=()=>{h("medium"),o("buy",s.gift)};return(f,g)=>(n(),u("div",{class:"gift-card gift-card-appear base-active-btn",style:le(L.value),onClick:p},[l("div",He,[_.value?(n(),W(ze,{key:0,src:_.value,"fallback-src":c.gift.image_url,alt:c.gift.name,size:w.value,class:"gift-card__lottie"},null,8,["src","fallback-src","alt","size"])):c.gift.image_url&&!m.value?(n(),u("img",{key:1,src:c.gift.image_url,alt:c.gift.name,loading:"lazy",draggable:"false",onError:g[0]||(g[0]=x=>m.value=!0)},null,40,Ne)):(n(),u("div",Ve,[...g[1]||(g[1]=[l("span",{class:"gift-card__placeholder-emoji"},"ðŸŽ",-1)])]))]),l("div",je,[l("div",Ze,C(c.gift.name),1),l("div",Ue,"#"+C(P.value),1),E.value?(n(),u("button",{key:0,class:"gift-card__price",onClick:A(y,["stop"])},[g[2]||(g[2]=l("svg",{class:"gift-card__ton-icon",width:"12",height:"12",viewBox:"0 0 16 16",fill:"none"},[l("path",{d:"M12.7238 1.00488H3.27565C1.53846 1.00488 0.437395 2.87874 1.31137 4.39358L7.14243 14.5002C7.52294 15.1601 8.47652 15.1601 8.85703 14.5002L14.6893 4.39358C15.5621 2.88116 14.461 1.00488 12.725 1.00488H12.7238ZM7.13769 11.4694L5.86778 9.01168L2.80363 3.53153C2.60149 3.18078 2.85116 2.7313 3.27446 2.7313H7.1365V11.4705L7.13769 11.4694ZM13.1935 3.53035L10.1305 9.01287L8.86059 11.4694V2.73011H12.7226C13.1459 2.73011 13.3956 3.17959 13.1935 3.53035Z",fill:"currentColor"})],-1)),l("span",null,C(E.value),1)])):$("",!0)]),c.selectable?(n(),u("div",{key:0,class:D(["gift-card__checkbox",{"gift-card__checkbox--selected":c.isSelected}])},[c.isSelected?(n(),u("svg",Ie,[...g[3]||(g[3]=[l("path",{d:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"},null,-1)])])):$("",!0)],2)):$("",!0)],4))}}),Ke=j(We,[["__scopeId","data-v-6a505a3a"]]),Re={class:"skeleton-card"},Je=V({__name:"SkeletonCard",setup(c){return(r,s)=>(n(),u("div",Re,[...s[0]||(s[0]=[ae('<div class="skeleton-card__image skeleton" data-v-ef5d93a6></div><div class="skeleton-card__body" data-v-ef5d93a6><div class="skeleton-card__title skeleton" data-v-ef5d93a6></div><div class="skeleton-card__serial skeleton" data-v-ef5d93a6></div><div class="skeleton-card__price skeleton" data-v-ef5d93a6></div></div>',2)])]))}}),qe=j(Je,[["__scopeId","data-v-ef5d93a6"]]),Qe={class:"balance-pill"},Ye={class:"balance-pill__amount"},Xe=V({__name:"BalancePill",props:{balance:{}},emits:["add"],setup(c){const r=c,s=M(()=>{const o=r.balance;return o>=1e3?o.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:2}):Number(o.toFixed(2)).toString()});return(o,h)=>(n(),u("div",Qe,[h[2]||(h[2]=l("svg",{class:"balance-pill__icon",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none"},[l("path",{d:"M12.7238 1.00488H3.27565C1.53846 1.00488 0.437395 2.87874 1.31137 4.39358L7.14243 14.5002C7.52294 15.1601 8.47652 15.1601 8.85703 14.5002L14.6893 4.39358C15.5621 2.88116 14.461 1.00488 12.725 1.00488H12.7238ZM7.13769 11.4694L5.86778 9.01168L2.80363 3.53153C2.60149 3.18078 2.85116 2.7313 3.27446 2.7313H7.1365V11.4705L7.13769 11.4694ZM13.1935 3.53035L10.1305 9.01287L8.86059 11.4694V2.73011H12.7226C13.1459 2.73011 13.3956 3.17959 13.1935 3.53035Z",fill:"currentColor"})],-1)),l("span",Ye,C(s.value),1),l("button",{class:"balance-pill__add",onClick:h[0]||(h[0]=A(m=>o.$emit("add"),["stop"]))},[...h[1]||(h[1]=[l("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"none"},[l("path",{d:"M7 1v12M1 7h12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1)])])]))}}),et=j(Xe,[["__scopeId","data-v-0b0417e6"]]),R="market_prices_cache",J=5*60*1e3;function q(c){return c.length===0?0:Math.min(...c.map(r=>r.price))}function ie(c){if(c.length===0)return 0;const r=[...c].sort((o,h)=>o.price-h.price),s=Math.floor(r.length/2);return r.length%2!==0?r[s].price:(r[s-1].price+r[s].price)/2}function re(c){return c.length===0?null:c.reduce((r,s)=>s.price<r.price?s:r)}class tt{cache={};constructor(){this.loadCache()}loadCache(){try{const r=localStorage.getItem(R);r&&(this.cache=JSON.parse(r),this.cleanExpiredCache())}catch(r){console.warn("Failed to load price cache:",r),this.cache={}}}persistCache(){try{localStorage.setItem(R,JSON.stringify(this.cache))}catch(r){console.warn("Failed to persist price cache:",r)}}cleanExpiredCache(){const r=Date.now();for(const[s,o]of Object.entries(this.cache))r-o.timestamp>J&&delete this.cache[s]}clearCache(){this.cache={},localStorage.removeItem(R)}getCachedPrice(r){const s=this.cache[r];return s?Date.now()-s.timestamp>J?(delete this.cache[r],0):q(s.prices):0}setCachedPrice(r,s){this.cache[r]={prices:s,timestamp:Date.now()}}async fetchFromApi(r){try{const s=await fetch(`/api/v1/gifts/${r}`);if(!s.ok)return null;const o=await s.json();return o.min_price_ton&&parseFloat(o.min_price_ton)>0?{source:"api",price:parseFloat(o.min_price_ton),currency:"TON",updatedAt:new Date}:null}catch{return null}}async getAggregatedPrice(r){const s=this.cache[r];if(s&&Date.now()-s.timestamp<J)return s.prices;const h=(await Promise.allSettled([this.fetchFromApi(r)])).filter(m=>m.status==="fulfilled").map(m=>m.value).filter(m=>m!==null&&m.price>0);return h.length>0&&this.setCachedPrice(r,h),h}async getAggregatedGifts(r){const s=new Map,o=10;for(let h=0;h<r.length;h+=o){const m=r.slice(h,h+o);await Promise.all(m.map(async _=>{const w=await this.getAggregatedPrice(_);w.length>0&&s.set(_,{giftId:_,name:"",model:"",prices:w,minPrice:q(w),medianPrice:ie(w),bestDeal:re(w)})}))}return s}}const H=new tt;function lt(){const c=b(!1),r=b(null),s=b([]),o=b(new Map);Q(()=>{H.loadCache()});const h=d=>H.getCachedPrice(d),m=async d=>{c.value=!0,r.value=null;try{o.value=await H.getAggregatedGifts(d),H.persistCache()}catch(p){r.value="Failed to load prices",console.error("Preload prices error:",p)}finally{c.value=!1}};return{isLoading:c,error:r,gifts:s,aggregatedData:o,getCachedPrice:h,preloadPrices:m,getGiftPrices:async d=>{try{return await H.getAggregatedPrice(d)}catch(p){return console.error("Get gift prices error:",p),[]}},getBestPrice:d=>{const p=h(d);if(p>0)return p;const y=o.value.get(d);return y?y.minPrice:0},getPriceDisplay:d=>{const p=o.value.get(d);if(p&&p.bestDeal)return{price:p.minPrice.toFixed(2),source:p.bestDeal.source};const y=h(d);return y>0?{price:y.toFixed(2),source:"cached"}:{price:"â€”",source:"unavailable"}},enrichGiftsWithPrices:d=>d.map(p=>{const y=p.id||p.gift_id||"",f=o.value.get(y);let g=0,x=[],F=null,t="api";if(f)g=f.minPrice,x=f.prices,F=f.bestDeal,t=F?.source||"aggregated";else if(p.floor_price)g=typeof p.floor_price=="string"?parseFloat(p.floor_price):p.floor_price,t="api";else{const S=h(y);S>0&&(g=S,t="cached")}return{id:y,name:p.name||"",model:p.model||"",image:p.image,floorPrice:g,prices:x,bestDeal:F,priceSource:t}}),refreshPrices:async d=>{H.clearCache(),await m(d)},getPriceComparison:d=>{const p=o.value.get(d);return!p||p.prices.length===0?null:{min:p.minPrice,median:p.medianPrice,sources:p.prices.map(y=>y.source)}},calculateMinPrice:q,calculateMedianPrice:ie,getBestDeal:re}}const at={class:"market-view"},st={class:"market-header"},it={class:"market-header__right"},rt={class:"market-tabs"},nt={class:"market-tabs__scroll"},ot=["onClick"],ct={class:"filter-bar"},dt={key:0,class:"filter-bar__chevron",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},ut={key:0,class:"filter-bar__chevron",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},ht={key:0,class:"filter-bar__chevron",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},pt={key:0,class:"active-filters"},ft=["onClick"],gt={class:"sort-menu"},vt=["onClick"],mt={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},_t={class:"gift-grid-wrapper"},kt={key:0,class:"gift-grid"},bt={key:1,class:"gift-grid"},yt={key:2,class:"pagination"},wt=["disabled"],Ct={class:"pagination__info"},Pt={class:"pagination__current"},xt={class:"pagination__total"},$t=["disabled"],Mt={key:3,class:"empty-state"},Bt={key:0,class:"filter-sheet"},St={class:"filter-sheet__header"},Lt={class:"filter-sheet__title"},Ft={class:"filter-sheet__body"},Dt={class:"filter-chips"},At=["onClick"],Et={class:"filter-sheet__footer"},I=50,Gt=V({__name:"MarketView",setup(c){const r=De(),{hapticImpact:s}=se(),{preloadPrices:o,enrichGiftsWithPrices:h}=lt(),m=[{id:"all",label:"Gifts"},{id:"upgrades",label:"Upgrades"}],_=b("all"),w=b(!0),P=b([]),E=b(""),L=b("listed_at desc"),B=b(!1),d=b(null),p=b(!1),y=b([]),f=b(1),g=b(50),x=b("1.33"),F=b("247.5K"),t=Fe({names:[],models:[],backdrops:[],patterns:[],symbols:[],rarities:[],minPrice:null,maxPrice:null}),S=b([]),ne=M(()=>[...new Set(S.value.map(a=>a.name).filter(Boolean))].sort()),oe=M(()=>[...new Set(S.value.map(a=>a.model).filter(Boolean))].sort()),ce=M(()=>[...new Set(S.value.map(a=>a.backdrop).filter(Boolean))].sort()),de=[{value:"common",label:"Common",color:"#6b7280"},{value:"uncommon",label:"Uncommon",color:"#22c55e"},{value:"rare",label:"Rare",color:"#3b82f6"},{value:"epic",label:"Epic",color:"#a855f7"},{value:"legendary",label:"Legendary",color:"#f59e0b"},{value:"mythic",label:"Mythic",color:"#ef4444"}],Y=M(()=>{const a=[];return t.names.forEach(e=>a.push({key:`name-${e}`,group:"names",value:e,label:e})),t.models.forEach(e=>a.push({key:`model-${e}`,group:"models",value:e,label:`Skin: ${e}`})),t.backdrops.forEach(e=>a.push({key:`backdrop-${e}`,group:"backdrops",value:e,label:`Backdrop: ${e}`})),t.patterns.forEach(e=>a.push({key:`pattern-${e}`,group:"patterns",value:e,label:`Pattern: ${e}`})),t.symbols.forEach(e=>a.push({key:`symbol-${e}`,group:"symbols",value:e,label:`Symbol: ${e}`})),t.rarities.forEach(e=>{const i=de.find(v=>v.value===e);a.push({key:`rarity-${e}`,group:"rarities",value:e,label:i?.label||e})}),t.minPrice!==null&&a.push({key:"minPrice",group:"minPrice",value:String(t.minPrice),label:`from ${t.minPrice} TON`}),t.maxPrice!==null&&a.push({key:"maxPrice",group:"maxPrice",value:String(t.maxPrice),label:`to ${t.maxPrice} TON`}),a}),ue=M(()=>{switch(d.value){case"type":return"Type";case"model":return"Skin";case"backdrop":return"Backdrop";default:return""}}),he=M(()=>{switch(d.value){case"type":return ne.value;case"model":return oe.value;case"backdrop":return ce.value;default:return[]}}),pe=a=>{switch(d.value){case"type":return t.names.includes(a);case"model":return t.models.includes(a);case"backdrop":return t.backdrops.includes(a);default:return!1}},fe=a=>{switch(d.value){case"type":K("names",a);break;case"model":K("models",a);break;case"backdrop":K("backdrops",a);break}},K=(a,e)=>{const i=t[a],v=i.indexOf(e);v>-1?i.splice(v,1):i.push(e)},ge=a=>{if(a.group==="minPrice")t.minPrice=null;else if(a.group==="maxPrice")t.maxPrice=null;else{const e=t[a.group],i=e.indexOf(a.value);i>-1&&e.splice(i,1)}G()},ve=()=>{t.names=[],t.models=[],t.backdrops=[],t.patterns=[],t.symbols=[],t.rarities=[],t.minPrice=null,t.maxPrice=null},G=()=>{f.value=1,N()},me=[{value:"listed_at desc",label:"Newest first"},{value:"listed_at asc",label:"Oldest first"},{value:"price asc",label:"Price: Low to High"},{value:"price desc",label:"Price: High to Low"}],_e=a=>{s("light"),_.value=a,a==="upgrades"&&r.push("/upgrade")},ke=a=>{s("light"),L.value=a,B.value=!1,N()},be=()=>{f.value>1&&(f.value--,N())},ye=()=>{f.value<g.value&&(f.value++,N())},N=async()=>{w.value=!0;try{const a=(f.value-1)*I,e=E.value?.trim();let i;if(e)i=await Ee(e,{limit:I,collection_id:void 0});else{const k={is_on_sale:!0,sort:L.value,limit:I,offset:a};t.rarities.length===1&&(k.rarity=t.rarities[0]),t.models.length===1&&(k.model=t.models[0]),t.backdrops.length===1&&(k.backdrop=t.backdrops[0]),t.patterns.length===1&&(k.pattern=t.patterns[0]),t.symbols.length===1&&(k.symbol=t.symbols[0]),t.minPrice!==null&&(k.min_price=t.minPrice),t.maxPrice!==null&&(k.max_price=t.maxPrice),i=await te(k)}let v=i.items||i||[];t.names.length>0&&(v=v.filter(k=>t.names.includes(k.name))),t.rarities.length>1&&(v=v.filter(k=>t.rarities.includes(k.rarity))),t.models.length>1&&(v=v.filter(k=>t.models.includes(k.model))),t.backdrops.length>1&&(v=v.filter(k=>t.backdrops.includes(k.backdrop))),t.patterns.length>1&&(v=v.filter(k=>t.patterns.includes(k.pattern))),t.symbols.length>1&&(v=v.filter(k=>t.symbols.includes(k.symbol))),S.value.length===0&&v.length>0&&(S.value=v),i.total&&(g.value=Math.ceil(i.total/I));const X=v.map(k=>k.id||k.gift_id).filter(Boolean);X.length>0?(P.value=v,o(X).then(()=>{P.value=h(v)})):P.value=v}catch(a){console.error("Fetch gifts error:",a),P.value=[]}finally{w.value=!1}},we=async()=>{try{const a=await te({is_on_sale:!0,limit:500}),e=a.items||a||[];e.length>0&&(S.value=e)}catch{}},Ce=async()=>{try{const a=await Ge();a.volume_24h&&(F.value=Pe(a.volume_24h)),a.ton_price&&(x.value=a.ton_price.toFixed(2))}catch{}},Pe=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString(),xe=a=>{s("light"),r.push(`/gift/${a.id}`)},$e=a=>{s("medium")},Me=a=>{s("light");const e=y.value.indexOf(a.id);e>-1?y.value.splice(e,1):y.value.push(a.id)},Be=()=>{s("heavy")};return Q(()=>{N(),Ce(),we()}),(a,e)=>(n(),u("div",at,[e[31]||(e[31]=l("div",{class:"online-indicator"},[l("span",{class:"online-dot"}),l("span",{class:"online-text"},"22 online")],-1)),l("div",st,[e[12]||(e[12]=l("div",{class:"market-header__spacer"},null,-1)),e[13]||(e[13]=l("h1",{class:"market-title"},"Market",-1)),l("div",it,[T(et,{balance:0,onAdd:()=>{}})])]),l("nav",rt,[l("div",nt,[(n(),u(O,null,z(m,i=>l("button",{key:i.id,class:D(["market-tabs__item",{active:_.value===i.id}]),onClick:v=>_e(i.id)},C(i.label),11,ot)),64))])]),l("div",ct,[l("button",{class:"filter-bar__sort-btn",onClick:e[0]||(e[0]=i=>B.value=!B.value)},[...e[14]||(e[14]=[l("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M3 6h18M6 12h12M9 18h6"})],-1)])]),l("button",{class:D(["filter-bar__dropdown",{"has-value":t.names.length>0}]),onClick:e[2]||(e[2]=i=>d.value=d.value==="type"?null:"type")},[l("span",null,C(t.names.length>0?t.names[0]+(t.names.length>1?` +${t.names.length-1}`:""):"Type"),1),t.names.length===0?(n(),u("svg",dt,[...e[15]||(e[15]=[l("path",{d:"m6 9 6 6 6-6"},null,-1)])])):(n(),u("svg",{key:1,class:"filter-bar__clear",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3",onClick:e[1]||(e[1]=A(i=>{t.names=[],G()},["stop"]))},[...e[16]||(e[16]=[l("path",{d:"M18 6 6 18"},null,-1),l("path",{d:"m6 6 12 12"},null,-1)])]))],2),l("button",{class:D(["filter-bar__dropdown",{"has-value":t.models.length>0}]),onClick:e[4]||(e[4]=i=>d.value=d.value==="model"?null:"model")},[l("span",null,C(t.models.length>0?t.models[0]+(t.models.length>1?` +${t.models.length-1}`:""):"Skin"),1),t.models.length===0?(n(),u("svg",ut,[...e[17]||(e[17]=[l("path",{d:"m6 9 6 6 6-6"},null,-1)])])):(n(),u("svg",{key:1,class:"filter-bar__clear",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3",onClick:e[3]||(e[3]=A(i=>{t.models=[],G()},["stop"]))},[...e[18]||(e[18]=[l("path",{d:"M18 6 6 18"},null,-1),l("path",{d:"m6 6 12 12"},null,-1)])]))],2),l("button",{class:D(["filter-bar__dropdown",{"has-value":t.backdrops.length>0}]),onClick:e[6]||(e[6]=i=>d.value=d.value==="backdrop"?null:"backdrop")},[l("span",null,C(t.backdrops.length>0?t.backdrops[0]+(t.backdrops.length>1?` +${t.backdrops.length-1}`:""):"Backdrop"),1),t.backdrops.length===0?(n(),u("svg",ht,[...e[19]||(e[19]=[l("path",{d:"m6 9 6 6 6-6"},null,-1)])])):(n(),u("svg",{key:1,class:"filter-bar__clear",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3",onClick:e[5]||(e[5]=A(i=>{t.backdrops=[],G()},["stop"]))},[...e[20]||(e[20]=[l("path",{d:"M18 6 6 18"},null,-1),l("path",{d:"m6 6 12 12"},null,-1)])]))],2)]),Y.value.length>0?(n(),u("div",pt,[(n(!0),u(O,null,z(Y.value,i=>(n(),u("button",{key:i.key,class:"active-filter-chip",onClick:v=>ge(i)},[l("span",null,C(i.label),1),e[21]||(e[21]=l("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},[l("path",{d:"M18 6 6 18"}),l("path",{d:"m6 6 12 12"})],-1))],8,ft))),128)),l("button",{class:"clear-all-btn",onClick:e[7]||(e[7]=i=>{ve(),G()})},"Clear")])):$("",!0),(n(),W(ee,{to:"body"},[T(U,{name:"sort-fade"},{default:Z(()=>[B.value?(n(),u("div",{key:0,class:"sort-overlay",onClick:e[8]||(e[8]=A(i=>B.value=!1,["self"]))},[l("div",gt,[e[23]||(e[23]=l("div",{class:"sort-menu__header"},"Sort by",-1)),(n(),u(O,null,z(me,i=>l("button",{key:i.value,class:D(["sort-menu__option",{active:L.value===i.value}]),onClick:v=>ke(i.value)},[l("span",null,C(i.label),1),L.value===i.value?(n(),u("svg",mt,[...e[22]||(e[22]=[l("path",{d:"M20 6 9 17l-5-5"},null,-1)])])):$("",!0)],10,vt)),64))])])):$("",!0)]),_:1})])),l("div",_t,[w.value?(n(),u("div",kt,[(n(),u(O,null,z(12,i=>T(qe,{key:"skeleton-"+i})),64))])):(n(),u("div",bt,[(n(!0),u(O,null,z(P.value,i=>(n(),W(Ke,{key:i.id,gift:i,selectable:p.value,"is-selected":y.value.includes(i.id),onClick:xe,onBuy:$e,onSelect:Me},null,8,["gift","selectable","is-selected"]))),128))])),!w.value&&g.value>1?(n(),u("div",yt,[l("button",{class:"pagination__btn",disabled:f.value<=1,onClick:be},[...e[24]||(e[24]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"m15 18-6-6 6-6"})],-1)])],8,wt),l("span",Ct,[l("span",Pt,C(f.value),1),e[25]||(e[25]=l("span",{class:"pagination__sep"},"/",-1)),l("span",xt,C(g.value),1)]),l("button",{class:"pagination__btn",disabled:f.value>=g.value,onClick:ye},[...e[26]||(e[26]=[l("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"m9 18 6-6-6-6"})],-1)])],8,$t)])):$("",!0),!w.value&&P.value.length===0?(n(),u("div",Mt,[...e[27]||(e[27]=[ae('<div class="empty-state__icon" data-v-7eeb1b4c><svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-7eeb1b4c><path d="M21 8v13H3V8" data-v-7eeb1b4c></path><path d="M1 3h22v5H1z" data-v-7eeb1b4c></path><path d="M10 12h4" data-v-7eeb1b4c></path></svg></div><p class="empty-state__text" data-v-7eeb1b4c>No gifts available</p><p class="empty-state__hint" data-v-7eeb1b4c>Try adjusting your filters</p>',3)])])):$("",!0)]),T(U,{name:"fab-pop"},{default:Z(()=>[y.value.length>0?(n(),u("button",{key:0,class:"bulk-fab",onClick:Be},[e[28]||(e[28]=l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),l("path",{d:"M3 6h18"}),l("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),l("span",null,C(y.value.length),1)])):$("",!0)]),_:1}),(n(),W(ee,{to:"body"},[T(U,{name:"filter-overlay"},{default:Z(()=>[d.value?(n(),u("div",{key:0,class:"filter-sheet-overlay",onClick:e[11]||(e[11]=A(i=>d.value=null,["self"]))},[T(U,{name:"sheet-slide"},{default:Z(()=>[d.value?(n(),u("div",Bt,[e[30]||(e[30]=l("div",{class:"filter-sheet__handle"},null,-1)),l("div",St,[l("h3",Lt,C(ue.value),1),l("button",{class:"filter-sheet__close",onClick:e[9]||(e[9]=i=>d.value=null)},[...e[29]||(e[29]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M18 6 6 18"}),l("path",{d:"m6 6 12 12"})],-1)])])]),l("div",Ft,[l("div",Dt,[(n(!0),u(O,null,z(he.value,i=>(n(),u("button",{key:i,class:D(["filter-chip",{active:pe(i)}]),onClick:v=>fe(i)},C(i),11,At))),128))])]),l("div",Et,[l("button",{class:"filter-sheet__done",onClick:e[10]||(e[10]=i=>{d.value=null,G()})}," Done ")])])):$("",!0)]),_:1})])):$("",!0)]),_:1})]))]))}}),Ht=j(Gt,[["__scopeId","data-v-7eeb1b4c"]]);export{Ht as default};
