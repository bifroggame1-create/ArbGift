import{p as ft}from"./client-bnENCLSy.js";import{d as dt,k as xt,G as ut,c as Q,b as a,B as Z,t as A,F as ht,g as gt,H as yt,r as C,o as tt,D as bt}from"./vue-TADZIX6E.js";import"./index-D5GkNzM3.js";const pt={class:"plinko-view min-h-screen flex flex-col",style:{background:"#000","padding-bottom":"16px"}},mt={class:"px-3 pt-3 flex flex-col gap-2"},vt={class:"flex items-center justify-between"},wt={class:"flex items-center gap-1.5"},St={class:"flex items-center gap-1.5 rounded-full px-3 py-1.5",style:{background:"rgba(255,255,255,0.08)"}},_t={class:"text-white font-bold text-sm"},Mt={class:"mx-3 mt-2 flex-1 flex items-center justify-center",style:{"min-height":"360px"}},kt={class:"px-3 py-3"},Pt={class:"flex gap-2 mb-3"},Tt=["onClick"],Rt={class:"text-white/75 text-sm"},Bt={class:"flex items-center gap-2"},At=["disabled"],Ct={class:"text-center mt-2"},It={class:"text-white/20 text-xs"},i=380,h=360,v=12,et=4.5,m=7,Lt=.32,st=.52,I=52,lt=18,G=9,Et=dt({__name:"PlinkoView",setup(Ot){const X=yt("gameCanvas"),_=C(5.16),nt=[1,3,10,30,50],d=C(1),w=C(!1),L=C("624a...a8fa"),U=["üíÄ","üéÅ","2.0x","0.7x","0.6x","0.7x","2.0x","üéÅ","üíÄ"],W=[0,0,2,.7,.6,.7,2,0,0],q=["#ef4444","#f59e0b","#22d3ee","#a78bfa","#6366f1","#a78bfa","#22d3ee","#f59e0b","#ef4444"],O=h-58,N=(O-I)/v,x=i/G;let T=[];function at(){T=[];const r=i/2;for(let t=0;t<v;t++){const o=t+3,n=[],f=(o-1)*lt,e=r-f/2;for(let l=0;l<o;l++)n.push({x:e+l*lt,y:I+t*N});T.push(n)}}let s=null,g=4,D=[],$=-1,S=0,M=null,j=null,V=Date.now(),u=[],k=[],y=[];function ot(r){w.value||(d.value=r)}function Y(){return Math.random().toString(36).substring(2,6)+"..."+Math.random().toString(36).substring(2,6)}function it(r){const t=i/2,o=r*x+x/2;D=[];for(let n=0;n<v;n++){const f=(n+1)/v,e=f*f;D.push(t+(o-t)*e)}}async function rt(){if(w.value||_.value<d.value)return;w.value=!0,_.value-=d.value;try{V++;const t=await ft({amount:d.value,client_seed:Y(),nonce:V,user_id:"anonymous"});g=t.landing_slot,L.value=t.server_seed_hash}catch{const t=[.02,.03,.1,.15,.2,.15,.1,.03,.02];let o=Math.random();g=4;for(let n=0;n<t.length;n++)if(o-=t[n],o<=0){g=n;break}L.value=Y()}it(g),s={x:i/2+(Math.random()-.5)*16,y:I-18,vx:(Math.random()-.5)*1.2,vy:2.5},$=-1,S=1,u=[],k=[],y=[],M=requestAnimationFrame(E)}function E(){if(!s)return;if(y.length>0&&(y.forEach(e=>{e.vy+=.18,e.x+=e.vx,e.y+=e.vy,e.life-=.03}),y=y.filter(e=>e.life>0)),S===2){P(),y.length>0&&(M=requestAnimationFrame(E));return}s.vy+=Lt,s.x+=s.vx,s.y+=s.vy,u.push({x:s.x,y:s.y}),u.length>10&&u.shift();const r=Date.now();k=k.filter(e=>r-e.time<250);const t=Math.floor((s.y-I)/N);let o=null,n=1/0;const f=et+m;for(let e=Math.max(0,t-1);e<=Math.min(v-1,t+1);e++){const l=T[e];if(l)for(const c of l){const b=s.x-c.x,p=s.y-c.y,R=Math.sqrt(b*b+p*p);R<n&&(n=R,o=c)}}if(o&&n<f&&n>.01){const e=s.x-o.x,l=s.y-o.y,c=e/n,b=l/n;s.x=o.x+c*(f+1),s.y=o.y+b*(f+1);const p=s.vx*c+s.vy*b;p<0&&(s.vx-=2*p*c,s.vy-=2*p*b,s.vx*=st,s.vy*=st),s.vy<1.8&&(s.vy=1.8),k.push({x:o.x,y:o.y,time:r})}if(t>=0&&t<v&&t!==$){$=t;const l=D[t]-s.x;s.vx+=l*.08,s.vx+=(Math.random()-.5)*.8}if(s.x<m&&(s.x=m,s.vx=Math.abs(s.vx)*.6),s.x>i-m&&(s.x=i-m,s.vx=-Math.abs(s.vx)*.6),s.y>O){s.y=O,s.vy=0,s.vx=0,s.x=g*x+x/2;const e=["#facc15","#fbbf24","#f59e0b","#fff"];for(let l=0;l<15;l++)y.push({x:s.x,y:s.y,vx:(Math.random()-.5)*7,vy:-Math.random()*5-1,life:1,color:e[Math.floor(Math.random()*e.length)]});S=2,P(),ct();return}P(),M=requestAnimationFrame(E)}function ct(){const r=W[g];r>0&&(_.value+=d.value*r),j=setTimeout(()=>{s=null,S=0,w.value=!1,P()},1800)}function P(){const r=X.value;if(!r)return;const t=r.getContext("2d");if(!t)return;t.clearRect(0,0,i,h),t.fillStyle="#0a0c14",t.fillRect(0,0,i,h),t.fillStyle="#1e3a5f",t.beginPath(),t.roundRect(i/2-30,6,60,28,5),t.fill(),t.fillStyle="#3b82f6",t.beginPath(),t.roundRect(i/2-30,6,60,10,[5,5,0,0]),t.fill(),t.fillStyle="rgba(255,255,255,0.5)",t.font="12px sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText("‚ñº",i/2,24);const o=Date.now();T.forEach((e,l)=>{const c=l/v,b=Math.round(139+-105*c),p=Math.round(92+119*c),R=Math.round(246+-8*c),z=`rgb(${b},${p},${R})`;e.forEach(B=>{const F=k.find(K=>Math.abs(K.x-B.x)<.1&&Math.abs(K.y-B.y)<.1),J=F?o-F.time:999,H=F&&J<250?(1-J/250)*.9:0;H>.1?(t.shadowColor=`rgba(255, 255, 255, ${H})`,t.shadowBlur=12,t.fillStyle=`rgba(255, 255, 255, ${H*.6})`):(t.shadowColor=z+"66",t.shadowBlur=5,t.fillStyle=z),t.beginPath(),t.arc(B.x,B.y,et,0,Math.PI*2),t.fill()})}),t.shadowBlur=0;const n=h-56,f=52;for(let e=0;e<G;e++){const l=e*x,c=S===2&&e===g;t.fillStyle=e===0||e===8?"rgba(239,68,68,0.22)":e===1||e===7?"rgba(245,158,11,0.18)":e===2||e===6?"rgba(34,211,238,0.18)":"rgba(99,102,241,0.14)",t.beginPath(),e===0?t.roundRect(l+1,n,x-2,f,[6,0,0,6]):e===G-1?t.roundRect(l+1,n,x-2,f,[0,6,6,0]):(t.fillRect(l+1,n,x-2,f),t.beginPath()),t.fill(),c&&(t.shadowColor=q[e],t.shadowBlur=14,t.strokeStyle=q[e],t.lineWidth=2,t.strokeRect(l+1,n,x-2,f),t.shadowBlur=0),t.fillStyle="#fff",t.font="bold 11px -apple-system, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(U[e],l+x/2,n+f/2)}if(u.length>1)for(let e=0;e<u.length;e++){const l=e/u.length*.35,c=m*(e/u.length)*.7;t.fillStyle=`rgba(250, 204, 21, ${l})`,t.beginPath(),t.arc(u[e].x,u[e].y,c,0,Math.PI*2),t.fill()}if(s&&(t.shadowColor="rgba(250, 204, 21, 0.7)",t.shadowBlur=12,t.fillStyle="#facc15",t.beginPath(),t.arc(s.x,s.y,m,0,Math.PI*2),t.fill(),t.shadowBlur=0,t.fillStyle="rgba(255,255,255,0.45)",t.beginPath(),t.arc(s.x-2.5,s.y-2.5,m*.38,0,Math.PI*2),t.fill()),y.length>0&&y.forEach(e=>{const l=Math.max(0,e.life);t.fillStyle=e.color+Math.floor(l*255).toString(16).padStart(2,"0"),t.beginPath(),t.arc(e.x,e.y,2.5*l,0,Math.PI*2),t.fill()}),S===2){const e=W[g],l=U[g];t.fillStyle="rgba(0,0,0,0.55)",t.fillRect(0,h/2-48,i,96),e>0?(t.fillStyle="#22d3ee",t.font="bold 34px -apple-system, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(l,i/2,h/2-10),t.fillStyle="rgba(255,255,255,0.7)",t.font="14px -apple-system, sans-serif",t.fillText(`+${(d.value*e).toFixed(2)}`,i/2,h/2+18)):(t.fillStyle="#ef4444",t.font="bold 34px -apple-system, sans-serif",t.textAlign="center",t.textBaseline="middle",t.fillText(l,i/2,h/2-10),t.fillStyle="rgba(255,255,255,0.5)",t.font="14px -apple-system, sans-serif",t.fillText(`-${d.value.toFixed(2)}`,i/2,h/2+18))}}return xt(()=>{at(),P()}),ut(()=>{M&&cancelAnimationFrame(M),j&&clearTimeout(j)}),(r,t)=>(tt(),Q("div",pt,[a("div",mt,[t[3]||(t[3]=a("div",{class:"rounded-xl px-4 py-2.5 flex items-center justify-between",style:{background:"linear-gradient(135deg, #ca8a04 0%, #22c55e 60%, #4ade80 100%)"}},[a("span",{class:"text-white font-bold text-sm"},"Giftomania"),a("span",{class:"text-white/70 text-xs font-mono"},"3:04:57:06")],-1)),a("div",vt,[t[2]||(t[2]=Z('<div class="flex gap-2"><button class="w-9 h-9 rounded-xl flex items-center justify-center" style="background:rgba(255,255,255,0.06);"><svg class="w-4 h-4" fill="none" stroke="rgba(255,255,255,0.45)" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="1.5"></rect><path d="M16 2v4M8 2v4M3 10h18" stroke-width="1.5" stroke-linecap="round"></path></svg></button><div class="flex items-center gap-1 rounded-full px-3 py-1" style="background:rgba(255,255,255,0.08);"><span class="text-white/50 text-xs">Max Prize</span><span class="text-white/40 text-xs">‚ñº</span><span class="text-white font-bold text-sm">30</span></div></div>',1)),a("div",wt,[a("button",St,[t[0]||(t[0]=a("span",{class:"text-white/45 text-xs"},"‚ñº",-1)),a("span",_t,A(_.value.toFixed(2)),1)]),t[1]||(t[1]=a("button",{class:"w-7 h-7 rounded-full flex items-center justify-center text-white/50 text-sm",style:{background:"rgba(255,255,255,0.12)"}},"+",-1))])])]),a("div",Mt,[a("canvas",{ref_key:"gameCanvas",ref:X,class:"w-full",style:{"max-width":"380px"},width:i,height:h},null,512)]),a("div",kt,[a("div",Pt,[(tt(),Q(ht,null,gt(nt,o=>a("button",{key:o,onClick:n=>ot(o),class:"flex-1 py-2 rounded-lg font-bold flex items-center justify-center gap-1 transition-all",style:bt(d.value===o?{background:"rgba(34,211,238,0.2)",border:"1px solid rgba(34,211,238,0.4)"}:{background:"rgba(255,255,255,0.06)",border:"1px solid transparent"})},[a("span",Rt,A(o),1),t[4]||(t[4]=a("span",{class:"text-white/30 text-xs"},"‚ñº",-1))],12,Tt)),64))]),a("div",Bt,[t[5]||(t[5]=Z('<button class="flex flex-col items-center gap-0.5"><div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background:rgba(255,255,255,0.06);"><div class="w-5 h-5 rounded-full flex items-center justify-center" style="background:#3b82f6;"><span class="text-white text-xs font-bold">‚ñº</span></div></div><span class="text-white/35 text-xs">Swap ‚òÜ</span></button>',1)),a("button",{onClick:rt,disabled:w.value||_.value<d.value,class:"flex-1 py-3 rounded-xl font-bold text-sm text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #22d3ee, #06b6d4)"}},A(w.value?"Dropping...":`Play ‚ñº ${d.value}`),9,At),t[6]||(t[6]=a("button",{class:"flex flex-col items-center gap-0.5"},[a("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white/50 text-lg",style:{background:"rgba(255,255,255,0.10)"}},"+"),a("span",{class:"text-white/35 text-xs"},"Deposit")],-1))]),a("div",Ct,[a("span",It,"‚è± Hash: "+A(L.value),1)])])]))}});export{Et as default};
