import{d as at,I as nt,o as it,E as rt,b as c,e as t,F as N,j as R,t as h,x as T,J as j,n as S,B as J,K as ut,y as dt,h as P,w as V,r as d,c as vt,g as ct,a as f,D as ht}from"./vue-B64cNy51.js";import{_ as ft}from"./index-BV-wefLJ.js";const mt={class:"plinko-view"},pt={class:"stars-bg"},bt={class:"plinko-header"},gt={class:"header-balance"},yt={class:"balance-value"},wt={class:"game-info-bar"},xt={class:"info-item"},kt={class:"info-value"},Mt={class:"info-item"},_t={class:"info-item"},Ct={class:"game-container"},Bt={class:"result-multiplier"},$t={class:"multipliers-row"},St={class:"bet-section"},Pt={class:"bet-amounts"},Vt=["onClick","disabled"],It={class:"action-row"},At=["disabled"],Dt=["disabled"],Ut={key:0,class:"loading-spinner"},Ft={key:1},Nt=["disabled"],Rt={class:"auto-play"},Tt={class:"auto-label"},Wt=["disabled"],Et={class:"history-section"},Yt={class:"history-header"},Ht={class:"history-list"},Lt={class:"history-mult"},qt={class:"history-amount"},zt={class:"bottom-nav"},g=340,I=280,K=4,x=6,Gt=.25,W=.7,Ot=at({__name:"PlinkoView",setup(Xt){const y=d(5.16),z=d(48291),m=d(!1),A=d(!1),G=d(0),w=d(0),D=d("medium"),k=d(12),Q=[.5,1,2,5,10],r=d(1),U=d(!1),_=d(10),E=d([]),M=d(null),Z={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},C=vt(()=>{const s=Z[D.value];return s[k.value]||s[12]});let o=null,B=[],Y=null,H=0;const tt=s=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),et=s=>s>=10?"high":s>=2?"medium":s>=1?"low":"lose",st=()=>{r.value=Math.max(.1,r.value/2)},lt=()=>{r.value=Math.min(y.value,r.value*2)},L=()=>{B=[];const s=k.value,e=40,l=(I-50-e)/s,n=g/2;for(let a=0;a<s;a++){const v=a+3,p=20,u=n-(v-1)*p/2;for(let b=0;b<v;b++)B.push({x:u+b*p,y:e+a*l})}},O=async()=>{if(m.value||y.value<r.value)return;m.value=!0,A.value=!1,y.value-=r.value,z.value++;const s=C.value,e=s.map(n=>1/(n+.1)),i=e.reduce((n,a)=>n+a,0);let l=Math.random()*i;H=Math.floor(s.length/2);for(let n=0;n<e.length;n++)if(l-=e[n],l<=0){H=n;break}o={x:g/2+(Math.random()-.5)*10,y:20,vx:(Math.random()-.5)*2,vy:2},L(),X()},X=()=>{if(!o)return;const s=M.value;if(!s)return;const e=s.getContext("2d");if(e){o.vy+=Gt,o.x+=o.vx,o.y+=o.vy;for(const i of B){const l=o.x-i.x,n=o.y-i.y,a=Math.sqrt(l*l+n*n),v=K+x;if(a<v&&a>0){const p=l/a,u=n/a;o.x=i.x+p*(v+1),o.y=i.y+u*(v+1);const b=o.vx*p+o.vy*u;b<0&&(o.vx-=2*b*p*W,o.vy-=2*b*u*W);const F=C.value,$=g/F.length,ot=H*$+$/2;o.vx+=(ot-o.x)*.01,o.vx+=(Math.random()-.5)*.5}}if(o.x<x&&(o.x=x,o.vx=Math.abs(o.vx)*W),o.x>g-x&&(o.x=g-x,o.vx=-Math.abs(o.vx)*W),q(e),o.y>I-30){const i=C.value,l=g/i.length,n=Math.floor(o.x/l),a=Math.max(0,Math.min(i.length-1,n));G.value=i[a],w.value=r.value*i[a]-r.value,y.value+=r.value*i[a],E.value.unshift({multiplier:i[a],win:w.value,bet:r.value}),A.value=!0,o=null,m.value=!1,setTimeout(()=>{A.value=!1,U.value&&_.value>0&&(_.value--,_.value>0&&y.value>=r.value&&O())},1500);return}Y=requestAnimationFrame(X)}},q=s=>{s.fillStyle="#0a1628",s.fillRect(0,0,g,I);const e=k.value;for(let a=0;a<B.length;a++){const v=B[a],u=Math.floor((-3+Math.sqrt(9+8*a))/2)/e,b=Math.round(59+-25*u),F=Math.round(130+81*u),$=Math.round(246+-8*u);s.fillStyle=`rgb(${b},${F},${$})`,s.shadowColor=`rgba(${b},${F},${$},0.5)`,s.shadowBlur=6,s.beginPath(),s.arc(v.x,v.y,K,0,Math.PI*2),s.fill()}s.shadowBlur=0,o&&(s.fillStyle="#ec4899",s.shadowColor="rgba(236,72,153,0.7)",s.shadowBlur=12,s.beginPath(),s.arc(o.x,o.y,x,0,Math.PI*2),s.fill(),s.shadowBlur=0,s.fillStyle="rgba(255,255,255,0.4)",s.beginPath(),s.arc(o.x-2,o.y-2,x*.4,0,Math.PI*2),s.fill());const i=C.value,l=g/i.length,n=I-28;i.forEach((a,v)=>{const p=v*l;let u="rgba(99,102,241,0.3)";a>=10?u="rgba(34,197,94,0.4)":a>=2?u="rgba(34,211,238,0.3)":a<1&&(u="rgba(239,68,68,0.3)"),s.fillStyle=u,s.fillRect(p+1,n,l-2,26),s.fillStyle="#fff",s.font="bold 9px sans-serif",s.textAlign="center",s.fillText(`${a}x`,p+l/2,n+16)})};return nt([D,k],()=>{if(L(),M.value){const s=M.value.getContext("2d");s&&q(s)}}),it(()=>{if(L(),M.value){const s=M.value.getContext("2d");s&&q(s)}}),rt(()=>{Y&&cancelAnimationFrame(Y)}),(s,e)=>{const i=ct("router-link");return f(),c("div",mt,[t("div",pt,[(f(),c(N,null,R(20,l=>t("div",{key:l,class:"star",style:ht(tt())},null,4)),64))]),t("header",bt,[t("button",{class:"header-back",onClick:e[0]||(e[0]=l=>s.$router.push("/solo"))},[...e[6]||(e[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),e[9]||(e[9]=t("div",{class:"header-title"},[t("span",{class:"title-main"},"Plinko"),t("span",{class:"title-badge"},"x1000")],-1)),t("div",gt,[e[7]||(e[7]=t("span",{class:"balance-icon"},"ðŸ’Ž",-1)),t("span",yt,h(y.value.toFixed(2)),1),e[8]||(e[8]=t("button",{class:"balance-add"},"+",-1))])]),t("div",wt,[t("div",xt,[e[10]||(e[10]=t("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),t("span",kt,"#"+h(z.value),1)]),t("div",Mt,[e[12]||(e[12]=t("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),T(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>D.value=l),class:"risk-select"},[...e[11]||(e[11]=[t("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),t("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),t("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[j,D.value]])]),t("div",_t,[e[14]||(e[14]=t("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),T(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>k.value=l),class:"rows-select"},[...e[13]||(e[13]=[t("option",{value:8},"8",-1),t("option",{value:12},"12",-1),t("option",{value:16},"16",-1)])],512),[[j,k.value]])])]),t("div",Ct,[t("canvas",{ref_key:"gameCanvas",ref:M,class:"game-canvas",width:g,height:I},null,512),A.value?(f(),c("div",{key:0,class:S(["result-overlay",{win:w.value>0,lose:w.value<=0}])},[t("div",Bt,h(G.value)+"x",1),t("div",{class:S(["result-amount",{positive:w.value>0}])},h(w.value>0?"+":"")+h(w.value.toFixed(2))+" TON ",3)],2)):J("",!0)]),t("div",$t,[(f(!0),c(N,null,R(C.value,(l,n)=>(f(),c("div",{key:n,class:S(["mult-slot",et(l)])},h(l)+"x ",3))),128))]),t("div",St,[t("div",Pt,[(f(),c(N,null,R(Q,l=>t("button",{key:l,class:S(["bet-btn",{active:r.value===l}]),onClick:n=>r.value=l,disabled:m.value},h(l)+" ðŸ’Ž ",11,Vt)),64))]),t("div",It,[t("button",{class:"btn-half",onClick:st,disabled:m.value},"Â½",8,At),t("button",{class:"btn-play",onClick:O,disabled:m.value||y.value<r.value},[m.value?(f(),c("span",Ut)):(f(),c("span",Ft,h(m.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${r.value} TON`),1))],8,Dt),t("button",{class:"btn-double",onClick:lt,disabled:m.value},"2x",8,Nt)]),t("div",Rt,[t("label",Tt,[T(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=l=>U.value=l),disabled:m.value},null,8,Wt),[[ut,U.value]]),e[15]||(e[15]=t("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),U.value?T((f(),c("input",{key:0,type:"number","onUpdate:modelValue":e[4]||(e[4]=l=>_.value=l),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[dt,_.value,void 0,{number:!0}]]):J("",!0)])]),t("div",Et,[t("div",Yt,[e[16]||(e[16]=t("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),t("span",{class:"history-clear",onClick:e[5]||(e[5]=l=>E.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),t("div",Ht,[(f(!0),c(N,null,R(E.value.slice(0,10),(l,n)=>(f(),c("div",{key:n,class:S(["history-item",{win:l.win>0}])},[t("span",Lt,h(l.multiplier)+"x",1),t("span",qt,h(l.win>0?"+":"")+h(l.win.toFixed(2)),1)],2))),128))])]),t("nav",zt,[P(i,{to:"/pvp",class:"nav-item"},{default:V(()=>[...e[17]||(e[17]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4l4 4m8 8l4 4M4 20l4-4m8-8l4-4M12 12l-8 8m16 0l-8-8m0 0l8-8M4 4l8 8"})],-1),t("span",null,"ÐŸÐ²ÐŸ",-1)])]),_:1}),P(i,{to:"/solo",class:"nav-item active"},{default:V(()=>[...e[18]||(e[18]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),t("span",null,"Ð¡Ð¾Ð»Ð¾",-1)])]),_:1}),P(i,{to:"/inventory",class:"nav-item"},{default:V(()=>[...e[19]||(e[19]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("path",{d:"M3 9h18M9 21V9"})],-1),t("span",null,"Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ",-1)])]),_:1}),P(i,{to:"/shop",class:"nav-item"},{default:V(()=>[...e[20]||(e[20]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),t("span",null,"ÐœÐ°Ð³Ð°Ð·Ð¸Ð½",-1)])]),_:1}),P(i,{to:"/profile",class:"nav-item"},{default:V(()=>[...e[21]||(e[21]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1),t("span",null,"ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ",-1)])]),_:1})])])}}}),Kt=ft(Ot,[["__scopeId","data-v-36b4f01d"]]);export{Kt as default};
