import{f as g,o as s,a as l,y as v,b as t,c as f,t as r,h as $,l as b,p as c,d as x,F as j,k as F,w as V,r as p,e as z,A as G,u as A,j as P}from"./vue-DpDB_xhb.js";import{g as H,b as T}from"./client-Byqmzb3A.js";import{u as D}from"./index-DCUERR7g.js";import"./index-D5GkNzM3.js";const h=g({__name:"LoadingSpinner",props:{size:{default:"md"},fullHeight:{type:Boolean,default:!1}},setup(m){const n=m,d=f(()=>({sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"})[n.size]),e=f(()=>n.fullHeight?"min-h-[60vh]":"py-8");return(i,_)=>(s(),l("div",{class:v(["flex items-center justify-center",e.value])},[t("div",{class:v(["animate-spin rounded-full border-4 border-gray-700 border-t-blue-500",d.value])},null,2)],2))}}),E={class:"flex items-center space-x-1"},M={class:"font-bold text-white"},k=g({__name:"PriceTag",props:{price:{}},setup(m){const n=m,d=f(()=>(typeof n.price=="string"?parseFloat(n.price):n.price).toFixed(2));return(e,i)=>(s(),l("div",E,[i[0]||(i[0]=t("svg",{class:"w-4 h-4 flex-shrink-0",viewBox:"0 0 56 56",fill:"none"},[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),t("span",M,r(d.value),1)]))}}),S={class:"max-w-4xl mx-auto px-4 py-6"},q={key:1},I={class:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden mb-6"},R={class:"aspect-square max-w-md mx-auto p-8"},Z=["src","alt"],J={key:1,class:"flex items-center justify-center h-full text-9xl"},K={class:"bg-gray-800 rounded-2xl p-6 mb-6"},O={class:"flex items-start justify-between mb-4"},Q={class:"text-2xl font-bold mb-2"},U={key:0,class:"text-gray-400 text-sm"},W={key:0,class:"text-gray-300 mb-4"},X={key:1,class:"flex flex-wrap gap-2 mb-4"},Y={key:0,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},ee={key:1,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},te={key:2,class:"border-t border-gray-700 pt-4"},se={class:"bg-gray-800 rounded-2xl p-6"},le={class:"text-xl font-bold mb-4"},oe={key:1,class:"space-y-3"},ae=["href"],re={class:"flex items-center justify-between"},ne={class:"font-semibold text-lg mb-1"},ie={class:"text-gray-400 text-xs truncate"},ce={class:"text-right"},de={key:2,class:"text-center py-8 text-gray-400"},ue={key:2,class:"text-center py-16"},fe=g({__name:"GiftDetailView",setup(m){const n=G(),{hapticImpact:d}=D(),e=p(null),i=p([]),_=p(!0),y=p(!0),w=async()=>{try{const a=Number(n.params.id);e.value=await H(a)}catch(a){console.error("Failed to load gift:",a)}finally{_.value=!1}},C=async()=>{try{const a=Number(n.params.id),o=await T(a);i.value=o.listings||[]}catch(a){console.error("Failed to load listings:",a)}finally{y.value=!1}},L=a=>a?`${a.slice(0,6)}...${a.slice(-4)}`:"",B=a=>{const o={common:"bg-gray-600 text-gray-100",uncommon:"bg-green-600 text-green-100",rare:"bg-blue-600 text-blue-100",epic:"bg-purple-600 text-purple-100",legendary:"bg-yellow-600 text-yellow-100"};return o[a.toLowerCase()]||o.common};return $(async()=>{await Promise.all([w(),C()])}),(a,o)=>{const N=z("router-link");return s(),l("div",S,[_.value?(s(),b(h,{key:0,"full-height":!0})):e.value?(s(),l("div",q,[t("div",I,[t("div",R,[e.value.image_url?(s(),l("img",{key:0,src:e.value.image_url,alt:e.value.name,class:"w-full h-full object-contain"},null,8,Z)):(s(),l("div",J," üéÅ "))])]),t("div",K,[t("div",O,[t("div",null,[t("h1",Q,r(e.value.name),1),e.value.collection_name?(s(),l("p",U,r(e.value.collection_name),1)):c("",!0)]),e.value.rarity?(s(),l("div",{key:0,class:v(["px-3 py-1 rounded-full text-sm font-semibold",B(e.value.rarity)])},r(e.value.rarity),3)):c("",!0)]),e.value.description?(s(),l("p",W,r(e.value.description),1)):c("",!0),e.value.backdrop||e.value.model?(s(),l("div",X,[e.value.backdrop?(s(),l("span",Y," üé® "+r(e.value.backdrop),1)):c("",!0),e.value.model?(s(),l("span",ee," üéÅ "+r(e.value.model),1)):c("",!0)])):c("",!0),e.value.min_price_ton?(s(),l("div",te,[o[1]||(o[1]=t("div",{class:"text-gray-400 text-sm mb-1"},"Best Price",-1)),x(k,{price:e.value.min_price_ton,class:"text-2xl"},null,8,["price"])])):c("",!0)]),t("div",se,[t("h2",le," Available Listings ("+r(i.value.length)+") ",1),y.value?(s(),b(h,{key:0,size:"sm"})):i.value.length>0?(s(),l("div",oe,[(s(!0),l(j,null,F(i.value,u=>(s(),l("a",{key:u.id,href:u.listing_url,target:"_blank",class:"block bg-gray-900 rounded-xl p-4 hover:ring-2 hover:ring-blue-500 transition-all",onClick:o[0]||(o[0]=me=>A(d)("medium"))},[t("div",re,[t("div",null,[t("div",ne,r(u.market_name),1),t("div",ie,r(L(u.seller_address)),1)]),t("div",ce,[x(k,{price:u.price_ton},null,8,["price"]),o[2]||(o[2]=t("div",{class:"text-xs text-blue-400 mt-1"},"View ‚Üí",-1))])])],8,ae))),128))])):(s(),l("div",de," No active listings "))])])):(s(),l("div",ue,[o[4]||(o[4]=t("div",{class:"text-6xl mb-4"},"üòï",-1)),o[5]||(o[5]=t("h3",{class:"text-xl font-semibold mb-2"},"Gift not found",-1)),x(N,{to:"/",class:"text-blue-400 hover:text-blue-300"},{default:V(()=>[...o[3]||(o[3]=[P(" ‚Üê Back to all gifts ",-1)])]),_:1})]))])}}});export{fe as default};
