import{f as ee,h as te,a as i,b as e,F as b,k as f,j as A,t as l,p,v as u,x as c,z as I,y as h,r as v,o as a}from"./vue-DpDB_xhb.js";import{_ as N}from"./ton_symbol-CfLG12-S.js";import{a as se}from"./index-DCUERR7g.js";const oe={class:"admin-panel"},ne={class:"admin-header"},ie={class:"header-left"},le={class:"tabs"},ae=["onClick"],de={key:0,class:"section"},re={class:"stats-grid"},ue={class:"stat-card green"},ce={class:"stat-value"},ve={class:"stat-card blue"},me={class:"stat-value"},pe={class:"stat-card yellow"},_e={class:"stat-value"},ge={class:"stat-card red"},be={class:"stat-value"},fe={key:1,class:"section"},ye={class:"game-header"},he={class:"game-name"},ke={class:"game-controls"},we={class:"control-row"},Ce=["onUpdate:modelValue","onChange"],Se={class:"control-row"},Te=["onUpdate:modelValue","onChange"],Ue={class:"control-row"},xe=["onUpdate:modelValue","onChange"],Oe={class:"control-row"},Pe=["onUpdate:modelValue","onChange"],Ve={class:"control-row"},$e={class:"toggle-group"},Ae=["onClick"],Ne=["onUpdate:modelValue","onChange"],Ee={class:"control-row actions"},Fe=["onClick"],Le=["onClick"],De={key:2,class:"section"},Ie={class:"create-form"},Me={class:"form-grid"},Re={class:"form-field"},Be={class:"form-field"},Ge=["value"],Je={class:"form-field"},We={class:"form-field"},qe={class:"form-field"},je={class:"form-field"},ze={class:"form-field"},He={class:"form-field"},Qe={class:"quick-target-actions"},Ke={class:"inline-form"},Xe={class:"targets-list"},Ye={class:"target-info"},Ze={class:"target-user"},et={class:"target-game"},tt={class:"target-uses"},st=["onClick"],ot={key:0,class:"empty"},nt={key:3,class:"section"},it={class:"override-card"},lt={class:"inline-form"},at={class:"override-card"},dt={class:"slot-grid"},rt=["onClick"],ut={class:"inline-form"},ct={class:"overrides-list"},vt={class:"override-game"},mt={key:0,class:"override-value"},pt={key:1,class:"override-value"},_t={class:"override-status"},gt={key:0,class:"empty"},bt={key:4,class:"section"},ft={class:"audit-time"},yt={class:"audit-action"},ht={class:"audit-desc"},kt={key:0,class:"empty"},wt={key:5,class:"status-bar"},Ct="/api",St=ee({__name:"AdminView",setup(Tt){const g=v("dashboard"),M=[{id:"dashboard",label:"Dashboard",icon:"ðŸ“Š"},{id:"settings",label:"Settings",icon:"âš™ï¸"},{id:"targets",label:"Targets",icon:"ðŸŽ¯"},{id:"rounds",label:"Rounds",icon:"ðŸŽ²"},{id:"audit",label:"Audit",icon:"ðŸ“‹"}],R=["plinko","trading","roulette","aviator","pvp","upgrade","lucky","gonka","ball_escape","rocket"],E=["ðŸ’€","ðŸŽ","2.0x","0.7x","0.6x","0.7x","2.0x","ðŸŽ","ðŸ’€"],k=v({}),F=v([]),S=v([]),P=v([]),V=v([]),n=v({user_id:"",game_type:"",target_mode:"win",forced_multiplier:null,custom_rtp:null,uses:1,active_hours:null,note:""}),_=v(""),T=v(1.5),w=v(4),U=v(""),x=v(""),L=v("success");function m(o,t="success"){x.value=o,L.value=t,setTimeout(()=>{x.value=""},3e3)}function B(o){return o?new Date(o).toLocaleString("ru-RU"):""}async function r(o,t){try{return await(await fetch(Ct+o,{headers:{"Content-Type":"application/json"},...t})).json()}catch(s){return console.error("API error:",s),m("API Error: "+s.message,"error"),null}}async function G(){const o=await r("/admin/stats");o&&(k.value=o)}async function O(){const o=await r("/admin/settings");o&&(F.value=o.settings||[])}async function C(){const o=await r("/admin/targets");o&&(S.value=o.targets||[])}async function $(){const o=await r("/admin/rounds/trading"),t=await r("/admin/rounds/plinko");P.value=[...o?.overrides||[],...t?.overrides||[]]}async function J(){const o=await r("/admin/audit");o&&(V.value=o.logs||[])}async function y(o){await r(`/admin/settings/${o.game_type}`,{method:"PUT",body:JSON.stringify({rtp_percent:o.rtp_percent,house_edge_percent:o.house_edge_percent,min_bet:o.min_bet,max_bet:o.max_bet,rigged_mode:o.rigged_mode,rigged_win_rate:o.rigged_win_rate})}),m(`${o.game_type} settings updated`)}async function D(o,t){await r(`/admin/settings/${o.game_type}/toggle?enabled=${t}`,{method:"POST"}),o.is_enabled=t,m(`${o.game_type} ${t?"enabled":"disabled"}`)}async function W(o){o.rigged_mode=!o.rigged_mode,await y(o)}async function q(){const o={user_id:n.value.user_id,target_mode:n.value.target_mode,uses:n.value.uses};n.value.game_type&&(o.game_type=n.value.game_type),n.value.forced_multiplier&&(o.forced_multiplier=n.value.forced_multiplier),n.value.custom_rtp&&(o.custom_rtp=n.value.custom_rtp),n.value.active_hours&&(o.active_hours=n.value.active_hours),n.value.note&&(o.note=n.value.note),(await r("/admin/targets",{method:"POST",body:JSON.stringify(o)}))?.status==="ok"&&(m("Target created"),await C())}async function j(){_.value&&(await r("/admin/targets/force-win",{method:"POST",body:JSON.stringify({user_id:_.value,uses:1})}),m(`Force WIN for ${_.value}`),await C())}async function z(){_.value&&(await r("/admin/targets/force-lose",{method:"POST",body:JSON.stringify({user_id:_.value,uses:1})}),m(`Force LOSE for ${_.value}`,"error"),await C())}async function H(o){await r(`/admin/targets/${o}`,{method:"DELETE"}),m("Target deleted"),await C()}async function Q(){(await r("/admin/rounds/force-crash",{method:"POST",body:JSON.stringify({crash_point:T.value})}))?.status==="ok"&&(m(`Next crash at ${T.value}x`),await $())}async function K(){const o=`/admin/rounds/force-plinko-slot?slot=${w.value}`+(U.value?`&user_id=${U.value}`:"");(await r(o,{method:"POST"}))?.status==="ok"&&(m(`Plinko â†’ slot ${w.value} (${E[w.value]})`),await $())}async function X(){await r("/admin/emergency/stop-all",{method:"POST"}),m("ALL GAMES STOPPED","error"),await O()}async function Y(){await r("/admin/emergency/resume-all",{method:"POST"}),m("All games resumed"),await O()}async function Z(){await r("/admin/settings/init-defaults",{method:"POST"}),m("Default settings initialized"),await O()}return te(async()=>{await Promise.all([G(),O(),C(),$(),J()])}),(o,t)=>(a(),i("div",oe,[e("div",ne,[e("div",ie,[e("button",{class:"back-btn",onClick:t[0]||(t[0]=s=>o.$router.back())},[...t[12]||(t[12]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[13]||(t[13]=e("h1",null,"Admin Panel",-1))]),t[14]||(t[14]=e("div",{class:"header-badge"},"GAMBLING CONTROL",-1))]),e("div",le,[(a(),i(b,null,f(M,s=>e("button",{key:s.id,class:h(["tab",{active:g.value===s.id}]),onClick:d=>g.value=s.id},l(s.icon)+" "+l(s.label),11,ae)),64))]),g.value==="dashboard"?(a(),i("div",de,[e("div",re,[e("div",ue,[t[16]||(t[16]=e("div",{class:"stat-label"},"Today Profit",-1)),e("div",ce,[t[15]||(t[15]=e("img",{src:N,width:"12",height:"12",style:{display:"inline-block","vertical-align":"middle","margin-right":"2px"}},null,-1)),A(" "+l(k.value.today?.profit?.toFixed(2)||"0.00"),1)])]),e("div",ve,[t[18]||(t[18]=e("div",{class:"stat-label"},"Today Volume",-1)),e("div",me,[t[17]||(t[17]=e("img",{src:N,width:"12",height:"12",style:{display:"inline-block","vertical-align":"middle","margin-right":"2px"}},null,-1)),A(" "+l(k.value.today?.volume?.toFixed(2)||"0.00"),1)])]),e("div",pe,[t[19]||(t[19]=e("div",{class:"stat-label"},"Today Bets",-1)),e("div",_e,l(k.value.today?.bets||0),1)]),e("div",ge,[t[21]||(t[21]=e("div",{class:"stat-label"},"Week Profit",-1)),e("div",be,[t[20]||(t[20]=e("img",{src:N,width:"12",height:"12",style:{display:"inline-block","vertical-align":"middle","margin-right":"2px"}},null,-1)),A(" "+l(k.value.week?.profit?.toFixed(2)||"0.00"),1)])])]),t[22]||(t[22]=e("h2",{class:"section-title"},"Quick Actions",-1)),e("div",{class:"quick-actions"},[e("button",{class:"action-btn red",onClick:X},"STOP ALL GAMES"),e("button",{class:"action-btn green",onClick:Y},"RESUME ALL"),e("button",{class:"action-btn blue",onClick:Z},"Init Default Settings")])])):p("",!0),g.value==="settings"?(a(),i("div",fe,[t[28]||(t[28]=e("h2",{class:"section-title"},"Game Settings",-1)),(a(!0),i(b,null,f(F.value,s=>(a(),i("div",{key:s.game_type,class:"game-card"},[e("div",ye,[e("span",he,l(s.game_type.toUpperCase()),1),e("div",{class:h(["game-status",{enabled:s.is_enabled,disabled:!s.is_enabled}])},l(s.is_enabled?"ON":"OFF"),3)]),e("div",ke,[e("div",we,[t[23]||(t[23]=e("label",null,"RTP %",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.rtp_percent=d,min:"50",max:"99",step:"0.5",onChange:d=>y(s)},null,40,Ce),[[c,s.rtp_percent,void 0,{number:!0}]])]),e("div",Se,[t[24]||(t[24]=e("label",null,"House Edge %",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.house_edge_percent=d,min:"1",max:"50",step:"0.5",onChange:d=>y(s)},null,40,Te),[[c,s.house_edge_percent,void 0,{number:!0}]])]),e("div",Ue,[t[25]||(t[25]=e("label",null,"Min Bet",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.min_bet=d,min:"0.01",step:"0.1",onChange:d=>y(s)},null,40,xe),[[c,s.min_bet,void 0,{number:!0}]])]),e("div",Oe,[t[26]||(t[26]=e("label",null,"Max Bet",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.max_bet=d,min:"1",step:"1",onChange:d=>y(s)},null,40,Pe),[[c,s.max_bet,void 0,{number:!0}]])]),e("div",Ve,[t[27]||(t[27]=e("label",null,"Rigged Mode",-1)),e("div",$e,[e("button",{class:h(["toggle-btn",{active:s.rigged_mode}]),onClick:d=>W(s)},l(s.rigged_mode?"ON":"OFF"),11,Ae),s.rigged_mode?u((a(),i("input",{key:0,type:"number","onUpdate:modelValue":d=>s.rigged_win_rate=d,min:"0",max:"1",step:"0.05",placeholder:"Win Rate",onChange:d=>y(s)},null,40,Ne)),[[c,s.rigged_win_rate,void 0,{number:!0}]]):p("",!0)])]),e("div",Ee,[e("button",{class:"btn-small green",onClick:d=>D(s,!0)},"Enable",8,Fe),e("button",{class:"btn-small red",onClick:d=>D(s,!1)},"Disable",8,Le)])])]))),128))])):p("",!0),g.value==="targets"?(a(),i("div",De,[t[41]||(t[41]=e("h2",{class:"section-title"},"User Targeting",-1)),e("div",Ie,[t[39]||(t[39]=e("h3",null,"New Target",-1)),e("div",Me,[e("div",Re,[t[29]||(t[29]=e("label",null,"User ID (Telegram)",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.user_id=s),placeholder:"123456789"},null,512),[[c,n.value.user_id]])]),e("div",Be,[t[31]||(t[31]=e("label",null,"Game",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.game_type=s)},[t[30]||(t[30]=e("option",{value:""},"All Games",-1)),(a(),i(b,null,f(R,s=>e("option",{key:s,value:s},l(s),9,Ge)),64))],512),[[I,n.value.game_type]])]),e("div",Je,[t[33]||(t[33]=e("label",null,"Mode",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.target_mode=s)},[...t[32]||(t[32]=[e("option",{value:"win"},"FORCE WIN",-1),e("option",{value:"lose"},"FORCE LOSE",-1),e("option",{value:"specific"},"SPECIFIC RESULT",-1)])],512),[[I,n.value.target_mode]])]),e("div",We,[t[34]||(t[34]=e("label",null,"Forced Multiplier",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.forced_multiplier=s),placeholder:"2.5"},null,512),[[c,n.value.forced_multiplier,void 0,{number:!0}]])]),e("div",qe,[t[35]||(t[35]=e("label",null,"Custom RTP %",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>n.value.custom_rtp=s),placeholder:"97"},null,512),[[c,n.value.custom_rtp,void 0,{number:!0}]])]),e("div",je,[t[36]||(t[36]=e("label",null,"Uses (-1 = infinite)",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>n.value.uses=s)},null,512),[[c,n.value.uses,void 0,{number:!0}]])]),e("div",ze,[t[37]||(t[37]=e("label",null,"Active Hours",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>n.value.active_hours=s),placeholder:"24"},null,512),[[c,n.value.active_hours,void 0,{number:!0}]])]),e("div",He,[t[38]||(t[38]=e("label",null,"Note",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>n.value.note=s),placeholder:"Admin note..."},null,512),[[c,n.value.note]])])]),e("button",{class:"action-btn blue",onClick:q},"Create Target")]),e("div",Qe,[t[40]||(t[40]=e("h3",null,"Quick",-1)),e("div",Ke,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>_.value=s),placeholder:"User ID"},null,512),[[c,_.value]]),e("button",{class:"btn-small green",onClick:j},"Force Win"),e("button",{class:"btn-small red",onClick:z},"Force Lose")])]),e("div",Xe,[e("h3",null,"Active Targets ("+l(S.value.length)+")",1),(a(!0),i(b,null,f(S.value,s=>(a(),i("div",{key:s.id,class:"target-item"},[e("div",Ye,[e("span",Ze,l(s.user_id),1),e("span",{class:h(["target-mode",s.target_mode])},l(s.target_mode.toUpperCase()),3),e("span",et,l(s.game_type||"ALL"),1),e("span",tt,l(s.uses_remaining===-1?"âˆž":s.uses_remaining)+" uses left",1)]),e("button",{class:"btn-small red",onClick:d=>H(s.id)},"Delete",8,st)]))),128)),S.value.length===0?(a(),i("div",ot,"No active targets")):p("",!0)])])):p("",!0),g.value==="rounds"?(a(),i("div",nt,[t[47]||(t[47]=e("h2",{class:"section-title"},"Round Override",-1)),e("div",it,[t[42]||(t[42]=e("h3",null,"Trading / Crash",-1)),t[43]||(t[43]=e("p",{class:"hint"},"Force next round crash point",-1)),e("div",lt,[u(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>T.value=s),placeholder:"1.50",min:"1",step:"0.01"},null,512),[[c,T.value,void 0,{number:!0}]]),e("button",{class:"action-btn yellow",onClick:Q},"Set Crash Point")])]),e("div",at,[t[44]||(t[44]=e("h3",null,"Plinko",-1)),t[45]||(t[45]=e("p",{class:"hint"},"Force next drop landing slot",-1)),e("div",dt,[(a(),i(b,null,f(E,(s,d)=>e("button",{key:d,class:h(["slot-btn",{selected:w.value===d}]),onClick:Ut=>w.value=d},l(s),11,rt)),64))]),e("div",ut,[u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>U.value=s),placeholder:"Target User ID (optional)"},null,512),[[c,U.value]]),e("button",{class:"action-btn yellow",onClick:K},"Set Slot")])]),e("div",ct,[t[46]||(t[46]=e("h3",null,"Pending Overrides",-1)),(a(!0),i(b,null,f(P.value,s=>(a(),i("div",{key:s.id,class:"override-item"},[e("span",vt,l(s.game_type),1),s.forced_crash_point?(a(),i("span",mt,"Crash: "+l(s.forced_crash_point)+"x",1)):p("",!0),s.forced_slot!==null?(a(),i("span",pt,"Slot: "+l(s.forced_slot),1)):p("",!0),e("span",_t,l(s.is_used?"USED":"PENDING"),1)]))),128)),P.value.length===0?(a(),i("div",gt,"No pending overrides")):p("",!0)])])):p("",!0),g.value==="audit"?(a(),i("div",bt,[t[48]||(t[48]=e("h2",{class:"section-title"},"Audit Log",-1)),(a(!0),i(b,null,f(V.value,s=>(a(),i("div",{key:s.id,class:"audit-item"},[e("div",ft,l(B(s.timestamp)),1),e("div",yt,l(s.action),1),e("div",ht,l(s.description),1)]))),128)),V.value.length===0?(a(),i("div",kt,"No audit logs")):p("",!0)])):p("",!0),x.value?(a(),i("div",wt,[e("span",{class:h(["status-text",L.value])},l(x.value),3)])):p("",!0)]))}}),Vt=se(St,[["__scopeId","data-v-aa1d692c"]]);export{Vt as default};
