import{f as S,o as i,a as o,y as _,b as e,t as n,j as p,p as b,m as q,F as C,k as R,d as I,n as O,h as W,u as j,l as N,g as J,r as h,c as $}from"./vue-DpDB_xhb.js";import{u as F,a as M}from"./index-DCUERR7g.js";import{T as P}from"./TelegramGiftCard-B167vEZV.js";import{_ as V}from"./ton_symbol-CfLG12-S.js";import{j as K}from"./client-Byqmzb3A.js";import"./index-D5GkNzM3.js";const Q=["disabled"],U={class:"risk-icon"},X={class:"risk-info"},ee={class:"risk-name"},te={class:"risk-multiplier"},se={class:"risk-chance"},le={class:"risk-min"},ie={key:0,class:"risk-checkmark"},oe={key:1,class:"flame-effect"},ae=S({__name:"RiskButton",props:{risk:{},selected:{type:Boolean},disabled:{type:Boolean}},emits:["click"],setup(s,{emit:y}){const v=y,{hapticImpact:f}=F(),r=()=>{f("medium"),v("click")};return(u,c)=>(i(),o("button",{class:_(["risk-button",[s.risk.level,{active:s.selected,disabled:s.disabled}]]),disabled:s.disabled,onClick:r},[e("div",U,n(s.risk.icon),1),e("div",X,[e("div",ee,n(s.risk.name),1),e("div",te,"x"+n(s.risk.multiplier),1),e("div",se,n((s.risk.probability*100).toFixed(1))+"% chance",1),e("div",le,[p("Min: "+n(s.risk.minValue)+" ",1),c[0]||(c[0]=e("img",{src:V,width:"10",height:"10",style:{display:"inline-block","vertical-align":"middle"}},null,-1))])]),s.selected?(i(),o("div",ie,[...c[1]||(c[1]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"})],-1)])])):b("",!0),s.risk.level==="risky"&&s.selected?(i(),o("div",oe,[...c[2]||(c[2]=[e("span",{class:"flame"},"ðŸ”¥",-1),e("span",{class:"flame"},"ðŸ”¥",-1),e("span",{class:"flame"},"ðŸ”¥",-1)])])):b("",!0)],10,Q))}}),ne=M(ae,[["__scopeId","data-v-760a8a54"]]),re={key:0,class:"confetti-container"},de={class:"result-icon"},ce={key:0,class:"icon-win"},ue={key:1,class:"icon-loss"},ve={class:"result-title"},me={class:"result-details"},fe={class:"detail-row"},be={class:"detail-row"},ge={class:"detail-value"},ye={class:"detail-row"},xe={class:"detail-value"},ke={class:"detail-label"},he={class:"detail-value payout"},pe={key:0,class:"detail-row highlight win"},we={class:"detail-value payout"},_e={key:1,class:"reward-section"},$e={class:"provably-fair"},Ce={class:"fair-details"},Re={class:"fair-row"},Ve={class:"fair-value mono"},Be={class:"action-buttons"},Se=S({__name:"ContractResultModal",props:{result:{}},emits:["close","playAgain"],setup(s,{emit:y}){const v=y,{hapticImpact:f}=F(),r=x=>{const l=["#10b981","#3b82f6","#f59e0b","#ef4444","#a855f7"];return{left:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,backgroundColor:l[x%l.length]}},u=()=>{f("light"),console.log("Verify result")},c=()=>{f("medium"),v("close")},w=()=>{f("medium"),v("close")};return(x,l)=>(i(),o("div",{class:"modal-overlay",onClick:l[1]||(l[1]=q(m=>v("close"),["self"]))},[e("div",{class:_(["modal-content",s.result.won?"win":"loss"])},[s.result.won?(i(),o("div",re,[(i(),o(C,null,R(50,m=>e("div",{key:m,class:"confetti",style:O(r(m))},null,4)),64))])):b("",!0),e("div",de,[s.result.won?(i(),o("span",ce,"ðŸŽ‰")):(i(),o("span",ue,"ðŸ˜¢"))]),e("h2",ve,n(s.result.won?"Congratulations!":"Better Luck Next Time"),1),e("div",me,[e("div",fe,[l[2]||(l[2]=e("span",{class:"detail-label"},"Risk Level",-1)),e("span",{class:_(["detail-value risk-badge",s.result.risk_level])},n(s.result.risk_level),3)]),e("div",be,[l[3]||(l[3]=e("span",{class:"detail-label"},"Multiplier",-1)),e("span",ge,"x"+n(s.result.multiplier),1)]),e("div",ye,[l[5]||(l[5]=e("span",{class:"detail-label"},"Input Value",-1)),e("span",xe,[l[4]||(l[4]=e("img",{src:V,width:"12",height:"12",style:{display:"inline-block","vertical-align":"middle","margin-right":"2px"}},null,-1)),p(n(s.result.input_value.toFixed(2)),1)])]),e("div",{class:_(["detail-row highlight",s.result.won?"win":"loss"])},[e("span",ke,n(s.result.won?"You Won":"You Lost"),1),e("span",he,[p(n(s.result.won?"+":"-")+n(s.result.input_value.toFixed(2))+" ",1),l[6]||(l[6]=e("img",{src:V,width:"12",height:"12",style:{display:"inline-block","vertical-align":"middle","margin-left":"2px"}},null,-1))])],2),s.result.won?(i(),o("div",pe,[l[8]||(l[8]=e("span",{class:"detail-label"},"Total Payout",-1)),e("span",we,[p(n(s.result.payout_value.toFixed(2))+" ",1),l[7]||(l[7]=e("img",{src:V,width:"14",height:"14",style:{display:"inline-block","vertical-align":"middle","margin-left":"2px"}},null,-1))])])):b("",!0)]),s.result.won&&s.result.reward_gift?(i(),o("div",_e,[l[9]||(l[9]=e("h3",{class:"reward-title"},"Your Reward",-1)),I(P,{gift:s.result.reward_gift},null,8,["gift"])])):b("",!0),e("div",$e,[l[11]||(l[11]=e("div",{class:"fair-header"},[e("span",{class:"fair-icon"},"ðŸ”"),e("span",{class:"fair-title"},"Provably Fair")],-1)),e("div",Ce,[e("div",Re,[l[10]||(l[10]=e("span",{class:"fair-label"},"Server Seed",-1)),e("span",Ve,n(s.result.server_seed||"Loading..."),1)]),e("button",{class:"verify-button",onClick:u}," Verify Result ")])]),e("div",Be,[s.result.won?(i(),o("button",{key:0,class:"action-button primary",onClick:c}," Play Again ðŸŽ® ")):(i(),o("button",{key:1,class:"action-button primary",onClick:w}," Try Again ðŸ”¥ ")),e("button",{class:"action-button secondary",onClick:l[0]||(l[0]=m=>v("close"))}," Close ")])],2)]))}}),Fe=M(Se,[["__scopeId","data-v-39de9fed"]]),Me={class:"contracts-view min-h-screen bg-gray-950 pb-24"},Le={class:"px-4 pt-6 pb-4 bg-gradient-to-b from-red-900/20 to-transparent"},Ae={key:0,class:"mx-4 mt-6 mb-4"},Ge={class:"bg-gray-800/50 rounded-xl p-4 border border-gray-700"},Te={class:"flex items-center justify-between mb-3"},je={class:"text-2xl font-bold text-white"},Ne={class:"text-2xl font-bold text-blue-400"},Ie={width:"14",height:"14",viewBox:"0 0 56 56",fill:"none",style:{display:"inline-block","vertical-align":"middle","margin-right":"3px"}},Pe={class:"flex items-center justify-between pt-3 border-t border-gray-700"},Ee={class:"mx-4 mt-6"},Ye={class:"space-y-3"},ze={key:1,class:"mx-4 mt-6"},De={class:"bg-gradient-to-r from-yellow-900/30 to-amber-900/30 rounded-xl p-4 border border-yellow-500/30"},He={class:"flex items-center justify-between"},Ze={class:"text-3xl font-bold text-white"},qe={width:"16",height:"16",viewBox:"0 0 56 56",fill:"none",style:{display:"inline-block","vertical-align":"middle","margin-right":"3px"}},Oe={class:"mt-3 text-xs text-yellow-300"},We={class:"mx-4 mt-8"},Je={class:"flex items-center justify-between mb-4"},Ke={class:"text-sm text-gray-400"},Qe={key:0,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Ue={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-4"},Xe={key:2,class:"text-center py-16"},et={class:"fixed bottom-0 left-0 right-0 bg-gray-900/95 backdrop-blur-sm border-t border-gray-800 p-4 pb-safe z-40"},tt=["disabled"],st={key:0},lt={key:1},it={key:2},ot={key:3},at=S({__name:"ContractsView",setup(s){const y=J(),{hapticImpact:v}=F(),f=[{level:"safe",name:"Safe",icon:"ðŸ›¡ï¸",multiplier:2,probability:.45,minValue:1,color:"green"},{level:"normal",name:"Normal",icon:"âš–ï¸",multiplier:8,probability:.11,minValue:5,color:"blue"},{level:"risky",name:"Risky",icon:"ðŸ”¥",multiplier:100,probability:.009,minValue:20,color:"red"}],r=h([]),u=h(""),c=h([]),w=h(!0),x=h(!1),l=h(null),m=$(()=>r.value.reduce((a,t)=>{const d=c.value.find(Z=>Z.id===t),B=parseFloat(String(d?.min_price_ton||0));return a+B},0)),g=$(()=>f.find(a=>a.level===u.value)),L=$(()=>g.value?m.value*g.value.multiplier:0),k=$(()=>{if(r.value.length<2||r.value.length>10||!u.value)return!1;const a=g.value;return a?m.value>=a.minValue:!1}),A=a=>m.value>=a.minValue,E=a=>{const t=f.find(d=>d.level===a);t&&A(t)&&(v("medium"),u.value=a)},Y=a=>{const t=r.value.indexOf(a.id);t>-1?r.value.splice(t,1):r.value.length<10&&r.value.push(a.id)},z=a=>r.value.includes(a),G=()=>{v("light"),r.value=[],u.value=""},D=async()=>{if(k.value){v("heavy");try{const a=Math.random()<(g.value?.probability||0);l.value={won:a,multiplier:g.value?.multiplier,input_value:m.value,payout_value:a?L.value:0,risk_level:u.value},x.value=!0}catch(a){console.error("Failed to execute contract:",a)}}},H=()=>{x.value=!1,G(),T()},T=async()=>{try{w.value=!0;const a=await K({limit:20});c.value=a.gifts||[]}catch(a){console.error("Failed to load gifts:",a)}finally{w.value=!1}};return W(()=>{T()}),(a,t)=>(i(),o("div",Me,[e("div",Le,[e("button",{onClick:t[0]||(t[0]=d=>j(y).back()),class:"mb-4 text-gray-400 hover:text-white transition-colors flex items-center space-x-2"},[...t[2]||(t[2]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),e("span",null,"Back",-1)])]),t[3]||(t[3]=e("h1",{class:"text-3xl font-bold text-white mb-2"},"ðŸ”¥ Contracts",-1)),t[4]||(t[4]=e("p",{class:"text-gray-400 text-sm"},"Risk-based gift gambling â€¢ Provably Fair",-1))]),r.value.length>0?(i(),o("div",Ae,[e("div",Ge,[e("div",Te,[e("div",null,[t[5]||(t[5]=e("div",{class:"text-xs text-gray-400 mb-1"},"Selected Gifts",-1)),e("div",je,n(r.value.length)+" / 10",1)]),e("div",null,[t[7]||(t[7]=e("div",{class:"text-xs text-gray-400 mb-1"},"Total Value",-1)),e("div",Ne,[(i(),o("svg",Ie,[...t[6]||(t[6]=[e("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"},null,-1),e("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"},null,-1)])])),p(" "+n(m.value.toFixed(2)),1)])])]),e("div",Pe,[t[8]||(t[8]=e("span",{class:"text-xs text-gray-400"},"Tap gifts to select/deselect",-1)),r.value.length>0?(i(),o("button",{key:0,onClick:G,class:"text-xs text-red-400 hover:text-red-300 font-medium"}," Clear All ")):b("",!0)])])])):b("",!0),e("div",Ee,[t[9]||(t[9]=e("h2",{class:"text-lg font-semibold text-white mb-4"},"Select Risk Level",-1)),e("div",Ye,[(i(),o(C,null,R(f,d=>I(ne,{key:d.level,risk:d,selected:u.value===d.level,disabled:!A(d),onClick:B=>E(d.level)},null,8,["risk","selected","disabled","onClick"])),64))])]),u.value&&r.value.length>0?(i(),o("div",ze,[e("div",De,[e("div",He,[e("div",null,[t[11]||(t[11]=e("div",{class:"text-xs text-yellow-400 mb-1"},"Potential Payout",-1)),e("div",Ze,[(i(),o("svg",qe,[...t[10]||(t[10]=[e("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"},null,-1),e("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"},null,-1)])])),p(" "+n(L.value.toFixed(2)),1)])]),t[12]||(t[12]=e("div",{class:"text-5xl"},"ðŸ†",-1))]),e("div",Oe,n(g.value?(g.value.probability*100).toFixed(1):"0.0")+"% chance to win ",1)])])):b("",!0),e("div",We,[e("div",Je,[t[13]||(t[13]=e("h2",{class:"text-lg font-semibold text-white"},"Your Gifts",-1)),e("div",Ke,n(c.value.length)+" available",1)]),w.value?(i(),o("div",Qe,[(i(),o(C,null,R(6,d=>e("div",{key:d,class:"aspect-square bg-gray-800/50 rounded-xl animate-pulse"})),64))])):c.value.length>0?(i(),o("div",Ue,[(i(!0),o(C,null,R(c.value,d=>(i(),N(P,{key:d.id,gift:d,"is-selected":z(d.id),selectable:!0,onSelect:B=>Y(d)},null,8,["gift","is-selected","onSelect"]))),128))])):(i(),o("div",Xe,[t[14]||(t[14]=e("div",{class:"text-6xl mb-4"},"ðŸŽ",-1)),t[15]||(t[15]=e("h3",{class:"text-xl font-semibold mb-2 text-white"},"No Gifts Available",-1)),t[16]||(t[16]=e("p",{class:"text-gray-400 mb-6"},"You need to own some gifts to play Contracts",-1)),e("button",{onClick:t[1]||(t[1]=d=>j(y).push("/")),class:"px-6 py-3 bg-blue-600 rounded-xl font-medium hover:bg-blue-700 transition-colors"}," Browse Marketplace ")]))]),e("div",et,[e("button",{disabled:!k.value,class:_([k.value?"bg-gradient-to-r from-red-600 to-orange-600 hover:from-red-700 hover:to-orange-700":"bg-gray-700 cursor-not-allowed","w-full py-4 rounded-xl font-bold text-white transition-all transform active:scale-[0.98] disabled:opacity-50"]),onClick:D},[!k.value&&r.value.length<2?(i(),o("span",st," Select at least 2 gifts ")):!k.value&&!u.value?(i(),o("span",lt," Choose risk level ")):k.value?(i(),o("span",ot," ðŸ”¥ Execute Contract ")):(i(),o("span",it," Not enough value for "+n(u.value)+" mode ",1))],10,tt)]),x.value?(i(),N(Fe,{key:2,result:l.value,onClose:H},null,8,["result"])):b("",!0)]))}}),mt=M(at,[["__scopeId","data-v-c093fc42"]]);export{mt as default};
