import{d as Ne,H as Ve,o as qe,I as xe,G as ze,b as T,e as o,F as he,v as fe,t as I,x as se,J as ke,n as ne,k as Pe,K as He,y as Oe,r as M,c as Xe,a as A,E as Ye}from"./vue-CF-r4DcL.js";import{_ as Je}from"./index-hgAJBUmO.js";const Ke={class:"plinko-view"},je={class:"stars-bg"},Qe={class:"plinko-header"},Ze={class:"header-balance"},et={class:"balance-value"},tt={class:"game-info-bar"},at={class:"info-item"},ot={class:"info-value"},lt={class:"info-item"},st={class:"info-item"},nt={class:"result-multiplier"},it={class:"bet-section"},rt={class:"bet-amounts"},dt=["onClick","disabled"],ut={class:"action-row"},vt=["disabled"],ct=["disabled"],ht={key:0,class:"loading-spinner"},ft={key:1},gt=["disabled"],pt={class:"auto-play"},mt={class:"auto-label"},bt=["disabled"],yt={class:"history-section"},Mt={class:"history-header"},wt={class:"history-list"},Ct={class:"history-mult"},St={class:"history-amount"},m=7,Ie=.25,$e=.99,Te=.65,Ae=.4,ge=12,O=30,V=38,F=4,_t=.12,pe=.998,kt=Ne({__name:"PlinkoView",setup(Pt){const L=M(5.16),me=M(48291),P=M(!1),Q=M(!1),be=M(0),G=M(0),Z=M("medium"),q=M(12),Be=[.5,1,2,5,10],h=M(1),ee=M(!1),X=M(10),ie=M([]),$=M(null),ye=M(null);let d=380,B=500;const Re={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,.3,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,.3,.3,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},te=Xe(()=>{const e=Re[Z.value];return e[q.value]||e[12]});let a=null,Y=[],U=[],x=null,z=null,re=0,w=0,C=0,f=0,R="idle",de=0,J=28,ae=0,oe=4,K=80,Me=0;const ue=()=>{Y=[];const e=q.value;e<=8?(J=36,oe=5):e<=12?(J=28,oe=4):(J=22,oe=3.5),K=F+V+30,Me=B-36-10,ae=(Me-K)/(e-1);const s=d/2;for(let i=0;i<e;i++){const n=i+3,v=(n-1)*J,u=s-v/2;for(let g=0;g<n;g++)Y.push({x:u+g*J,y:K+i*ae,radius:oe,glowIntensity:0})}},we=(e,t,s,i)=>{for(let n=0;n<i;n++){const v=Math.random()*Math.PI*2,u=1+Math.random()*3;U.push({x:e,y:t,vx:Math.cos(v)*u,vy:Math.sin(v)*u,life:1,maxLife:15+Math.random()*15,color:s,size:1.5+Math.random()*2})}},Ce=()=>{for(let e=U.length-1;e>=0;e--){const t=U[e];t.x+=t.vx,t.y+=t.vy,t.vy+=.05,t.vx*=.97,t.life+=1,t.life>=t.maxLife&&U.splice(e,1)}},Ee=e=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),Fe=()=>{h.value=Math.max(.1,h.value/2)},Le=()=>{h.value=Math.min(L.value,h.value*2)},Se=async()=>{if(P.value||L.value<h.value)return;P.value=!0,Q.value=!1,L.value-=h.value,me.value++;const e=te.value,t=e.map(n=>1/(n+.1)),s=t.reduce((n,v)=>n+v,0);let i=Math.random()*s;re=Math.floor(e.length/2);for(let n=0;n<t.length;n++)if(i-=t[n],i<=0){re=n;break}ue(),z&&(cancelAnimationFrame(z),z=null),a={x:w,y:F+V-m,vx:0,vy:0,trail:[]},R="holding",de=0,U=[],le()},le=()=>{if(!a)return;const e=$.value;if(!e)return;const t=e.getContext("2d");if(!t)return;if(C+=f,f+=-.015*C,f*=pe,Math.abs(C)<.01&&Math.abs(f)<.001&&(f+=(Math.random()-.5)*.005),w=d/2+Math.sin(C)*d*.12,R==="holding"){a.x=w,a.y=F+V-m-2,de++,de>25&&(R="releasing",a.vx=f*d*.08,a.vy=.5),W(t),x=requestAnimationFrame(le);return}if(R==="releasing"){a.vy+=Ie*.8,a.x+=a.vx,a.y+=a.vy,a.y>F+V+15&&(R="falling"),W(t),x=requestAnimationFrame(le);return}a.vy+=Ie,a.vx*=$e,a.vy*=$e,a.x+=a.vx,a.y+=a.vy;const s=Math.sqrt(a.vx*a.vx+a.vy*a.vy);s>ge&&(a.vx=a.vx/s*ge,a.vy=a.vy/s*ge),a.trail.push({x:a.x,y:a.y,age:0}),a.trail.length>12&&a.trail.shift();for(const n of a.trail)n.age++;for(const n of Y){const v=a.x-n.x,u=a.y-n.y,g=v*v+u*u,k=n.radius+m,ce=k*k;if(g<ce&&g>.01){const E=Math.sqrt(g),D=v/E,c=u/E,N=k-E;a.x+=D*(N+.5),a.y+=c*(N+.5);const l=a.vx*D+a.vy*c;if(l<0){a.vx-=(1+Te)*l*D,a.vy-=(1+Te)*l*c;const _=(Math.random()-.5)*1.8;a.vx+=_;const H=a.y/B;if(H>.6){const j=te.value,We=d/j.length,De=((re+.5)*We-a.x)*.005*(H-.6);a.vx+=De}}n.glowIntensity=1;const r=Math.round((n.y-K)/ae)/q.value,b=Math.round(59+-45*r),y=Math.round(130+81*r),S=Math.round(246+-8*r);we(n.x,n.y,`rgb(${b},${y},${S})`,4)}}a.x<m+10&&(a.x=m+10,a.vx=Math.abs(a.vx)*Ae),a.x>d-m-10&&(a.x=d-m-10,a.vx=-Math.abs(a.vx)*Ae);for(const n of Y)n.glowIntensity>0&&(n.glowIntensity*=.9,n.glowIntensity<.01&&(n.glowIntensity=0));Ce(),W(t);const i=B-36;if(a.y>i){Ge();return}x=requestAnimationFrame(le)},Ge=()=>{if(!a)return;const e=te.value,t=d/e.length,s=Math.floor(a.x/t),i=Math.max(0,Math.min(e.length-1,s));be.value=e[i],G.value=h.value*e[i]-h.value,L.value+=h.value*e[i],ie.value.unshift({multiplier:e[i],win:G.value,bet:h.value});const n=(i+.5)*t,v=e[i]>=2?"#22c55e":e[i]>=1?"#3b82f6":"#ef4444";we(n,B-30,v,12),Q.value=!0,a=null,P.value=!1,R="idle";const u=()=>{const g=$.value;if(!g)return;const k=g.getContext("2d");k&&(C+=f,f+=-.015*C,f*=pe,w=d/2+Math.sin(C)*d*.12,Ce(),W(k),U.length>0?x=requestAnimationFrame(u):_e())};u(),setTimeout(()=>{Q.value=!1,ee.value&&X.value>0&&(X.value--,X.value>0&&L.value>=h.value&&Se())},1500)},W=e=>{const t=d,s=B;e.fillStyle="#0a0e1a",e.fillRect(0,0,t,s);const i=e.createRadialGradient(t/2,s*.3,0,t/2,s*.3,t*.8);i.addColorStop(0,"rgba(59, 130, 246, 0.04)"),i.addColorStop(1,"rgba(0, 0, 0, 0)"),e.fillStyle=i,e.fillRect(0,0,t,s);const n=w-O/2,v=F+V,u=e.createLinearGradient(n,0,n+O,0);u.addColorStop(0,"#1e3a5f"),u.addColorStop(.2,"#2563eb"),u.addColorStop(.5,"#3b82f6"),u.addColorStop(.8,"#2563eb"),u.addColorStop(1,"#1e3a5f"),e.fillStyle=u,e.beginPath(),e.roundRect(n,F,O,V,[6,6,4,4]),e.fill();const g=O*.55,k=e.createLinearGradient(w-g/2,0,w+g/2,0);k.addColorStop(0,"rgba(0,0,0,0.5)"),k.addColorStop(.5,"rgba(0,0,0,0.25)"),k.addColorStop(1,"rgba(0,0,0,0.5)"),e.fillStyle=k,e.fillRect(w-g/2,F+3,g,V-3),e.fillStyle="#2563eb",e.beginPath(),e.roundRect(n-3,v-6,O+6,6,[0,0,4,4]),e.fill(),e.strokeStyle="rgba(147, 197, 253, 0.4)",e.lineWidth=1,e.beginPath(),e.moveTo(n+4,F+3),e.lineTo(n+4,v-8),e.stroke(),(R==="holding"||R==="releasing")&&(e.save(),e.shadowColor="rgba(236, 72, 153, 0.6)",e.shadowBlur=15,e.fillStyle="rgba(236, 72, 153, 0.15)",e.beginPath(),e.ellipse(w,v,O*.6,6,0,0,Math.PI*2),e.fill(),e.restore());const ce=q.value;for(const l of Y){const p=Math.round((l.y-K)/ae),r=Math.min(1,p/(ce-1)),b=Math.round(59+-45*r),y=Math.round(130+81*r),S=Math.round(246+-8*r),_=`rgb(${b},${y},${S})`;l.glowIntensity>.01&&(e.save(),e.shadowColor=_,e.shadowBlur=12*l.glowIntensity,e.fillStyle=`rgba(${b},${y},${S},${.3*l.glowIntensity})`,e.beginPath(),e.arc(l.x,l.y,l.radius*3,0,Math.PI*2),e.fill(),e.restore()),e.save(),e.shadowColor=`rgba(${b},${y},${S},0.4)`,e.shadowBlur=4;const H=e.createRadialGradient(l.x-l.radius*.3,l.y-l.radius*.3,0,l.x,l.y,l.radius),j=l.glowIntensity>.1?1.5:1;H.addColorStop(0,`rgba(${Math.min(255,b*j+80)},${Math.min(255,y*j+80)},${Math.min(255,S*j+80)},1)`),H.addColorStop(1,_),e.fillStyle=H,e.beginPath(),e.arc(l.x,l.y,l.radius+l.glowIntensity*1.5,0,Math.PI*2),e.fill(),e.restore()}for(const l of U){const p=1-l.life/l.maxLife;e.fillStyle=l.color.replace("rgb","rgba").replace(")",`,${p*.8})`),e.beginPath(),e.arc(l.x,l.y,l.size*(1-l.life/l.maxLife*.5),0,Math.PI*2),e.fill()}if(a){for(let p=0;p<a.trail.length;p++){const r=a.trail[p],b=(1-p/a.trail.length)*.4,y=m*(.3+.7*(1-p/a.trail.length));e.fillStyle=`rgba(236, 72, 153, ${b})`,e.beginPath(),e.arc(r.x,r.y,y,0,Math.PI*2),e.fill()}e.save(),e.shadowColor="rgba(236, 72, 153, 0.7)",e.shadowBlur=18;const l=e.createRadialGradient(a.x-m*.3,a.y-m*.3,0,a.x,a.y,m);l.addColorStop(0,"#f9a8d4"),l.addColorStop(.4,"#ec4899"),l.addColorStop(1,"#be185d"),e.fillStyle=l,e.beginPath(),e.arc(a.x,a.y,m,0,Math.PI*2),e.fill(),e.restore(),e.fillStyle="rgba(255, 255, 255, 0.55)",e.beginPath(),e.arc(a.x-m*.25,a.y-m*.3,m*.35,0,Math.PI*2),e.fill()}const E=te.value,D=t/E.length,c=s-36,N=34;E.forEach((l,p)=>{const r=p*D+1,b=D-2;let y,S;l>=10?(y="rgba(34, 197, 94, 0.35)",S="#4ade80"):l>=2?(y="rgba(34, 211, 238, 0.25)",S="#22d3ee"):l>=1?(y="rgba(99, 102, 241, 0.2)",S="#a5b4fc"):(y="rgba(239, 68, 68, 0.25)",S="#f87171"),e.fillStyle=y,e.beginPath();const _=4;e.moveTo(r+_,c),e.lineTo(r+b-_,c),e.arcTo(r+b,c,r+b,c+_,_),e.lineTo(r+b,c+N),e.lineTo(r,c+N),e.lineTo(r,c+_),e.arcTo(r,c,r+_,c,_),e.fill(),e.fillStyle=S,e.font=`bold ${E.length>13?8:10}px -apple-system, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillText(`${l}x`,r+b/2,c+N/2)}),e.strokeStyle="rgba(255,255,255,0.06)",e.lineWidth=1;for(let l=1;l<E.length;l++){const p=l*D;e.beginPath(),e.moveTo(p,c),e.lineTo(p,c+N),e.stroke()}},ve=()=>{const e=$.value,t=ye.value;if(!e||!t)return;const s=t.clientWidth,i=window.devicePixelRatio||1;d=Math.min(s,500),B=Math.round(d*1.3),e.width=d*i,e.height=B*i,e.style.width=d+"px",e.style.height=B+"px";const n=e.getContext("2d");n&&n.scale(i,i),w=d/2,ue()},Ue=()=>{if(ue(),$.value){const e=$.value.getContext("2d");e&&W(e)}};Ve(Z,()=>{if($.value&&!a){const e=$.value.getContext("2d");e&&W(e)}});const _e=()=>{C=(Math.random()-.5)*_t,f=(Math.random()-.5)*.008,w=d/2;const e=()=>{const t=$.value;if(!t)return;const s=t.getContext("2d");s&&(C+=f,f+=-.015*C,f*=pe,Math.abs(C)<.01&&Math.abs(f)<.001&&(f+=(Math.random()-.5)*.004),w=d/2+Math.sin(C)*d*.12,W(s),z=requestAnimationFrame(e))};e()};return qe(async()=>{await xe(),ve(),_e(),window.addEventListener("resize",ve)}),ze(()=>{x&&cancelAnimationFrame(x),z&&cancelAnimationFrame(z),window.removeEventListener("resize",ve)}),(e,t)=>(A(),T("div",Ke,[o("div",je,[(A(),T(he,null,fe(20,s=>o("div",{key:s,class:"star",style:Ye(Ee())},null,4)),64))]),o("header",Qe,[o("button",{class:"header-back",onClick:t[0]||(t[0]=s=>e.$router.push("/solo"))},[...t[6]||(t[6]=[o("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[9]||(t[9]=o("div",{class:"header-title"},[o("span",{class:"title-main"},"Plinko"),o("span",{class:"title-badge"},"x1000")],-1)),o("div",Ze,[t[7]||(t[7]=o("span",{class:"balance-icon"},"ðŸ’Ž",-1)),o("span",et,I(L.value.toFixed(2)),1),t[8]||(t[8]=o("button",{class:"balance-add"},"+",-1))])]),o("div",tt,[o("div",at,[t[10]||(t[10]=o("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),o("span",ot,"#"+I(me.value),1)]),o("div",lt,[t[12]||(t[12]=o("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),se(o("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>Z.value=s),class:"risk-select"},[...t[11]||(t[11]=[o("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),o("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),o("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[ke,Z.value]])]),o("div",st,[t[14]||(t[14]=o("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),se(o("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>q.value=s),class:"rows-select",onChange:Ue},[...t[13]||(t[13]=[o("option",{value:8},"8",-1),o("option",{value:12},"12",-1),o("option",{value:16},"16",-1)])],544),[[ke,q.value]])])]),o("div",{class:"game-container",ref_key:"gameContainer",ref:ye},[o("canvas",{ref_key:"gameCanvas",ref:$,class:"game-canvas"},null,512),Q.value?(A(),T("div",{key:0,class:ne(["result-overlay",{win:G.value>0,lose:G.value<=0}])},[o("div",nt,I(be.value)+"x",1),o("div",{class:ne(["result-amount",{positive:G.value>0}])},I(G.value>0?"+":"")+I(G.value.toFixed(2))+" TON ",3)],2)):Pe("",!0)],512),o("div",it,[o("div",rt,[(A(),T(he,null,fe(Be,s=>o("button",{key:s,class:ne(["bet-btn",{active:h.value===s}]),onClick:i=>h.value=s,disabled:P.value},I(s)+" ðŸ’Ž ",11,dt)),64))]),o("div",ut,[o("button",{class:"btn-half",onClick:Fe,disabled:P.value},"Â½",8,vt),o("button",{class:"btn-play",onClick:Se,disabled:P.value||L.value<h.value},[P.value?(A(),T("span",ht)):(A(),T("span",ft,I(P.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${h.value} TON`),1))],8,ct),o("button",{class:"btn-double",onClick:Le,disabled:P.value},"2x",8,gt)]),o("div",pt,[o("label",mt,[se(o("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>ee.value=s),disabled:P.value},null,8,bt),[[He,ee.value]]),t[15]||(t[15]=o("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),ee.value?se((A(),T("input",{key:0,type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>X.value=s),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[Oe,X.value,void 0,{number:!0}]]):Pe("",!0)])]),o("div",yt,[o("div",Mt,[t[16]||(t[16]=o("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),o("span",{class:"history-clear",onClick:t[5]||(t[5]=s=>ie.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),o("div",wt,[(A(!0),T(he,null,fe(ie.value.slice(0,10),(s,i)=>(A(),T("div",{key:i,class:ne(["history-item",{win:s.win>0}])},[o("span",Ct,I(s.multiplier)+"x",1),o("span",St,I(s.win>0?"+":"")+I(s.win.toFixed(2)),1)],2))),128))])])]))}}),At=Je(kt,[["__scopeId","data-v-454c0764"]]);export{At as default};
