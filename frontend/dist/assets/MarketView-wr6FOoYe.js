import{d as Y,o as Z,b as i,e as t,F as x,j as _,x as V,y as F,t as r,n as g,z as L,A as tt,B as k,r as o,c as et,a,C as st,k as lt}from"./vue-Cjsr3efg.js";import{G as ot}from"./GiftCard-JamG1R68.js";import{u as at,_ as nt}from"./index-V1hJukyr.js";import{a as C}from"./index-D5GkNzM3.js";const it={class:"market-view"},rt={class:"market-nav"},dt=["onClick"],ut={class:"market-toolbar"},vt={class:"search-box"},ct={class:"sort-content"},ht={class:"sort-value"},pt={class:"view-modes"},gt={class:"sort-menu"},ft=["onClick"],mt={key:1,class:"loading-container"},bt={key:2,class:"gift-grid-container"},kt={key:0,class:"pagination"},wt={class:"page-controls"},yt=["disabled"],xt={class:"page-info"},_t={class:"current-page"},Ct={class:"total-pages"},Bt=["disabled"],Mt=["max"],St={key:2,class:"empty-state"},$t={class:"market-footer"},Tt={class:"footer-left"},Vt={class:"ton-price"},Ft={class:"price-value"},Lt={class:"volume-info"},Pt={class:"volume-value"},P="https://portal-market.com/api",B=50,zt=Y({__name:"MarketView",setup(At){const w=st(),{hapticImpact:u}=at(),z=[{id:"all",label:"–í—Å–µ –ø–æ–¥–∞—Ä–∫–∏"},{id:"collections",label:"–ö–æ–ª–ª–µ–∫—Ü–∏–∏"},{id:"bundles",label:"–ë–∞–Ω–¥–ª—ã"}],M=o("all"),f=o(!0),m=o([]),y=o(""),b=o("listed_at desc"),h=o("large"),p=o(!1),A=o(!1),G=o(!1),I=o(!1),v=o([]),n=o(1),c=o(50),N=o("1.33"),S=o("247.5K"),$=[{value:"listed_at desc",label:"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ"},{value:"listed_at asc",label:"–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ"},{value:"price asc",label:"–î–µ—à–µ–≤–ª–µ"},{value:"price desc",label:"–î–æ—Ä–æ–∂–µ"}],O=et(()=>$.find(l=>l.value===b.value)?.label||"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ"),H=l=>{u("light"),M.value=l,l==="collections"?w.push("/collection-list"):l==="bundles"&&w.push("/bundles")},j=l=>{u("light"),b.value=l,p.value=!1,d()};let T;const D=()=>{clearTimeout(T),T=setTimeout(()=>{d()},300)},K=()=>{n.value>1&&(n.value--,d())},R=()=>{n.value<c.value&&(n.value++,d())},d=async()=>{f.value=!0;try{const l=(n.value-1)*B,e=await C.get(`${P}/nfts/search`,{params:{offset:l,limit:B,sort_by:b.value,search:y.value||void 0,exclude_bundled:!0,status:"listed"}});m.value=e.data.nfts||[],e.data.total&&(c.value=Math.ceil(e.data.total/B))}catch(l){console.error("Fetch error:",l);try{const e=await C.get("https://major.tg/api/v1/nft/list/",{params:{order_by:"price_asc",limit:30,offset:0}});m.value=(e.data.items||[]).map(s=>({id:s.address,name:s.name,tg_id:s.slug,image_url:s.image,min_price_ton:s.min_bid,price:s.min_bid}))}catch(e){console.error("Fallback error:",e)}}finally{f.value=!1}},U=async()=>{try{const l=await C.get(`${P}/market/volume`);l.data&&(S.value=E(l.data.volume_24h||0))}catch{}},E=l=>l>=1e6?(l/1e6).toFixed(1)+"M":l>=1e3?(l/1e3).toFixed(1)+"K":l.toString(),Q=l=>{u("light"),w.push(`/gift/${l.id}`)},q=l=>{u("medium")},J=l=>{u("light");const e=v.value.indexOf(l.id);e>-1?v.value.splice(e,1):v.value.push(l.id)},W=()=>{u("heavy")};return Z(()=>{d(),U()}),(l,e)=>(a(),i("div",it,[t("nav",rt,[(a(),i(x,null,_(z,s=>t("button",{key:s.id,class:g(["nav-tab",{active:M.value===s.id}]),onClick:X=>H(s.id)},r(s.label),11,dt)),64))]),t("div",ut,[t("button",{class:"toolbar-btn filter-btn",onClick:e[0]||(e[0]=s=>A.value=!0)},[...e[8]||(e[8]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"})],-1),t("span",null,"–§–∏–ª—å—Ç—Ä—ã",-1)])]),t("div",vt,[e[9]||(e[9]=t("svg",{class:"search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"m21 21-4.35-4.35"})],-1)),V(t("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>y.value=s),type:"text",placeholder:"–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫",class:"search-input",onInput:D},null,544),[[F,y.value]])]),t("button",{class:"toolbar-btn sort-btn",onClick:e[2]||(e[2]=s=>p.value=!p.value)},[t("div",ct,[e[10]||(e[10]=t("span",{class:"sort-label"},"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ",-1)),t("span",ht,r(O.value),1)]),e[11]||(e[11]=t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m6 9 6 6 6-6"})],-1))]),t("button",{class:"toolbar-btn activity-btn",onClick:e[3]||(e[3]=s=>G.value=!0)},[...e[12]||(e[12]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})],-1),t("span",null,"–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",-1)])]),t("div",pt,[t("button",{class:g(["view-btn",{active:h.value==="small"}]),onClick:e[4]||(e[4]=s=>h.value="small")},[...e[13]||(e[13]=[L('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-41e78412><rect x="3" y="3" width="7" height="7" data-v-41e78412></rect><rect x="14" y="3" width="7" height="7" data-v-41e78412></rect><rect x="3" y="14" width="7" height="7" data-v-41e78412></rect><rect x="14" y="14" width="7" height="7" data-v-41e78412></rect></svg>',1)])],2),t("button",{class:g(["view-btn",{active:h.value==="large"}]),onClick:e[5]||(e[5]=s=>h.value="large")},[...e[14]||(e[14]=[L('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-41e78412><rect x="3" y="3" width="8" height="8" data-v-41e78412></rect><rect x="13" y="3" width="8" height="8" data-v-41e78412></rect><rect x="3" y="13" width="8" height="8" data-v-41e78412></rect><rect x="13" y="13" width="8" height="8" data-v-41e78412></rect></svg>',1)])],2)]),t("button",{class:"toolbar-btn refresh-btn",onClick:d},[...e[15]||(e[15]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M23 4v6h-6"}),t("path",{d:"M1 20v-6h6"}),t("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})],-1)])])]),p.value?(a(),i("div",{key:0,class:"sort-dropdown",onClick:e[6]||(e[6]=tt(s=>p.value=!1,["self"]))},[t("div",gt,[(a(),i(x,null,_($,s=>t("button",{key:s.value,class:g(["sort-option",{active:b.value===s.value}]),onClick:X=>j(s.value)},r(s.label),11,ft)),64))])])):k("",!0),f.value?(a(),i("div",mt,[...e[16]||(e[16]=[t("div",{class:"loading-spinner"},null,-1)])])):(a(),i("div",bt,[t("div",{class:g(["gift-grid",h.value])},[(a(!0),i(x,null,_(m.value,s=>(a(),lt(ot,{key:s.id,gift:s,selectable:I.value,"is-selected":v.value.includes(s.id),onClick:Q,onBuy:q,onSelect:J},null,8,["gift","selectable","is-selected"]))),128))],2),c.value>0?(a(),i("div",kt,[t("div",wt,[t("button",{class:"page-btn",disabled:n.value<=1,onClick:K},[...e[17]||(e[17]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m15 18-6-6 6-6"})],-1)])],8,yt),t("div",xt,[t("span",_t,r(n.value),1),e[18]||(e[18]=t("span",{class:"page-divider"},"/",-1)),t("span",Ct,r(c.value),1)]),t("button",{class:"page-btn",disabled:n.value>=c.value,onClick:R},[...e[19]||(e[19]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m9 18 6-6-6-6"})],-1)])],8,Bt)]),V(t("input",{type:"range",class:"page-slider",min:1,max:c.value,"onUpdate:modelValue":e[7]||(e[7]=s=>n.value=s),onChange:d},null,40,Mt),[[F,n.value,void 0,{number:!0}]])])):k("",!0),v.value.length>0?(a(),i("button",{key:1,class:"bulk-buy-btn",onClick:W},[e[20]||(e[20]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),t("path",{d:"M3 6h18"}),t("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),t("span",null,r(v.value.length),1)])):k("",!0),!f.value&&m.value.length===0?(a(),i("div",St,[...e[21]||(e[21]=[t("span",{class:"empty-icon"},"üéÅ",-1),t("p",{class:"empty-text"},"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏—Ñ—Ç–æ–≤",-1),t("p",{class:"empty-hint"},"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1)])])):k("",!0)])),t("footer",$t,[t("div",Tt,[t("div",Vt,[e[22]||(e[22]=t("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",class:"ton-logo"},null,-1)),t("span",Ft,r(N.value)+"$",1)]),t("div",Lt,[e[23]||(e[23]=t("span",{class:"volume-label"},"–û–±—â–∏–π –æ–±—ä–µ–º 24H",-1)),t("span",Pt,r(S.value),1),e[24]||(e[24]=t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",class:"volume-icon"},[t("path",{d:"M12 2L2 7l10 5 10-5-10-5z"})],-1))])]),e[25]||(e[25]=t("div",{class:"footer-right"},[t("button",{class:"footer-btn"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"),t("a",{href:"https://t.me/portals_sup",target:"_blank",class:"footer-btn"},"–ü–æ–¥–¥–µ—Ä–∂–∫–∞"),t("a",{href:"https://t.me/portals",target:"_blank",class:"footer-btn"},"Telegram")],-1))])]))}}),Ht=nt(zt,[["__scopeId","data-v-41e78412"]]);export{Ht as default};
