import{d as q,o as K,b as o,e as s,F as _,v as k,z as V,h as X,w as Y,E as P,t as a,k as y,f as c,j as O,A as $,u as f,B as L,c as m,r as i,g as ss,a as l,n as C}from"./vue-CF-r4DcL.js";import{_ as u}from"./stars-CI_OqwKa.js";import{u as ts,a as as,_ as es}from"./index-f1N1sTxI.js";import{e as ls}from"./client-COG1KRRB.js";const ns={class:"profile-view"},os={class:"stars-bg"},is={class:"user-card"},ds={class:"user-info"},rs={class:"user-name"},cs={class:"user-id"},vs={key:0,class:"user-badge vip"},us={class:"balance-card"},ps={class:"balance-row"},bs={class:"balance-item"},fs={class:"balance-info"},ms={class:"balance-value"},hs={class:"balance-item"},gs={class:"balance-info"},ws={class:"balance-value"},xs={class:"stats-section"},_s={class:"stats-grid"},ks={class:"stat-card"},ys={class:"stat-value"},Cs={class:"stat-card"},Ss={class:"stat-value"},Ms={class:"stat-card"},Ts={class:"stat-value"},Bs={class:"stat-card"},As={class:"stat-value"},Ns={class:"referral-section"},Vs={class:"referral-card"},Ps={class:"referral-stats"},Os={class:"ref-stat"},$s={class:"ref-value"},Ls={class:"ref-stat"},Ws={class:"ref-value"},Ds={class:"referral-link"},Fs=["value"],Is={class:"activity-section"},Es={key:0,class:"activity-list"},Hs={class:"activity-info"},Rs={class:"activity-title"},js={class:"activity-time"},Gs={key:1,class:"empty-activity"},zs={class:"menu-section"},Zs={class:"modal-content"},Us={class:"modal-body"},Js={key:0,class:"connect-wallet-section"},Qs=["disabled"],qs={key:1,class:"deposit-info"},Ks={class:"connected-wallet-info"},Xs={class:"value"},Ys={class:"modal-content"},st={class:"modal-body"},tt={class:"stars-packages"},at=["onClick"],et={class:"pkg-stars"},lt={class:"pkg-price"},nt=["disabled"],ot="linear-gradient(135deg, #3b82f6, #8b5cf6)",W="UQBxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",it=q({__name:"ProfileView",setup(dt){const{user:r,initWebApp:D}=ts(),v=as(),S=m(()=>r.value?.username||r.value?.first_name||"Player"),F=m(()=>String(r.value?.id||"")),I=m(()=>S.value.charAt(0).toUpperCase()),E=i(!1),H=i(0),M=i(0),p=i({totalGifts:0,gamesPlayed:0,wins:0,totalWon:0}),T=i({count:0,earned:0}),B=m(()=>`t.me/giftbot?start=ref${r.value?.id||""}`),h=i(!1),g=i(!1),d=i(null),b=i(!1),R=[{amount:50,priceRub:90},{amount:100,priceRub:180},{amount:250,priceRub:450},{amount:500,priceRub:900}],j=()=>{h.value=!0},A=()=>{h.value=!1},G=()=>{g.value=!0,d.value=null},w=()=>{g.value=!1,d.value=null},z=async()=>{try{await v.connect()}catch(n){console.error("Wallet connection failed:",n)}},Z=()=>{navigator.clipboard.writeText(W)},U=async()=>{if(d.value){b.value=!0;try{const n=await fetch("/api/v1/stars/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:r.value?.id,amount:d.value})});if(!n.ok)throw new Error("Failed to create invoice");const t=await n.json();window.Telegram?.WebApp?.openInvoice?window.Telegram.WebApp.openInvoice(t.invoice_url,x=>{x==="paid"&&(M.value+=d.value,w())}):window.open(t.invoice_url,"_blank")}catch(n){console.error("Stars purchase failed:",n)}finally{b.value=!1}}},N=i([]),J=n=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),Q=()=>{navigator.clipboard.writeText(B.value)};return K(async()=>{if(D(),await v.init("giftmarket_bot"),r.value?.id)try{const n=await ls(r.value.id);p.value.totalWon=parseFloat(n.total_rewards_earned_ton||"0")}catch{}}),(n,t)=>{const x=ss("router-link");return l(),o("div",ns,[s("div",os,[(l(),o(_,null,k(20,e=>s("div",{key:e,class:"star",style:P(J())},null,4)),64))]),t[37]||(t[37]=V('<header class="profile-header" data-v-fb9c56d0><div class="header-title" data-v-fb9c56d0>–ü—Ä–æ—Ñ–∏–ª—å</div><button class="settings-btn" data-v-fb9c56d0><svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fb9c56d0><circle cx="12" cy="12" r="3" data-v-fb9c56d0></circle><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z" data-v-fb9c56d0></path></svg></button></header>',1)),X(x,{to:"/stars",class:"stars-banner"},{default:Y(()=>[...t[1]||(t[1]=[s("div",{class:"banner-icon"},[s("img",{src:u,alt:"Stars",width:"40",height:"40"})],-1),s("div",{class:"banner-content"},[s("h3",null,"–ü–æ–∫—É–ø–∫–∞ Stars"),s("p",null,"Telegram Stars —Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π")],-1),s("div",{class:"banner-arrow"},[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M9 18l6-6-6-6"})])],-1)])]),_:1}),s("div",is,[s("div",{class:"user-avatar",style:P({background:ot})},[s("span",null,a(I.value),1)],4),s("div",ds,[s("h2",rs,"@"+a(S.value),1),s("span",cs,"ID: "+a(F.value),1)]),E.value?(l(),o("div",vs,[...t[2]||(t[2]=[s("img",{src:u,alt:"Stars",width:"12",height:"12",class:"vip-star-icon"},null,-1),s("span",null,"VIP",-1)])])):y("",!0)]),s("div",us,[s("div",ps,[s("div",bs,[t[4]||(t[4]=s("svg",{class:"balance-icon-svg",width:"24",height:"24",viewBox:"0 0 56 56",fill:"none"},[s("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),s("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),s("div",fs,[t[3]||(t[3]=s("span",{class:"balance-label"},"TON –ë–∞–ª–∞–Ω—Å",-1)),s("span",ms,a(H.value.toFixed(2))+" TON",1)])]),t[7]||(t[7]=s("div",{class:"balance-divider"},null,-1)),s("div",hs,[t[6]||(t[6]=s("img",{src:u,alt:"Stars",class:"balance-icon-img",width:"24",height:"24"},null,-1)),s("div",gs,[t[5]||(t[5]=s("span",{class:"balance-label"},"Stars",-1)),s("span",ws,a(M.value)+" Stars",1)])])]),s("div",{class:"balance-actions"},[s("button",{class:"btn-deposit",onClick:j},[...t[8]||(t[8]=[s("svg",{class:"btn-icon-svg",width:"14",height:"14",viewBox:"0 0 56 56",fill:"none"},[s("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),s("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1),c(" –ü–æ–ø–æ–ª–Ω–∏—Ç—å TON ",-1)])]),s("button",{class:"btn-stars",onClick:G},[...t[9]||(t[9]=[s("img",{src:u,alt:"Stars",class:"btn-icon-img",width:"14",height:"14"},null,-1),c(" –ö—É–ø–∏—Ç—å Stars ",-1)])]),t[10]||(t[10]=s("button",{class:"btn-withdraw"},[s("span",null,"‚Üì"),c(" –í—ã–≤–µ—Å—Ç–∏ ")],-1))])]),s("div",xs,[t[19]||(t[19]=s("h3",{class:"section-title"},"üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",-1)),s("div",_s,[s("div",ks,[t[11]||(t[11]=s("span",{class:"stat-icon"},"üéÅ",-1)),s("span",ys,a(p.value.totalGifts),1),t[12]||(t[12]=s("span",{class:"stat-label"},"–ì–∏—Ñ—Ç–æ–≤",-1))]),s("div",Cs,[t[13]||(t[13]=s("span",{class:"stat-icon"},"üéÆ",-1)),s("span",Ss,a(p.value.gamesPlayed),1),t[14]||(t[14]=s("span",{class:"stat-label"},"–ò–≥—Ä",-1))]),s("div",Ms,[t[15]||(t[15]=s("span",{class:"stat-icon"},"üèÜ",-1)),s("span",Ts,a(p.value.wins),1),t[16]||(t[16]=s("span",{class:"stat-label"},"–ü–æ–±–µ–¥",-1))]),s("div",Bs,[t[17]||(t[17]=s("span",{class:"stat-icon"},"üí∞",-1)),s("span",As,a(p.value.totalWon.toFixed(1)),1),t[18]||(t[18]=s("span",{class:"stat-label"},"TON –≤—ã–∏–≥—Ä–∞–Ω–æ",-1))])])]),s("div",Ns,[t[23]||(t[23]=s("div",{class:"referral-header"},[s("h3",{class:"section-title"},"üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞"),s("span",{class:"referral-bonus"},"+10%")],-1)),s("div",Vs,[s("div",Ps,[s("div",Os,[s("span",$s,a(T.value.count),1),t[20]||(t[20]=s("span",{class:"ref-label"},"–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ",-1))]),s("div",Ls,[s("span",Ws,a(T.value.earned.toFixed(2))+" TON",1),t[21]||(t[21]=s("span",{class:"ref-label"},"–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ",-1))])]),s("div",Ds,[s("input",{type:"text",value:B.value,readonly:"",class:"link-input"},null,8,Fs),s("button",{class:"copy-btn",onClick:Q}," üìã ")]),t[22]||(t[22]=s("button",{class:"btn-share"},[s("span",null,"üì§"),c(" –ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–∑–µ–π ")],-1))])]),s("div",Is,[t[25]||(t[25]=s("h3",{class:"section-title"},"üìú –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",-1)),N.value.length>0?(l(),o("div",Es,[(l(!0),o(_,null,k(N.value,e=>(l(),o("div",{key:e.id,class:"activity-item"},[s("div",{class:C(["activity-icon",e.type])},a(e.icon),3),s("div",Hs,[s("span",Rs,a(e.title),1),s("span",js,a(e.time),1)]),s("span",{class:C(["activity-amount",{positive:e.amount>0}])},a(e.amount>0?"+":"")+a(e.amount)+" TON ",3)]))),128))])):(l(),o("div",Gs,[...t[24]||(t[24]=[s("span",null,"–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",-1)])]))]),s("div",zs,[s("button",{class:"menu-item",onClick:t[0]||(t[0]=e=>n.$router.push("/inventory"))},[...t[26]||(t[26]=[s("span",{class:"menu-icon"},"üì¶",-1),s("span",{class:"menu-label"},"–ú–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å",-1),s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M9 18l6-6-6-6"})],-1)])]),t[27]||(t[27]=V('<button class="menu-item" data-v-fb9c56d0><span class="menu-icon" data-v-fb9c56d0>üìú</span><span class="menu-label" data-v-fb9c56d0>–ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</span><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fb9c56d0><path d="M9 18l6-6-6-6" data-v-fb9c56d0></path></svg></button><button class="menu-item" data-v-fb9c56d0><span class="menu-icon" data-v-fb9c56d0>üîî</span><span class="menu-label" data-v-fb9c56d0>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fb9c56d0><path d="M9 18l6-6-6-6" data-v-fb9c56d0></path></svg></button><button class="menu-item" data-v-fb9c56d0><span class="menu-icon" data-v-fb9c56d0>üõ°Ô∏è</span><span class="menu-label" data-v-fb9c56d0>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</span><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fb9c56d0><path d="M9 18l6-6-6-6" data-v-fb9c56d0></path></svg></button><button class="menu-item" data-v-fb9c56d0><span class="menu-icon" data-v-fb9c56d0>‚ùì</span><span class="menu-label" data-v-fb9c56d0>–ü–æ–º–æ—â—å</span><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-fb9c56d0><path d="M9 18l6-6-6-6" data-v-fb9c56d0></path></svg></button>',4))]),t[38]||(t[38]=s("div",{class:"version-info"},[s("span",null,"Gift Aggregator v1.0.0")],-1)),(l(),O(L,{to:"body"},[h.value?(l(),o("div",{key:0,class:"modal-overlay",onClick:$(A,["self"])},[s("div",Zs,[s("div",{class:"modal-header"},[t[28]||(t[28]=s("h3",{class:"modal-title-with-icon"},[s("svg",{width:"18",height:"18",viewBox:"0 0 56 56",fill:"none"},[s("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),s("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})]),c(" –ü–æ–ø–æ–ª–Ω–∏—Ç—å TON ")],-1)),s("button",{class:"modal-close",onClick:A},"√ó")]),s("div",Us,[f(v).isConnected.value?(l(),o("div",qs,[t[31]||(t[31]=s("p",{class:"modal-text"},"–û—Ç–ø—Ä–∞–≤—å—Ç–µ TON –Ω–∞ –∞–¥—Ä–µ—Å –ø—Ä–æ–µ–∫—Ç–∞:",-1)),s("div",{class:"wallet-address-box"},[s("span",{class:"wallet-address"},a(W)),s("button",{class:"copy-btn-sm",onClick:Z},"üìã")]),t[32]||(t[32]=s("p",{class:"modal-hint"},"–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏",-1)),s("div",Ks,[t[30]||(t[30]=s("span",{class:"label"},"–í–∞—à –∫–æ—à–µ–ª—ë–∫:",-1)),s("span",Xs,a(f(v).shortAddress.value),1)])])):(l(),o("div",Js,[t[29]||(t[29]=s("p",{class:"modal-text"},"–ü–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª—ë–∫ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∞–¥—Ä–µ—Å–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è",-1)),s("button",{class:"btn-connect-wallet",onClick:z,disabled:f(v).isConnecting.value},a(f(v).isConnecting.value?"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...":"üîó –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª—ë–∫"),9,Qs)]))])])])):y("",!0)])),(l(),O(L,{to:"body"},[g.value?(l(),o("div",{key:0,class:"modal-overlay",onClick:$(w,["self"])},[s("div",Ys,[s("div",{class:"modal-header"},[t[33]||(t[33]=s("h3",{class:"modal-title-with-icon"},[s("img",{src:u,alt:"Stars",width:"18",height:"18",class:"modal-title-icon"}),c(" –ö—É–ø–∏—Ç—å Stars ")],-1)),s("button",{class:"modal-close",onClick:w},"√ó")]),s("div",st,[t[35]||(t[35]=s("p",{class:"modal-text"},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Stars",-1)),s("div",tt,[(l(),o(_,null,k(R,e=>s("button",{key:e.amount,class:C(["stars-package",{selected:d.value===e.amount}]),onClick:rt=>d.value=e.amount},[s("span",et,[t[34]||(t[34]=s("img",{src:u,alt:"Stars",width:"14",height:"14",class:"pkg-star-icon"},null,-1)),c(" "+a(e.amount),1)]),s("span",lt,"‚âà "+a(e.priceRub)+" ‚ÇΩ",1)],10,at)),64))]),s("button",{class:"btn-buy-stars",onClick:U,disabled:!d.value||b.value},a(b.value?"–û–±—Ä–∞–±–æ—Ç–∫–∞...":"–ö—É–ø–∏—Ç—å Stars"),9,nt),t[36]||(t[36]=s("p",{class:"modal-hint"},"–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Telegram Stars",-1))])])])):y("",!0)]))])}}}),bt=es(it,[["__scopeId","data-v-fb9c56d0"]]);export{bt as default};
