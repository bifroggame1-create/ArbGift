import{_ as P}from"./stars-CI_OqwKa.js";import{m as F}from"./client-pJ2CWAUX.js";import{d as T,y as V,c as f,b as l,t as c,n as S,F as B,f as $,z as E,a as N,r as u,l as I,o as p,k as C,J as q,N as Z}from"./vue-DZ84P2GM.js";import{a as J}from"./index-oCPHr1cc.js";const U={class:"gonka-view min-h-screen flex flex-col",style:{background:"#000","padding-bottom":"16px"}},X={class:"game-header-bar"},K={class:"header-balance"},O={class:"balance-val"},Q={class:"flex justify-center gap-1 px-4 py-2"},W={class:"px-3 flex-1",style:{"max-height":"340px"}},Y={class:"grid grid-cols-3 gap-2 h-full"},ee={class:"text-white font-bold text-lg",style:{"text-shadow":"0 1px 3px rgba(0,0,0,0.5)"}},le={class:"text-white/50 text-xs mt-1.5"},te={key:0,class:"mx-3 rounded-xl overflow-hidden",style:{height:"180px",background:"#0d1525"}},ae={class:"px-3 py-3"},ie={class:"flex gap-2 mb-3"},re=["onClick"],se={class:"text-white/75 text-sm"},oe={class:"flex items-center gap-2"},ne=["disabled"],ce={class:"text-center mt-2"},de={class:"text-white/20 text-xs"},ue=T({__name:"GonkaView",setup(ge){const k=Z("gameCanvas"),g=u(4.16),j=[1,3,10,30,50],s=u(1),o=u(!1),h=u("lite"),y=u("5b18...bb33"),x=u(-1),A={lite:[{multiplier:2,balls:6,prize:"2",circleColor:"#ef4444",circleHighlight:"#f87171",bgColor:"rgba(239,68,68,0.12)"},{multiplier:1.7,balls:6,prize:"1.7",circleColor:"#f97316",circleHighlight:"#fb923c",bgColor:"rgba(249,115,22,0.12)"},{multiplier:1.5,balls:6,prize:"1.5",circleColor:"#eab308",circleHighlight:"#facc15",bgColor:"rgba(234,179,8,0.12)"},{multiplier:1.2,balls:8,prize:"1.2",circleColor:"#22c55e",circleHighlight:"#4ade80",bgColor:"rgba(34,197,94,0.12)"},{multiplier:1,balls:12,prize:"1",circleColor:"#16a34a",circleHighlight:"#4ade80",bgColor:"rgba(22,163,74,0.12)"},{multiplier:.8,balls:12,prize:"0.8",circleColor:"#15803d",circleHighlight:"#22c55e",bgColor:"rgba(21,128,61,0.12)"},{multiplier:.5,balls:11,prize:"0.5",circleColor:"#166534",circleHighlight:"#16a34a",bgColor:"rgba(22,101,52,0.12)"},{multiplier:.3,balls:11,prize:"0.3",circleColor:"#14532d",circleHighlight:"#166534",bgColor:"rgba(20,83,45,0.12)"},{multiplier:.1,balls:28,prize:"0.1",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.15)"}],hard:[{multiplier:3,balls:4,prize:"3",circleColor:"#dc2626",circleHighlight:"#ef4444",bgColor:"rgba(220,38,38,0.12)"},{multiplier:2.5,balls:4,prize:"2.5",circleColor:"#ea580c",circleHighlight:"#f97316",bgColor:"rgba(234,88,12,0.12)"},{multiplier:2,balls:4,prize:"2",circleColor:"#ca8a04",circleHighlight:"#eab308",bgColor:"rgba(202,138,4,0.12)"},{multiplier:1.5,balls:6,prize:"1.5",circleColor:"#16a34a",circleHighlight:"#4ade80",bgColor:"rgba(22,163,74,0.12)"},{multiplier:1,balls:10,prize:"1",circleColor:"#15803d",circleHighlight:"#22c55e",bgColor:"rgba(21,128,61,0.12)"},{multiplier:.5,balls:14,prize:"0.5",circleColor:"#166534",circleHighlight:"#16a34a",bgColor:"rgba(22,101,52,0.12)"},{multiplier:.3,balls:18,prize:"0.3",circleColor:"#14532d",circleHighlight:"#166534",bgColor:"rgba(20,83,45,0.12)"},{multiplier:.1,balls:24,prize:"0.1",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.15)"},{multiplier:.05,balls:40,prize:"0.05",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.18)"}]},m=I(()=>A[h.value]);function _(i){o.value||(h.value=i)}function G(i){o.value||(s.value=i)}function H(){return Math.random().toString(36).substring(2,6)+"..."+Math.random().toString(36).substring(2,6)}let z=Date.now(),v=null,b=[];async function R(){if(o.value||g.value<s.value)return;o.value=!0,g.value-=s.value,x.value=-1;let i=4;try{z++;const r=await F({amount:s.value,mode:h.value,client_seed:H(),nonce:z,user_id:"anonymous"});i=r.cell_index,y.value=r.server_seed_hash}catch{const r=m.value,w=r.reduce((d,L)=>d+L.balls,0);let t=Math.random()*w;for(let d=0;d<r.length;d++)if(t-=r[d].balls,t<=0){i=d;break}y.value=H()}await new Promise(r=>setTimeout(r,50)),b=[];const e=m.value[i].balls;for(let r=0;r<Math.min(e,8);r++)b.push({x:60+Math.random()*240,y:-10-r*20,vx:(Math.random()-.5)*2,vy:1+Math.random()*.5});const a=Date.now(),n=2e3;function M(){const r=Date.now()-a,w=Math.min(r/n,1);if(b.forEach(t=>{t.vy+=.15,t.y+=t.vy,t.x+=t.vx,t.x<15&&(t.x=15,t.vx=Math.abs(t.vx)*.8),t.x>345&&(t.x=345,t.vx=-Math.abs(t.vx)*.8),t.y>165&&(t.y=165,t.vy=-t.vy*.6,t.vx+=(Math.random()-.5)*1)}),D(),w<1)v=requestAnimationFrame(M);else{x.value=i;const t=m.value[i].multiplier;g.value+=s.value*t,setTimeout(()=>{o.value=!1,x.value=-1,b=[]},1500)}}v=requestAnimationFrame(M)}function D(){const i=k.value;if(!i)return;const e=i.getContext("2d");if(!e)return;e.clearRect(0,0,360,180),e.fillStyle="#0d1525",e.fillRect(0,0,360,180);const a=e.createLinearGradient(0,0,0,180);a.addColorStop(0,"#1e3a5f"),a.addColorStop(1,"#0f2d4a"),e.fillStyle=a,e.fillRect(0,0,12,180),e.fillRect(348,0,12,180),e.fillStyle="#1a2a3a",e.fillRect(12,170,336,10),b.forEach(n=>{e.shadowColor="rgba(34, 211, 238, 0.5)",e.shadowBlur=6,e.fillStyle="#22d3ee",e.beginPath(),e.arc(n.x,n.y,6,0,Math.PI*2),e.fill(),e.shadowBlur=0})}return V(()=>{v&&cancelAnimationFrame(v)}),(i,e)=>(p(),f("div",U,[l("header",X,[l("button",{class:"header-back",onClick:e[0]||(e[0]=a=>i.$router.push("/solo"))},[...e[3]||(e[3]=[l("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[l("path",{d:"M15 18l-6-6 6-6"})],-1)])]),e[6]||(e[6]=l("div",{class:"header-title"},[l("span",{class:"title-main"},"Gonka"),l("span",{class:"title-badge",style:{background:"#22c55e"}},"x30")],-1)),l("div",K,[e[4]||(e[4]=l("svg",{width:"16",height:"16",viewBox:"0 0 56 56",fill:"none"},[l("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),l("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),l("span",O,c(g.value.toFixed(2)),1),e[5]||(e[5]=l("button",{class:"balance-plus"},"+",-1))])]),l("div",Q,[l("button",{onClick:e[1]||(e[1]=a=>_("lite")),class:S(["px-6 py-1.5 rounded-full text-sm font-bold transition-all",h.value==="lite"?"bg-white text-black":"bg-white/10 text-white/60"])},"Lite",2),l("button",{onClick:e[2]||(e[2]=a=>_("hard")),class:S(["px-6 py-1.5 rounded-full text-sm font-bold transition-all flex items-center gap-1",h.value==="hard"?"bg-white text-black":"bg-white/10 text-white/60"])},"ðŸ’€ Hard",2)]),l("div",W,[l("div",Y,[(p(!0),f(B,null,$(m.value,(a,n)=>(p(),f("div",{key:n,class:"relative rounded-xl flex flex-col items-center justify-center transition-all",style:C({background:a.bgColor,boxShadow:x.value===n?`0 0 16px ${a.circleColor}66`:"none"})},[l("div",{class:"absolute top-1.5 right-1.5 text-xs font-bold flex items-center gap-0.5",style:C({color:a.circleColor})},[q(" +"+c(a.prize)+" ",1),e[7]||(e[7]=l("svg",{width:"10",height:"10",viewBox:"0 0 56 56",fill:"none"},[l("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),l("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1))],4),l("div",{class:"w-14 h-14 rounded-full flex items-center justify-center",style:C({background:`radial-gradient(circle at 35% 35%, ${a.circleHighlight}, ${a.circleColor})`})},[l("span",ee," X"+c(a.multiplier),1)],4),l("div",le,c(a.balls)+" Balls",1)],4))),128))])]),o.value?(p(),f("div",te,[l("canvas",{ref_key:"gameCanvas",ref:k,class:"w-full h-full",width:360,height:180},null,512)])):E("",!0),l("div",ae,[l("div",ie,[(p(),f(B,null,$(j,a=>l("button",{key:a,onClick:n=>G(a),class:"flex-1 py-2 rounded-lg font-bold flex items-center justify-center gap-1 transition-all",style:C(s.value===a?{background:"rgba(34,211,238,0.2)",border:"1px solid rgba(34,211,238,0.4)"}:{background:"rgba(255,255,255,0.06)",border:"1px solid transparent"})},[l("span",se,c(a),1),e[8]||(e[8]=l("span",{class:"text-white/30 text-xs"},"â–¼",-1))],12,re)),64))]),l("div",oe,[e[9]||(e[9]=N('<button class="flex flex-col items-center gap-0.5" data-v-9f11b122><div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background:rgba(255,255,255,0.06);" data-v-9f11b122><div class="w-5 h-5 rounded-full flex items-center justify-center" style="background:#3b82f6;" data-v-9f11b122><span class="text-white text-xs font-bold" data-v-9f11b122>â–¼</span></div></div><span class="text-white/35 text-xs flex items-center gap-0.5" data-v-9f11b122>Swap <img src="'+P+'" alt="Stars" width="10" height="10" class="object-contain" data-v-9f11b122></span></button>',1)),l("button",{onClick:R,disabled:o.value||g.value<s.value,class:"flex-1 py-3 rounded-xl font-bold text-sm text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #22d3ee, #06b6d4)"}},c(o.value?"Playing...":`Play â–¼ ${s.value}`),9,ne),e[10]||(e[10]=l("button",{class:"flex flex-col items-center gap-0.5"},[l("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white/50 text-lg",style:{background:"rgba(255,255,255,0.10)"}},"+"),l("span",{class:"text-white/35 text-xs"},"Deposit")],-1))]),l("div",ce,[l("span",de,"â± Hash: "+c(y.value),1)])])]))}}),xe=J(ue,[["__scopeId","data-v-9f11b122"]]);export{xe as default};
