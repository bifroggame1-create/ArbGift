import{f as E,h as H,a as o,b as t,t as s,d as f,w as p,i as u,n as I,j as h,F as W,k as N,l as U,m as j,u as d,p as D,T as S,c as x,r as c,e as G,o as l}from"./vue-DjRH996n.js";import{u as P,a as Z}from"./index-BywgN1VJ.js";import{u as $}from"./useTonConnect-BmYHwTNH.js";import{s as O}from"./client-BllIIJUg.js";import"./index-D5GkNzM3.js";const R={class:"mb-profile"},z={class:"mb-balance-section"},Y={class:"mb-balance-row"},J={class:"mb-balance-value"},Q={class:"mb-actions-row"},q={class:"mb-user-section"},K={class:"mb-user-row"},X={class:"mb-user-info"},tt={class:"mb-username"},et={class:"mb-card mb-inventory-card"},st={class:"mb-inventory-header"},at={class:"mb-inventory-meta"},lt={class:"mb-inventory-count"},it={class:"mb-inventory-value"},ot={width:"12",height:"12",viewBox:"0 0 56 56",fill:"none",style:{"vertical-align":"middle","margin-left":"2px"}},nt={class:"mb-inventory-grid"},rt={class:"mb-inventory-empty"},dt={class:"mb-card mb-claim-card"},ct={class:"mb-claim-header"},vt={class:"mb-claim-amounts"},mt={class:"mb-claim-value"},bt={class:"mb-claim-stats"},ft={class:"mb-claim-stat"},pt={class:"mb-claim-stat-value"},ut={class:"mb-claim-stat"},ht={class:"mb-claim-stat-value"},xt=["disabled"],wt={class:"mb-modal-content"},gt={class:"mb-modal-body"},yt={key:0,class:"mb-connect-section"},kt=["disabled"],Ct={key:1,class:"mb-deposit-info"},_t={class:"mb-wallet-info"},Lt={class:"mb-wallet-value"},Bt="linear-gradient(135deg, #3b82f6, #8b5cf6)",C="UQBxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",Mt=E({__name:"ProfileView",setup(Tt){const{user:n,initWebApp:_}=P(),i=$(),w=x(()=>n.value?.username||n.value?.first_name||"Player"),L=x(()=>w.value.charAt(0).toUpperCase()),B=c(0),v=c({totalGifts:0,gamesPlayed:0,wins:0,totalWon:0}),r=c({count:0,earned:0}),g=x(()=>`t.me/giftbot?start=ref${n.value?.id||""}`),m=c(!1),M=()=>{m.value=!0},y=()=>{m.value=!1},T=async()=>{try{await i.connect()}catch(a){console.error("Wallet connection failed:",a)}},A=()=>{navigator.clipboard.writeText(C)},F=()=>{navigator.clipboard.writeText(g.value)},V=()=>{const e=`https://t.me/share/url?url=${encodeURIComponent(g.value)}&text=${encodeURIComponent("Join me and play! Use my referral link:")}`;window.Telegram?.WebApp?.openTelegramLink?window.Telegram.WebApp.openTelegramLink(e):window.open(e,"_blank")};return H(async()=>{if(_(),await i.init("giftmarket_bot"),n.value?.id)try{const a=await O(n.value.id);v.value.totalWon=parseFloat(a.total_rewards_earned_ton||"0")}catch{}}),(a,e)=>{const b=G("router-link");return l(),o("div",R,[e[26]||(e[26]=t("div",{class:"mb-gradient-header"},null,-1)),t("div",z,[e[2]||(e[2]=t("span",{class:"mb-balance-label"},"Play Balance",-1)),t("div",Y,[t("span",J,s(B.value.toFixed(2)),1),e[1]||(e[1]=t("svg",{class:"mb-ton-icon",width:"28",height:"28",viewBox:"0 0 56 56",fill:"none"},[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1))])]),t("div",Q,[f(b,{to:"/stars",class:"mb-action-item",style:{"text-decoration":"none",color:"inherit"}},{default:p(()=>[...e[3]||(e[3]=[t("div",{class:"mb-action-circle"},[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[t("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:"#FFCE4F",stroke:"#FFCE4F","stroke-width":"1"})])],-1),t("span",{class:"mb-action-label"},"Top Up Stars",-1)])]),_:1}),t("button",{class:"mb-action-item",onClick:M},[...e[4]||(e[4]=[u('<div class="mb-action-circle" data-v-f99e8feb><svg width="24" height="24" viewBox="0 0 56 56" fill="none" data-v-f99e8feb><circle cx="28" cy="28" r="28" fill="#0098EA" data-v-f99e8feb></circle><path d="M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z" fill="white" data-v-f99e8feb></path></svg></div><span class="mb-action-label" data-v-f99e8feb>Top Up TON</span>',2)])]),t("button",{class:"mb-action-item",onClick:e[0]||(e[0]=k=>a.$router.push("/inventory"))},[...e[5]||(e[5]=[u('<div class="mb-action-circle" data-v-f99e8feb><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" data-v-f99e8feb><rect x="3" y="8" width="18" height="13" rx="2" data-v-f99e8feb></rect><path d="M16 8V6a4 4 0 0 0-8 0v2" data-v-f99e8feb></path><path d="M12 14v2" data-v-f99e8feb></path><circle cx="12" cy="14" r="1" data-v-f99e8feb></circle></svg></div><span class="mb-action-label" data-v-f99e8feb>Deposit Gifts</span>',2)])])]),t("div",q,[t("div",K,[t("div",{class:"mb-user-avatar",style:I({background:Bt})},[t("span",null,s(L.value),1)],4),t("div",X,[t("span",tt,"@"+s(w.value),1)]),e[6]||(e[6]=t("button",{class:"mb-settings-btn"},[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.5)","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("circle",{cx:"12",cy:"12",r:"3"}),t("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})])],-1))])]),t("div",et,[t("div",st,[e[8]||(e[8]=t("span",{class:"mb-inventory-title"},"My Inventory",-1)),t("div",at,[t("span",lt,s(v.value.totalGifts)+" Items",1),t("span",it,[h(s(v.value.totalWon.toFixed(1))+" ",1),(l(),o("svg",ot,[...e[7]||(e[7]=[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"},null,-1),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"},null,-1)])]))])])]),t("div",nt,[(l(),o(W,null,N(3,k=>t("div",{class:"mb-inventory-placeholder",key:k},[...e[9]||(e[9]=[t("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"rgba(255,255,255,0.15)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"3",y:"8",width:"18",height:"13",rx:"2"}),t("path",{d:"M16 8V6a4 4 0 0 0-8 0v2"})],-1)])])),64))]),f(b,{to:"/inventory",class:"mb-inventory-link"},{default:p(()=>[...e[10]||(e[10]=[t("span",null,"All Items",-1),t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 18l6-6-6-6"})],-1)])]),_:1}),t("div",rt,[e[12]||(e[12]=t("span",{class:"mb-empty-text"},"You have no items yet.",-1)),f(b,{to:"/inventory",class:"mb-deposit-link"},{default:p(()=>[...e[11]||(e[11]=[h(" Deposit Gift ",-1),t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M9 18l6-6-6-6"})],-1)])]),_:1})])]),t("div",{class:"mb-card mb-referral-card"},[e[14]||(e[14]=u('<div class="mb-referral-content" data-v-f99e8feb><div class="mb-referral-text-block" data-v-f99e8feb><p class="mb-referral-description" data-v-f99e8feb> Invite referrals to earn <span class="mb-referral-badge" data-v-f99e8feb>10%</span> of their game fees </p></div><div class="mb-referral-illustration" data-v-f99e8feb><svg width="72" height="72" viewBox="0 0 80 80" fill="none" data-v-f99e8feb><circle cx="40" cy="32" r="16" fill="#22C55E" opacity="0.3" data-v-f99e8feb></circle><circle cx="40" cy="32" r="10" fill="#22C55E" opacity="0.6" data-v-f99e8feb></circle><circle cx="40" cy="28" r="8" fill="#22C55E" data-v-f99e8feb></circle><rect x="32" y="40" width="16" height="20" rx="4" fill="#22C55E" opacity="0.8" data-v-f99e8feb></rect><circle cx="60" cy="28" r="6" fill="#4ADE80" opacity="0.5" data-v-f99e8feb></circle><rect x="57" y="22" width="6" height="1.5" rx="0.75" fill="#fff" opacity="0.8" data-v-f99e8feb></rect><rect x="59.25" y="19.75" width="1.5" height="6" rx="0.75" fill="#fff" opacity="0.8" data-v-f99e8feb></rect></svg></div></div>',1)),t("div",{class:"mb-referral-actions"},[t("button",{class:"mb-btn-invite",onClick:V}," Invite Friends "),t("button",{class:"mb-btn-copy",onClick:F},[...e[13]||(e[13]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})],-1)])])])]),t("div",dt,[t("div",ct,[e[16]||(e[16]=t("svg",{class:"mb-claim-ton-icon",width:"32",height:"32",viewBox:"0 0 56 56",fill:"none"},[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),t("div",vt,[t("span",mt,s(r.value.earned.toFixed(2))+" TON",1),e[15]||(e[15]=t("span",{class:"mb-claim-label"},"Claimable amount",-1))])]),t("div",bt,[t("div",ft,[t("span",pt,s(r.value.count),1),e[17]||(e[17]=t("span",{class:"mb-claim-stat-label"},"Invited users",-1))]),t("div",ut,[t("span",ht,s(r.value.earned.toFixed(2)),1),e[18]||(e[18]=t("span",{class:"mb-claim-stat-label"},"Total claimed amount",-1))])]),t("button",{class:"mb-btn-claim",disabled:r.value.earned<=0}," Claim ",8,xt)]),e[27]||(e[27]=t("div",{class:"mb-bottom-spacer"},null,-1)),(l(),U(S,{to:"body"},[m.value?(l(),o("div",{key:0,class:"mb-modal-overlay",onClick:j(y,["self"])},[t("div",wt,[t("div",{class:"mb-modal-header"},[e[20]||(e[20]=t("h3",{class:"mb-modal-title"},[t("svg",{width:"18",height:"18",viewBox:"0 0 56 56",fill:"none"},[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})]),h(" Top Up TON ")],-1)),t("button",{class:"mb-modal-close",onClick:y},[...e[19]||(e[19]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2.5"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),t("div",gt,[d(i).isConnected.value?(l(),o("div",Ct,[e[24]||(e[24]=t("p",{class:"mb-modal-text"},"Send TON to the project address:",-1)),t("div",{class:"mb-address-box"},[t("span",{class:"mb-address"},s(C)),t("button",{class:"mb-btn-copy-sm",onClick:A},[...e[22]||(e[22]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),t("path",{d:"M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"})],-1)])])]),e[25]||(e[25]=t("p",{class:"mb-modal-hint"},"Balance will update automatically after transfer",-1)),t("div",_t,[e[23]||(e[23]=t("span",{class:"mb-wallet-label"},"Your wallet:",-1)),t("span",Lt,s(d(i).shortAddress.value),1)])])):(l(),o("div",yt,[e[21]||(e[21]=t("p",{class:"mb-modal-text"},"Connect wallet to see deposit address",-1)),t("button",{class:"mb-btn-connect",onClick:T,disabled:d(i).isConnecting.value},s(d(i).isConnecting.value?"Connecting...":"Connect Wallet"),9,kt)]))])])])):D("",!0)]))])}}}),It=Z(Mt,[["__scopeId","data-v-f99e8feb"]]);export{It as default};
