import{d as vt,H as ct,o as ht,D as ft,b as p,e as s,F as N,v as q,t as b,x as X,I as et,n as G,k as lt,J as pt,y as bt,r as c,c as mt,a as m,C as yt}from"./vue-BOYL0bd5.js";import{_ as gt}from"./index-D8trkbWD.js";const _t={class:"plinko-view"},Mt={class:"stars-bg"},wt={class:"plinko-header"},Ct={class:"header-balance"},kt={class:"balance-value"},St={class:"game-info-bar"},xt={class:"info-item"},Pt={class:"info-value"},Bt={class:"info-item"},$t={class:"info-item"},At={class:"game-container"},It={class:"result-multiplier"},Tt={class:"multipliers-row"},Ut={class:"bet-section"},Ft={class:"bet-amounts"},Gt=["onClick","disabled"],Rt={class:"action-row"},Vt=["disabled"],Dt=["disabled"],Et={key:0,class:"loading-spinner"},Wt={key:1},Yt=["disabled"],Ht={class:"auto-play"},Lt={class:"auto-label"},Nt=["disabled"],qt={class:"history-section"},Xt={class:"history-header"},Ot={class:"history-list"},zt={class:"history-mult"},Jt={class:"history-amount"},f=340,k=280,st=5,M=6,jt=.15,O=.6,Kt=800,R=28,B=35,at=0,Qt=vt({__name:"PlinkoView",setup(Zt){const w=c(5.16),Q=c(48291),y=c(!1),V=c(!1),Z=c(0),C=c(0),D=c("medium"),S=c(12),ot=[.5,1,2,5,10],d=c(1),E=c(!1),$=c(10),z=c([]),x=c(null),nt={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},A=mt(()=>{const t=nt[D.value];return t[S.value]||t[12]});let g="in_tube",J=0,e=null,I=[],T=null,j=0,W=0;const it=t=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),rt=t=>t>=10?"high":t>=2?"medium":t>=1?"low":"lose",ut=()=>{d.value=Math.max(.1,d.value/2)},dt=()=>{d.value=Math.min(w.value,d.value*2)},K=()=>{I=[];const t=S.value,l=B+15,o=(k-45-l)/t,i=f/2;for(let v=0;v<t;v++){const r=v+3,_=22,n=i-(r-1)*_/2;for(let u=0;u<r;u++)I.push({x:n+u*_,y:l+v*o})}},tt=async()=>{if(y.value||w.value<d.value)return;y.value=!0,V.value=!1,w.value-=d.value,Q.value++;const t=A.value,l=t.map(i=>1/(i+.1)),a=l.reduce((i,v)=>i+v,0);let o=Math.random()*a;j=Math.floor(t.length/2);for(let i=0;i<l.length;i++)if(o-=l[i],o<=0){j=i;break}e={x:f/2,y:8,vx:0,vy:0},W=0,g="in_tube",J=0,K(),Y()},Y=()=>{if(!e)return;const t=x.value;if(!t)return;const l=t.getContext("2d");if(!l)return;if(W++,g==="in_tube"){J++,J>30&&(g="dropping",e.vy=.5,e.vx=(Math.random()-.5)*.5),U(l),T=requestAnimationFrame(Y);return}if(g==="dropping"){e.vy+=.08,e.y+=e.vy,e.y>B+10&&(g="falling"),U(l),T=requestAnimationFrame(Y);return}W>Kt&&(e.y=k-25,e.vy=0),e.vy+=jt,e.x+=e.vx,e.y+=e.vy;const a=8;e.vx=Math.max(-a,Math.min(a,e.vx)),e.vy=Math.max(-a,Math.min(a,e.vy));for(const o of I){const i=e.x-o.x,v=e.y-o.y,r=Math.sqrt(i*i+v*v),_=st+M;if(r<_&&r>.1){const n=i/r,u=v/r,P=_-r+.5;e.x+=n*P,e.y+=u*P;const h=e.vx*n+e.vy*u;if(h<0&&(e.vx-=2*h*n*O*1.2,e.vy-=2*h*u*O*.8,e.vx*=.95,e.vy*=.95),e.vx+=(Math.random()-.5)*1,e.y>k*.6){const H=A.value,F=f/H.length,L=j*F+F/2;e.vx+=(L-e.x)*.003}e.vy<.5&&(e.vy=.8)}}if(e.x<M&&(e.x=M,e.vx=Math.abs(e.vx)*O),e.x>f-M&&(e.x=f-M,e.vx=-Math.abs(e.vx)*O),U(l),e.y>k-30){const o=A.value,i=f/o.length,v=Math.floor(e.x/i),r=Math.max(0,Math.min(o.length-1,v));Z.value=o[r],C.value=d.value*o[r]-d.value,w.value+=d.value*o[r],z.value.unshift({multiplier:o[r],win:C.value,bet:d.value}),V.value=!0,e=null,y.value=!1,setTimeout(()=>{V.value=!1,E.value&&$.value>0&&($.value--,$.value>0&&w.value>=d.value&&tt())},1500);return}T=requestAnimationFrame(Y)},U=t=>{t.fillStyle="#0a1628",t.fillRect(0,0,f,k);const l=f/2-R/2,a=t.createLinearGradient(l,0,l+R,0);a.addColorStop(0,"#374151"),a.addColorStop(.3,"#4b5563"),a.addColorStop(.7,"#4b5563"),a.addColorStop(1,"#374151"),t.fillStyle=a,t.beginPath(),t.roundRect(l,at,R,B,[0,0,8,8]),t.fill();const o=t.createLinearGradient(l+4,0,l+R-4,0);o.addColorStop(0,"rgba(0,0,0,0.4)"),o.addColorStop(.5,"rgba(0,0,0,0.1)"),o.addColorStop(1,"rgba(0,0,0,0.4)"),t.fillStyle=o,t.fillRect(l+3,at,R-6,B-4),(g==="dropping"||g==="in_tube")&&(t.shadowColor="rgba(236, 72, 153, 0.5)",t.shadowBlur=10,t.fillStyle="rgba(236, 72, 153, 0.2)",t.beginPath(),t.ellipse(f/2,B,12,4,0,0,Math.PI*2),t.fill(),t.shadowBlur=0);const i=S.value;for(let n=0;n<I.length;n++){const u=I[n],h=Math.floor((-3+Math.sqrt(9+8*n))/2)/i,H=Math.round(59+-25*h),F=Math.round(130+81*h),L=Math.round(246+-8*h);t.fillStyle=`rgb(${H},${F},${L})`,t.shadowColor=`rgba(${H},${F},${L},0.5)`,t.shadowBlur=6,t.beginPath(),t.arc(u.x,u.y,st,0,Math.PI*2),t.fill()}if(t.shadowBlur=0,e){let n=e.y;g==="in_tube"&&(n=B-4,e.x=f/2+Math.sin(W*.15)*2);{t.shadowColor="rgba(236, 72, 153, 0.8)",t.shadowBlur=15;const u=t.createRadialGradient(e.x-2,n-2,0,e.x,n,M);u.addColorStop(0,"#f472b6"),u.addColorStop(.5,"#ec4899"),u.addColorStop(1,"#be185d"),t.fillStyle=u,t.beginPath(),t.arc(e.x,n,M,0,Math.PI*2),t.fill(),t.shadowBlur=0,t.fillStyle="rgba(255, 255, 255, 0.5)",t.beginPath(),t.arc(e.x-2,n-2,M*.35,0,Math.PI*2),t.fill()}}const v=A.value,r=f/v.length,_=k-28;v.forEach((n,u)=>{const P=u*r;let h="rgba(99,102,241,0.3)";n>=10?h="rgba(34,197,94,0.4)":n>=2?h="rgba(34,211,238,0.3)":n<1&&(h="rgba(239,68,68,0.3)"),t.fillStyle=h,t.fillRect(P+1,_,r-2,26),t.fillStyle="#fff",t.font="bold 9px sans-serif",t.textAlign="center",t.fillText(`${n}x`,P+r/2,_+16)})};return ct([D,S],()=>{if(K(),x.value){const t=x.value.getContext("2d");t&&U(t)}}),ht(()=>{if(K(),x.value){const t=x.value.getContext("2d");t&&U(t)}}),ft(()=>{T&&cancelAnimationFrame(T)}),(t,l)=>(m(),p("div",_t,[s("div",Mt,[(m(),p(N,null,q(20,a=>s("div",{key:a,class:"star",style:yt(it())},null,4)),64))]),s("header",wt,[s("button",{class:"header-back",onClick:l[0]||(l[0]=a=>t.$router.push("/solo"))},[...l[6]||(l[6]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M15 18l-6-6 6-6"})],-1)])]),l[9]||(l[9]=s("div",{class:"header-title"},[s("span",{class:"title-main"},"Plinko"),s("span",{class:"title-badge"},"x1000")],-1)),s("div",Ct,[l[7]||(l[7]=s("span",{class:"balance-icon"},"ðŸ’Ž",-1)),s("span",kt,b(w.value.toFixed(2)),1),l[8]||(l[8]=s("button",{class:"balance-add"},"+",-1))])]),s("div",St,[s("div",xt,[l[10]||(l[10]=s("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),s("span",Pt,"#"+b(Q.value),1)]),s("div",Bt,[l[12]||(l[12]=s("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),X(s("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>D.value=a),class:"risk-select"},[...l[11]||(l[11]=[s("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),s("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),s("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[et,D.value]])]),s("div",$t,[l[14]||(l[14]=s("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),X(s("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>S.value=a),class:"rows-select"},[...l[13]||(l[13]=[s("option",{value:8},"8",-1),s("option",{value:12},"12",-1),s("option",{value:16},"16",-1)])],512),[[et,S.value]])])]),s("div",At,[s("canvas",{ref_key:"gameCanvas",ref:x,class:"game-canvas",width:f,height:k},null,512),V.value?(m(),p("div",{key:0,class:G(["result-overlay",{win:C.value>0,lose:C.value<=0}])},[s("div",It,b(Z.value)+"x",1),s("div",{class:G(["result-amount",{positive:C.value>0}])},b(C.value>0?"+":"")+b(C.value.toFixed(2))+" TON ",3)],2)):lt("",!0)]),s("div",Tt,[(m(!0),p(N,null,q(A.value,(a,o)=>(m(),p("div",{key:o,class:G(["mult-slot",rt(a)])},b(a)+"x ",3))),128))]),s("div",Ut,[s("div",Ft,[(m(),p(N,null,q(ot,a=>s("button",{key:a,class:G(["bet-btn",{active:d.value===a}]),onClick:o=>d.value=a,disabled:y.value},b(a)+" ðŸ’Ž ",11,Gt)),64))]),s("div",Rt,[s("button",{class:"btn-half",onClick:ut,disabled:y.value},"Â½",8,Vt),s("button",{class:"btn-play",onClick:tt,disabled:y.value||w.value<d.value},[y.value?(m(),p("span",Et)):(m(),p("span",Wt,b(y.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${d.value} TON`),1))],8,Dt),s("button",{class:"btn-double",onClick:dt,disabled:y.value},"2x",8,Yt)]),s("div",Ht,[s("label",Lt,[X(s("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=a=>E.value=a),disabled:y.value},null,8,Nt),[[pt,E.value]]),l[15]||(l[15]=s("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),E.value?X((m(),p("input",{key:0,type:"number","onUpdate:modelValue":l[4]||(l[4]=a=>$.value=a),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[bt,$.value,void 0,{number:!0}]]):lt("",!0)])]),s("div",qt,[s("div",Xt,[l[16]||(l[16]=s("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),s("span",{class:"history-clear",onClick:l[5]||(l[5]=a=>z.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),s("div",Ot,[(m(!0),p(N,null,q(z.value.slice(0,10),(a,o)=>(m(),p("div",{key:o,class:G(["history-item",{win:a.win>0}])},[s("span",zt,b(a.multiplier)+"x",1),s("span",Jt,b(a.win>0?"+":"")+b(a.win.toFixed(2)),1)],2))),128))])])]))}}),le=gt(Qt,[["__scopeId","data-v-6a12f94f"]]);export{le as default};
