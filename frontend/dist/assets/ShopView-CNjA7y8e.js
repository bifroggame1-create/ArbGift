import{d as z,o as I,b as n,e as s,F as p,v as g,t as i,k as r,n as h,z as R,j as D,A as E,E as f,B as H,r as d,a as t,f as A}from"./vue-CF-r4DcL.js";import{a as j,_ as K}from"./index-BNLjFMtA.js";import{g as q,c as J}from"./client-COG1KRRB.js";const Q={class:"shop-view"},U={class:"stars-bg"},W={class:"shop-header"},X={class:"header-balance"},Y={class:"balance-value"},Z={class:"shop-tabs"},ss=["onClick"],es={class:"tab-icon"},as={class:"tab-label"},ts={key:0,class:"featured-banner"},ns={key:1,class:"gifts-section"},is={class:"section-header"},os={class:"header-actions"},ls=["disabled"],rs={key:0,class:"loading-state"},ds={key:1,class:"error-state"},cs={key:2,class:"gifts-grid"},us=["onClick"],vs=["src","alt"],ps={key:0,class:"discount-badge"},gs={class:"gift-info"},ms={class:"gift-name"},_s={class:"gift-price-row"},hs={class:"gift-price"},fs={key:0,class:"original-price"},ks={key:0,class:"listings-badge"},bs={key:2,class:"lootpacks-section"},ys={class:"lootpacks-grid"},ws=["onClick"],xs={class:"pack-icon"},Cs={class:"pack-info"},Ms={class:"pack-name"},$s={class:"pack-contains"},Ts={class:"pack-price"},Gs={class:"price-value"},Bs={class:"pack-chance"},Vs={key:3,class:"upgrades-section"},Ns={class:"upgrade-info-card"},Fs={key:4,class:"extras-section"},Ls={class:"extras-grid"},Os={class:"extra-icon"},Ps={class:"extra-info"},Ss={class:"extra-name"},zs={class:"extra-desc"},Is={class:"btn-buy-extra"},Rs={class:"purchase-modal"},Ds={class:"modal-header"},Es={class:"modal-gift-preview"},Hs=["src","alt"],As={class:"preview-info"},js={class:"preview-name"},Ks={class:"listings-section"},qs={class:"listings-header"},Js={class:"listings-count"},Qs={key:0,class:"listings-loading"},Us={key:1,class:"no-listings"},Ws={key:2,class:"listings-list"},Xs=["onClick"],Ys={class:"listing-market"},Zs={key:0,class:"best-price-badge"},se={class:"listing-price"},ee={class:"price-ton"},ae=z({__name:"ShopView",setup(te){const{init:$}=j(),T=d(0),u=d("gifts"),v=d(!1),c=d(null),l=d([]),m=d(!1),b=d(!1),k=d(null),G=[{id:"gifts",label:"Ğ“Ğ¸Ñ„Ñ‚Ñ‹",icon:"ğŸ"},{id:"lootpacks",label:"Ğ›ÑƒÑ‚Ğ¿Ğ°ĞºĞ¸",icon:"ğŸ“¦"},{id:"upgrades",label:"ĞĞ¿Ğ³Ñ€ĞµĞ¹Ğ´Ñ‹",icon:"â¬†ï¸"},{id:"extras",label:"ĞĞ¸ÑˆÑ‚ÑĞºĞ¸",icon:"âœ¨"}],w=d([]),y={getgems:{name:"GetGems",color:"#00a2ff"},tonnel:{name:"Tonnel",color:"#8b5cf6"},mrkt:{name:"MRKT",color:"#22c55e"},fragment:{name:"Fragment",color:"#f59e0b"}},B=o=>o>=10?"legendary":o>=3?"epic":o>=.5?"rare":"common",x=async()=>{m.value=!0,k.value=null;try{const o=await q({is_on_sale:!0,sort:"price_asc",limit:50});w.value=(o.items||o).map(e=>{const a=e.min_price_ton?parseFloat(e.min_price_ton):e.price||0;return{id:e.id,address:e.address,name:e.name,image:e.image_url||"/gifts/default.webp",price:a,rarity:e.rarity||B(a),bgGradient:`linear-gradient(135deg, ${e.backdrop||"#1a1a2e"}, #16213e)`,listingsCount:e.listings_count||0,bestMarket:void 0}})}catch(o){k.value=o.message||"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ Ğ³Ğ¸Ñ„Ñ‚Ñ‹",console.error("Gifts fetch error:",o)}finally{m.value=!1}},V=async o=>{b.value=!0;try{const e=await J(o);l.value=e||[]}catch(e){console.error("Listings fetch error:",e),l.value=[]}finally{b.value=!1}};I(async()=>{await $(),x()});const N=d([{id:1,name:"Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹",icon:"ğŸ“¦",contains:3,price:.5,maxMultiplier:5,gradient:"linear-gradient(135deg, #1e3a8a, #3b82f6)"},{id:2,name:"ĞŸÑ€Ğ¾",icon:"ğŸ’",contains:5,price:2,maxMultiplier:10,gradient:"linear-gradient(135deg, #7c3aed, #a855f7)"},{id:3,name:"Ğ­Ğ»Ğ¸Ñ‚Ğ½Ñ‹Ğ¹",icon:"ğŸ‘‘",contains:10,price:5,maxMultiplier:50,gradient:"linear-gradient(135deg, #d97706, #f59e0b)"}]),F=d([{id:1,name:"VIP Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ",icon:"â­",description:"7 Ğ´Ğ½ĞµĞ¹ VIP Ğ¿Ñ€Ğ¸Ğ²Ğ¸Ğ»ĞµĞ³Ğ¸Ğ¹",price:1},{id:2,name:"Ğ‘Ğ¾Ğ½ÑƒÑ ÑƒĞ´Ğ°Ñ‡Ğ¸",icon:"ğŸ€",description:"+10% Ğº ÑˆĞ°Ğ½ÑÑƒ Ğ²Ñ‹Ğ¸Ğ³Ñ€Ñ‹ÑˆĞ°",price:.5},{id:3,name:"ĞšÑÑˆĞ±ÑĞº",icon:"ğŸ’°",description:"5% Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚ Ñ Ğ¿Ñ€Ğ¾Ğ¸Ğ³Ñ€Ñ‹ÑˆĞµĞ¹",price:2}]),L=o=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),O=async o=>{c.value=o,l.value=[],v.value=!0,await V(o.id)},P=o=>{},C=o=>{window.open(o.listing_url,"_blank")},S=()=>{if(c.value){if(l.value.length>0){const o=l.value.reduce((e,a)=>parseFloat(e.price_ton)<parseFloat(a.price_ton)?e:a);C(o)}v.value=!1}},M=()=>{x()};return(o,e)=>(t(),n("div",Q,[s("div",U,[(t(),n(p,null,g(20,a=>s("div",{key:a,class:"star",style:f(L())},null,4)),64))]),s("header",W,[e[6]||(e[6]=s("div",{class:"header-title"},[s("h1",null,"ĞœĞ°Ğ³Ğ°Ğ·Ğ¸Ğ½"),s("span",{class:"shop-subtitle"},"Ğ“Ğ¸Ñ„Ñ‚Ñ‹ Ğ¸ Ğ»ÑƒÑ‚Ğ±Ğ¾ĞºÑÑ‹")],-1)),s("div",X,[e[5]||(e[5]=s("span",{class:"balance-icon"},"ğŸ’",-1)),s("span",Y,i(T.value.toFixed(2)),1),s("button",{class:"balance-add",onClick:e[0]||(e[0]=a=>o.$router.push("/topup"))},"+")])]),s("div",Z,[(t(),n(p,null,g(G,a=>s("button",{key:a.id,class:h(["tab-btn",{active:u.value===a.id}]),onClick:_=>u.value=a.id},[s("span",es,i(a.icon),1),s("span",as,i(a.label),1)],10,ss)),64))]),u.value==="gifts"?(t(),n("div",ts,[...e[7]||(e[7]=[s("div",{class:"banner-content"},[s("span",{class:"banner-badge"},"ğŸ”¥ HOT"),s("h3",null,"ĞĞ¾Ğ²Ğ°Ñ ĞºĞ¾Ğ»Ğ»ĞµĞºÑ†Ğ¸Ñ"),s("p",null,"Ğ­ĞºÑĞºĞ»ÑĞ·Ğ¸Ğ²Ğ½Ñ‹Ğµ Ğ³Ğ¸Ñ„Ñ‚Ñ‹ Valentine's")],-1),s("div",{class:"banner-gift"},"ğŸ",-1)])])):r("",!0),u.value==="gifts"?(t(),n("div",ns,[s("div",is,[e[10]||(e[10]=s("h2",null,"ğŸ’ TON Ğ“Ğ¸Ñ„Ñ‚Ñ‹",-1)),s("div",os,[s("button",{class:"refresh-btn",onClick:M,disabled:m.value},[(t(),n("svg",{class:h({rotating:m.value}),width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[...e[8]||(e[8]=[s("path",{d:"M23 4v6h-6M1 20v-6h6"},null,-1),s("path",{d:"M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"},null,-1)])],2))],8,ls),e[9]||(e[9]=s("button",{class:"filter-btn"},[s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"})])],-1))])]),m.value?(t(),n("div",rs,[...e[11]||(e[11]=[s("div",{class:"loading-spinner"},null,-1),s("span",null,"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ³Ğ¸Ñ„Ñ‚Ğ¾Ğ²...",-1)])])):k.value?(t(),n("div",ds,[e[12]||(e[12]=s("span",{class:"error-icon"},"âš ï¸",-1)),s("span",null,i(k.value),1),s("button",{class:"btn-retry",onClick:M},"ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‚ÑŒ")])):(t(),n("div",cs,[(t(!0),n(p,null,g(w.value,a=>(t(),n("div",{key:a.id,class:"gift-card",onClick:_=>O(a)},[s("div",{class:"gift-image",style:f({background:a.bgGradient})},[s("img",{src:a.image,alt:a.name},null,8,vs),a.discount?(t(),n("div",ps,"-"+i(a.discount)+"%",1)):r("",!0)],4),s("div",gs,[s("span",ms,i(a.name),1),s("div",_s,[s("span",hs,[e[13]||(e[13]=s("span",{class:"price-icon"},"ğŸ’",-1)),A(" "+i(a.price)+" TON ",1)]),a.originalPrice?(t(),n("span",fs,i(a.originalPrice),1)):r("",!0)])]),s("div",{class:h(["gift-rarity",a.rarity])},i(a.rarity),3),a.listingsCount>1?(t(),n("div",ks,i(a.listingsCount)+" Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹ ",1)):r("",!0)],8,us))),128))]))])):r("",!0),u.value==="lootpacks"?(t(),n("div",bs,[e[16]||(e[16]=s("div",{class:"section-header"},[s("h2",null,"ğŸ“¦ Ğ›ÑƒÑ‚Ğ¿Ğ°ĞºĞ¸")],-1)),s("div",ys,[(t(!0),n(p,null,g(N.value,a=>(t(),n("div",{key:a.id,class:"lootpack-card",style:f({background:a.gradient}),onClick:_=>P()},[e[15]||(e[15]=s("div",{class:"pack-glow"},null,-1)),s("div",xs,i(a.icon),1),s("div",Cs,[s("span",Ms,i(a.name),1),s("span",$s,i(a.contains)+" Ğ³Ğ¸Ñ„Ñ‚Ğ¾Ğ²",1)]),s("div",Ts,[s("span",Gs,i(a.price),1),e[14]||(e[14]=s("span",{class:"price-currency"},"TON",-1))]),s("div",Bs,[s("span",null,"Ğ¨Ğ°Ğ½Ñ x"+i(a.maxMultiplier),1)])],12,ws))),128))])])):r("",!0),u.value==="upgrades"?(t(),n("div",Vs,[e[19]||(e[19]=s("div",{class:"section-header"},[s("h2",null,"â¬†ï¸ ĞĞ¿Ğ³Ñ€ĞµĞ¹Ğ´Ñ‹")],-1)),s("div",Ns,[e[17]||(e[17]=s("div",{class:"upgrade-icon"},"ğŸ°",-1)),e[18]||(e[18]=s("div",{class:"upgrade-text"},[s("h3",null,"ĞĞ¿Ğ³Ñ€ĞµĞ¹Ğ´ Ğ³Ğ¸Ñ„Ñ‚Ğ¾Ğ²"),s("p",null,"ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½Ğ¸Ñ‚Ğµ 2 Ğ³Ğ¸Ñ„Ñ‚Ğ° Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚Ğµ ÑˆĞ°Ğ½Ñ Ğ½Ğ° Ğ±Ğ¾Ğ»ĞµĞµ Ñ†ĞµĞ½Ğ½Ñ‹Ğ¹!")],-1)),s("button",{class:"btn-upgrade",onClick:e[1]||(e[1]=a=>o.$router.push("/upgrade"))}," ĞŸĞ¾Ğ¿Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ ")]),e[20]||(e[20]=R('<div class="upgrades-list" data-v-7c6f4066><div class="upgrade-item" data-v-7c6f4066><div class="upgrade-from" data-v-7c6f4066><span class="from-icon" data-v-7c6f4066>ğŸ</span><span data-v-7c6f4066>2x Common</span></div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2" data-v-7c6f4066><path d="M5 12h14M12 5l7 7-7 7" data-v-7c6f4066></path></svg><div class="upgrade-to" data-v-7c6f4066><span class="to-icon" data-v-7c6f4066>ğŸ’</span><span data-v-7c6f4066>1x Rare</span></div><span class="upgrade-chance" data-v-7c6f4066>45%</span></div><div class="upgrade-item" data-v-7c6f4066><div class="upgrade-from" data-v-7c6f4066><span class="from-icon" data-v-7c6f4066>ğŸ’</span><span data-v-7c6f4066>2x Rare</span></div><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2" data-v-7c6f4066><path d="M5 12h14M12 5l7 7-7 7" data-v-7c6f4066></path></svg><div class="upgrade-to" data-v-7c6f4066><span class="to-icon" data-v-7c6f4066>ğŸ‘‘</span><span data-v-7c6f4066>1x Epic</span></div><span class="upgrade-chance" data-v-7c6f4066>30%</span></div></div>',1))])):r("",!0),u.value==="extras"?(t(),n("div",Fs,[e[21]||(e[21]=s("div",{class:"section-header"},[s("h2",null,"âœ¨ ĞĞ¸ÑˆÑ‚ÑĞºĞ¸")],-1)),s("div",Ls,[(t(!0),n(p,null,g(F.value,a=>(t(),n("div",{class:"extra-card",key:a.id},[s("div",Os,i(a.icon),1),s("div",Ps,[s("span",Ss,i(a.name),1),s("span",zs,i(a.description),1)]),s("button",Is,i(a.price)+" TON ",1)]))),128))])])):r("",!0),(t(),D(H,{to:"body"},[v.value?(t(),n("div",{key:0,class:"modal-overlay",onClick:e[4]||(e[4]=E(a=>v.value=!1,["self"]))},[s("div",Rs,[e[26]||(e[26]=s("div",{class:"modal-handle"},null,-1)),s("div",Ds,[s("h3",null,"ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ "+i(c.value?.name),1),s("button",{class:"modal-close",onClick:e[2]||(e[2]=a=>v.value=!1)},"Ã—")]),s("div",Es,[s("div",{class:"preview-image",style:f({background:c.value?.bgGradient})},[s("img",{src:c.value?.image,alt:c.value?.name},null,8,Hs)],4),s("div",As,[s("span",js,i(c.value?.name),1),s("span",{class:h(["preview-rarity",c.value?.rarity])},i(c.value?.rarity),3)])]),s("div",Ks,[s("div",qs,[e[22]||(e[22]=s("span",{class:"listings-title"},"ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ Ğ½Ğ° Ğ¼Ğ°Ñ€ĞºĞµÑ‚Ğ°Ñ…",-1)),s("span",Js,i(l.value.length)+" Ğ»Ğ¸ÑÑ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²",1)]),b.value?(t(),n("div",Qs,[...e[23]||(e[23]=[s("div",{class:"mini-spinner"},null,-1),s("span",null,"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿Ñ€ĞµĞ´Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¹...",-1)])])):l.value.length===0?(t(),n("div",Us,[...e[24]||(e[24]=[s("span",null,"ĞĞµÑ‚ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ… Ğ»Ğ¸ÑÑ‚Ğ¸Ğ½Ğ³Ğ¾Ğ²",-1)])])):(t(),n("div",Ws,[(t(!0),n(p,null,g(l.value,(a,_)=>(t(),n("div",{key:a.id,class:h(["listing-item",{best:_===0}]),onClick:ne=>C(a)},[s("div",Ys,[s("span",{class:"market-badge",style:f({background:y[a.market_slug]?.color||"#6b7280"})},i(y[a.market_slug]?.name||a.market_name),5),_===0?(t(),n("span",Zs,"Ğ›ÑƒÑ‡ÑˆĞ°Ñ Ñ†ĞµĞ½Ğ°")):r("",!0)]),s("div",se,[s("span",ee,i(a.price_ton)+" TON",1),e[25]||(e[25]=s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"}),s("polyline",{points:"15 3 21 3 21 9"}),s("line",{x1:"10",y1:"14",x2:"21",y2:"3"})],-1))])],10,Xs))),128))]))]),l.value.length>0?(t(),n("button",{key:0,class:"btn-confirm-purchase",onClick:S}," ĞšÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ·Ğ° "+i(l.value[0]?.price_ton)+" TON Ğ½Ğ° "+i(y[l.value[0]?.market_slug]?.name||l.value[0]?.market_name),1)):r("",!0),s("button",{class:"btn-cancel",onClick:e[3]||(e[3]=a=>v.value=!1)}," Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ ")])])):r("",!0)]))]))}}),re=K(ae,[["__scopeId","data-v-7c6f4066"]]);export{re as default};
