import{d as ht,G as ft,o as pt,D as bt,b,e as s,F as q,v as H,t as m,x as X,I as et,n as R,k as lt,J as mt,y as yt,r as c,c as gt,a as y,C as _t}from"./vue-En_qHaif.js";import{_ as Mt}from"./index-CboS_LLL.js";const wt={class:"plinko-view"},Ct={class:"stars-bg"},kt={class:"plinko-header"},St={class:"header-balance"},xt={class:"balance-value"},Pt={class:"game-info-bar"},Bt={class:"info-item"},$t={class:"info-value"},At={class:"info-item"},It={class:"info-item"},Tt={class:"game-container"},Gt={class:"result-multiplier"},Ut={class:"multipliers-row"},Ft={class:"bet-section"},Rt={class:"bet-amounts"},Vt=["onClick","disabled"],Dt={class:"action-row"},Et=["disabled"],Wt=["disabled"],Yt={key:0,class:"loading-spinner"},Lt={key:1},Nt=["disabled"],qt={class:"auto-play"},Ht={class:"auto-label"},Xt=["disabled"],Ot={class:"history-section"},zt={class:"history-header"},Jt={class:"history-list"},jt={class:"history-mult"},Kt={class:"history-amount"},f=340,S=280,st=5,M=6,at=.15,O=.6,Qt=800,V=28,$=35,ot=0,Zt=ht({__name:"PlinkoView",setup(te){const w=c(5.16),Q=c(48291),g=c(!1),D=c(!1),Z=c(0),C=c(0),E=c("medium"),x=c(12),nt=[.5,1,2,5,10],d=c(1),W=c(!1),A=c(10),z=c([]),P=c(null),it={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},I=gt(()=>{const t=it[E.value];return t[x.value]||t[12]});let _="in_tube",J=0,e=null,T=[],G=null,j=0,Y=0;const rt=t=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),ut=t=>t>=10?"high":t>=2?"medium":t>=1?"low":"lose",dt=()=>{d.value=Math.max(.1,d.value/2)},vt=()=>{d.value=Math.min(w.value,d.value*2)},K=()=>{T=[];const t=x.value,l=$+40,i=(S-45-l)/t,o=f/2;for(let v=0;v<t;v++){const h=v+3,u=22,n=o-(h-1)*u/2;for(let r=0;r<h;r++)T.push({x:n+r*u,y:l+v*i})}},tt=async()=>{if(g.value||w.value<d.value)return;g.value=!0,D.value=!1,w.value-=d.value,Q.value++;const t=I.value,l=t.map(o=>1/(o+.1)),a=l.reduce((o,v)=>o+v,0);let i=Math.random()*a;j=Math.floor(t.length/2);for(let o=0;o<l.length;o++)if(i-=l[o],i<=0){j=o;break}e={x:f/2,y:8,vx:0,vy:0},Y=0,_="in_tube",J=0,K(),L()},L=()=>{if(!e)return;const t=P.value;if(!t)return;const l=t.getContext("2d");if(!l)return;if(Y++,_==="in_tube"){J++,J>30&&(_="dropping",e.vy=.5,e.vx=(Math.random()-.5)*.5),U(l),G=requestAnimationFrame(L);return}if(_==="dropping"){e.vy+=.12,e.y+=e.vy,e.y>$+25&&(_="falling",e.vy=Math.max(e.vy,2.5),e.vx=(Math.random()-.5)*2),U(l),G=requestAnimationFrame(L);return}Y>Qt&&(e.y=S-25,e.vy=0),e.vy+=at,e.x+=e.vx,e.y+=e.vy;const a=8;e.vx=Math.max(-a,Math.min(a,e.vx)),e.vy=Math.max(-a,Math.min(a,e.vy)),e.vy<.3&&(e.vy=.3+at);let i=!1;for(const o of T){if(i)break;const v=e.x-o.x,h=e.y-o.y,u=Math.sqrt(v*v+h*h),n=st+M;if(u<n&&u>.1){i=!0;const r=v/u,k=h/u,p=n-u+1;e.x+=r*p,e.y+=k*p,e.y<o.y&&(e.y=o.y+n+1);const B=e.vx*r+e.vy*k;if(B<0&&(e.vx-=2*B*r*O*1.2,e.vy-=2*B*k*O*.8,e.vx*=.95,e.vy*=.95),e.vx+=(Math.random()-.5)*1,e.y>S*.6){const N=I.value,F=f/N.length,ct=j*F+F/2;e.vx+=(ct-e.x)*.003}e.vy<1&&(e.vy=1.5)}}if(e.x<M&&(e.x=M,e.vx=Math.abs(e.vx)*O),e.x>f-M&&(e.x=f-M,e.vx=-Math.abs(e.vx)*O),U(l),e.y>S-30){const o=I.value,v=f/o.length,h=Math.floor(e.x/v),u=Math.max(0,Math.min(o.length-1,h));Z.value=o[u],C.value=d.value*o[u]-d.value,w.value+=d.value*o[u],z.value.unshift({multiplier:o[u],win:C.value,bet:d.value}),D.value=!0,e=null,g.value=!1,setTimeout(()=>{D.value=!1,W.value&&A.value>0&&(A.value--,A.value>0&&w.value>=d.value&&tt())},1500);return}G=requestAnimationFrame(L)},U=t=>{t.fillStyle="#0a1628",t.fillRect(0,0,f,S);const l=f/2-V/2,a=t.createLinearGradient(l,0,l+V,0);a.addColorStop(0,"#374151"),a.addColorStop(.3,"#4b5563"),a.addColorStop(.7,"#4b5563"),a.addColorStop(1,"#374151"),t.fillStyle=a,t.beginPath(),t.roundRect(l,ot,V,$,[0,0,8,8]),t.fill();const i=t.createLinearGradient(l+4,0,l+V-4,0);i.addColorStop(0,"rgba(0,0,0,0.4)"),i.addColorStop(.5,"rgba(0,0,0,0.1)"),i.addColorStop(1,"rgba(0,0,0,0.4)"),t.fillStyle=i,t.fillRect(l+3,ot,V-6,$-4),(_==="dropping"||_==="in_tube")&&(t.shadowColor="rgba(236, 72, 153, 0.5)",t.shadowBlur=10,t.fillStyle="rgba(236, 72, 153, 0.2)",t.beginPath(),t.ellipse(f/2,$,12,4,0,0,Math.PI*2),t.fill(),t.shadowBlur=0);const o=x.value;for(let n=0;n<T.length;n++){const r=T[n],p=Math.floor((-3+Math.sqrt(9+8*n))/2)/o,B=Math.round(59+-25*p),N=Math.round(130+81*p),F=Math.round(246+-8*p);t.fillStyle=`rgb(${B},${N},${F})`,t.shadowColor=`rgba(${B},${N},${F},0.5)`,t.shadowBlur=6,t.beginPath(),t.arc(r.x,r.y,st,0,Math.PI*2),t.fill()}if(t.shadowBlur=0,e){let n=e.y;_==="in_tube"&&(n=$-4,e.x=f/2+Math.sin(Y*.15)*2);{t.shadowColor="rgba(236, 72, 153, 0.8)",t.shadowBlur=15;const r=t.createRadialGradient(e.x-2,n-2,0,e.x,n,M);r.addColorStop(0,"#f472b6"),r.addColorStop(.5,"#ec4899"),r.addColorStop(1,"#be185d"),t.fillStyle=r,t.beginPath(),t.arc(e.x,n,M,0,Math.PI*2),t.fill(),t.shadowBlur=0,t.fillStyle="rgba(255, 255, 255, 0.5)",t.beginPath(),t.arc(e.x-2,n-2,M*.35,0,Math.PI*2),t.fill()}}const v=I.value,h=f/v.length,u=S-28;v.forEach((n,r)=>{const k=r*h;let p="rgba(99,102,241,0.3)";n>=10?p="rgba(34,197,94,0.4)":n>=2?p="rgba(34,211,238,0.3)":n<1&&(p="rgba(239,68,68,0.3)"),t.fillStyle=p,t.fillRect(k+1,u,h-2,26),t.fillStyle="#fff",t.font="bold 9px sans-serif",t.textAlign="center",t.fillText(`${n}x`,k+h/2,u+16)})};return ft([E,x],()=>{if(K(),P.value){const t=P.value.getContext("2d");t&&U(t)}}),pt(()=>{if(K(),P.value){const t=P.value.getContext("2d");t&&U(t)}}),bt(()=>{G&&cancelAnimationFrame(G)}),(t,l)=>(y(),b("div",wt,[s("div",Ct,[(y(),b(q,null,H(20,a=>s("div",{key:a,class:"star",style:_t(rt())},null,4)),64))]),s("header",kt,[s("button",{class:"header-back",onClick:l[0]||(l[0]=a=>t.$router.push("/solo"))},[...l[6]||(l[6]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M15 18l-6-6 6-6"})],-1)])]),l[9]||(l[9]=s("div",{class:"header-title"},[s("span",{class:"title-main"},"Plinko"),s("span",{class:"title-badge"},"x1000")],-1)),s("div",St,[l[7]||(l[7]=s("span",{class:"balance-icon"},"ðŸ’Ž",-1)),s("span",xt,m(w.value.toFixed(2)),1),l[8]||(l[8]=s("button",{class:"balance-add"},"+",-1))])]),s("div",Pt,[s("div",Bt,[l[10]||(l[10]=s("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),s("span",$t,"#"+m(Q.value),1)]),s("div",At,[l[12]||(l[12]=s("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),X(s("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>E.value=a),class:"risk-select"},[...l[11]||(l[11]=[s("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),s("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),s("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[et,E.value]])]),s("div",It,[l[14]||(l[14]=s("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),X(s("select",{"onUpdate:modelValue":l[2]||(l[2]=a=>x.value=a),class:"rows-select"},[...l[13]||(l[13]=[s("option",{value:8},"8",-1),s("option",{value:12},"12",-1),s("option",{value:16},"16",-1)])],512),[[et,x.value]])])]),s("div",Tt,[s("canvas",{ref_key:"gameCanvas",ref:P,class:"game-canvas",width:f,height:S},null,512),D.value?(y(),b("div",{key:0,class:R(["result-overlay",{win:C.value>0,lose:C.value<=0}])},[s("div",Gt,m(Z.value)+"x",1),s("div",{class:R(["result-amount",{positive:C.value>0}])},m(C.value>0?"+":"")+m(C.value.toFixed(2))+" TON ",3)],2)):lt("",!0)]),s("div",Ut,[(y(!0),b(q,null,H(I.value,(a,i)=>(y(),b("div",{key:i,class:R(["mult-slot",ut(a)])},m(a)+"x ",3))),128))]),s("div",Ft,[s("div",Rt,[(y(),b(q,null,H(nt,a=>s("button",{key:a,class:R(["bet-btn",{active:d.value===a}]),onClick:i=>d.value=a,disabled:g.value},m(a)+" ðŸ’Ž ",11,Vt)),64))]),s("div",Dt,[s("button",{class:"btn-half",onClick:dt,disabled:g.value},"Â½",8,Et),s("button",{class:"btn-play",onClick:tt,disabled:g.value||w.value<d.value},[g.value?(y(),b("span",Yt)):(y(),b("span",Lt,m(g.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${d.value} TON`),1))],8,Wt),s("button",{class:"btn-double",onClick:vt,disabled:g.value},"2x",8,Nt)]),s("div",qt,[s("label",Ht,[X(s("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=a=>W.value=a),disabled:g.value},null,8,Xt),[[mt,W.value]]),l[15]||(l[15]=s("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),W.value?X((y(),b("input",{key:0,type:"number","onUpdate:modelValue":l[4]||(l[4]=a=>A.value=a),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[yt,A.value,void 0,{number:!0}]]):lt("",!0)])]),s("div",Ot,[s("div",zt,[l[16]||(l[16]=s("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),s("span",{class:"history-clear",onClick:l[5]||(l[5]=a=>z.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),s("div",Jt,[(y(!0),b(q,null,H(z.value.slice(0,10),(a,i)=>(y(),b("div",{key:i,class:R(["history-item",{win:a.win>0}])},[s("span",jt,m(a.multiplier)+"x",1),s("span",Kt,m(a.win>0?"+":"")+m(a.win.toFixed(2)),1)],2))),128))])])]))}}),se=Mt(Zt,[["__scopeId","data-v-be957615"]]);export{se as default};
