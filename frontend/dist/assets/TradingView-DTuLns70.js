import{d as st,j as at,H as nt,c as i,b as t,t as n,a as G,F as C,f as M,k as f,y as g,n as z,r as d,l as w,o as r}from"./vue-DAmU7BeK.js";import{_ as ot}from"./index-BoOa8Kl2.js";const it={class:"trading-view"},rt={class:"banner-timer"},ut={class:"top-bar"},dt={class:"top-left"},vt={class:"balance-value"},ct={class:"chart-container"},pt={class:"y-axis"},ht={class:"chart-area"},mt={class:"grid-lines"},ft={class:"candles-wrapper"},gt={key:1,class:"connection-status"},wt={key:2,class:"countdown-overlay"},bt={class:"countdown-text"},yt={key:3,class:"crash-overlay"},xt={class:"traders-panel"},Ct={class:"traders-header"},Mt={class:"traders-count"},kt={key:0,class:"traders-list"},_t={class:"trader-info"},Bt={class:"trader-level"},$t={class:"trader-name"},St={key:0,class:"trader-status"},zt={class:"traders-footer"},It={class:"game-id"},Tt={class:"hash-btn"},Ft={class:"bet-pills"},Ht=["onClick"],Dt={class:"action-row"},Lt=["disabled"],Vt={class:"btn-content"},Nt={class:"btn-amount"},Et=["disabled"],At={class:"btn-content"},Pt={class:"btn-percent"},O=1,L=7,jt=st({__name:"TradingView",setup(Yt){const u=d("waiting"),a=d(1),k=d(5),V=d(36637),N=d("33a4...faa6"),I=d("10:13:30:00"),R=d(!1),b=d(.66),h=d(.5),c=d(null),_=d([]),v=d(null);let T=0;const p=d([]),E=w(()=>{const s=[..._.value];return v.value&&s.push(v.value),s.slice(-25)}),U=w(()=>u.value==="crashed"?"0.000x":a.value.toFixed(3)+"x"),Z=w(()=>u.value==="crashed"?"crashed":a.value>=2?"high":a.value<1?"low":""),A=w(()=>(a.value-1)*100),P=w(()=>["waiting","countdown","active"].includes(u.value)&&!c.value&&b.value>=h.value),j=w(()=>u.value==="active"&&c.value!==null),m=s=>{const e=Math.max(O,Math.min(L,s));return(L-e)/(L-O)*100},K=(s,e)=>{const l=E.value.length,o=100/Math.max(l,15);return{left:`${e*o}%`,width:`${o*.7}%`}},W=s=>({top:`${m(s.high)}%`,height:`${m(s.low)-m(s.high)}%`,background:s.close>=s.open?"#09D76D":"#FB2C36"}),X=s=>{const e=m(s.open),l=m(s.close);return{top:`${Math.min(e,l)}%`,height:`${Math.max(Math.abs(l-e),1)}%`,background:s.close>=s.open?"#09D76D":"#FB2C36"}},q=()=>{P.value&&(c.value=h.value,b.value-=h.value,p.value.push({id:Date.now(),name:"you",bet:h.value,color:"#0098EA",level:1,exited:!1,profit:0}))},J=()=>{if(!j.value||!c.value)return;const s=c.value*a.value;b.value+=s;const e=p.value.find(l=>l.name==="you");e&&(e.exited=!0,e.profit=s-c.value,e.exitMult=a.value),c.value=null};let y=null,x=null,F=0;const Y=()=>{u.value="active",a.value=1,F=0,T=0,_.value=[],v.value={time:0,open:1,high:1,low:1,close:1},setTimeout(()=>{if(u.value==="active"){const s=["whale_99","Kweer_gg","ntybe","lucky_star"];p.value.push({id:Date.now(),name:s[Math.floor(Math.random()*s.length)],bet:+(.3+Math.random()*2).toFixed(1),color:`hsl(${Math.random()*360}, 60%, 50%)`,level:Math.floor(Math.random()*50)+1,exited:!1,profit:0})}},300),y=window.setInterval(()=>{if(u.value!=="active")return;F++;const s=Math.random()>.48?1:-1,e=Math.random()*.08;if(a.value=Math.max(0,a.value+s*e-.002),v.value&&(v.value.close=a.value,v.value.high=Math.max(v.value.high,a.value),v.value.low=Math.min(v.value.low,a.value)),F%12===0&&(v.value&&_.value.push({...v.value}),T++,v.value={time:T,open:a.value,high:a.value,low:a.value,close:a.value}),Math.random()<.008){const l=p.value.filter(o=>!o.exited&&o.name!=="you");if(l.length){const o=l[Math.floor(Math.random()*l.length)];o.exited=!0,o.profit=o.bet*a.value-o.bet,o.exitMult=a.value}}a.value<=.001&&Q()},60)},Q=()=>{if(y&&clearInterval(y),u.value="crashed",a.value=0,c.value){const s=p.value.find(e=>e.name==="you");s&&(s.exited=!0,s.profit=-s.bet),c.value=null}setTimeout(tt,2500)},tt=()=>{u.value="countdown",k.value=5,V.value++,N.value=Math.random().toString(36).slice(2,6)+"..."+Math.random().toString(36).slice(2,6),p.value=[],_.value=[],x=window.setInterval(()=>{k.value-=.05,k.value<=0&&(x&&clearInterval(x),Y())},50)};let H=null;const et=()=>{const[s,e,l,o]=I.value.split(":").map(Number);let D=o-1,B=l,$=e,S=s;D<0&&(D=59,B--),B<0&&(B=59,$--),$<0&&($=23,S--),S<0&&(S=0),I.value=[S,$,B,D].map(lt=>String(lt).padStart(2,"0")).join(":")};return at(()=>{setTimeout(Y,800),H=window.setInterval(et,1e3)}),nt(()=>{y&&clearInterval(y),x&&clearInterval(x),H&&clearInterval(H)}),(s,e)=>(r(),i("div",it,[t("button",{class:"tournament-banner",onClick:e[0]||(e[0]=l=>s.$router.push("/tournament"))},[e[7]||(e[7]=t("span",{class:"banner-emoji"},"üèÜ",-1)),e[8]||(e[8]=t("span",{class:"banner-text"},"Trading Mega Tournament",-1)),t("span",rt,n(I.value),1)]),t("div",ut,[t("div",dt,[t("button",{class:"icon-btn",onClick:e[1]||(e[1]=l=>s.$router.push("/history?sorting=solo_trading"))},[...e[9]||(e[9]=[G('<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-729ed5c2><rect x="3" y="4" width="18" height="18" rx="2" ry="2" data-v-729ed5c2></rect><line x1="16" y1="2" x2="16" y2="6" data-v-729ed5c2></line><line x1="8" y1="2" x2="8" y2="6" data-v-729ed5c2></line><line x1="3" y1="10" x2="21" y2="10" data-v-729ed5c2></line></svg>',1)])]),t("button",{class:"icon-btn",onClick:e[2]||(e[2]=l=>R.value=!0)},[...e[10]||(e[10]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),t("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})],-1)])])]),t("button",{class:"balance-pill",onClick:e[3]||(e[3]=l=>s.$router.push("/deposit"))},[e[11]||(e[11]=t("svg",{class:"ton-icon",width:"18",height:"18",viewBox:"0 0 56 56",fill:"none"},[t("path",{d:"M28 56C43.464 56 56 43.464 56 28C56 12.536 43.464 0 28 0C12.536 0 0 12.536 0 28C0 43.464 12.536 56 28 56Z",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),t("span",vt,n(b.value.toFixed(2)),1),e[12]||(e[12]=t("span",{class:"balance-plus"},"+",-1))])]),t("div",ct,[t("div",pt,[(r(),i(C,null,M(7,l=>t("span",{key:l},n(8-l),1)),64))]),t("div",ht,[t("div",mt,[(r(),i(C,null,M(7,l=>t("div",{key:l,class:"grid-line",style:f({top:(l-1)/6*100+"%"})},null,4)),64))]),t("div",ft,[(r(!0),i(C,null,M(E.value,(l,o)=>(r(),i("div",{key:o,class:"candle",style:f(K(l,o))},[t("div",{class:"wick",style:f(W(l))},null,4),t("div",{class:"body",style:f(X(l))},null,4)],4))),128))]),u.value==="active"?(r(),i("div",{key:0,class:"price-line",style:f({top:m(a.value)+"%"})},null,4)):g("",!0),t("div",{class:z(["multiplier",Z.value]),style:f({top:m(a.value)+"%"})},n(U.value),7),u.value==="waiting"?(r(),i("div",gt,[...e[13]||(e[13]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.6"},[t("path",{d:"M12 3C7.46 3 3.34 4.78.29 7.67c-.18.18-.29.43-.29.71s.11.53.29.71c.4.39 1.02.39 1.42 0C4.08 6.74 7.82 5.25 12 5.25s7.92 1.49 10.29 3.84c.4.39 1.02.39 1.42 0 .18-.18.29-.43.29-.71s-.11-.53-.29-.71C20.66 4.78 16.54 3 12 3zm0 5.25c-2.34 0-4.54.79-6.36 2.13-.21.16-.34.41-.34.68s.12.51.33.67c.43.33 1.03.25 1.37-.17C8.33 10.46 10.06 10 12 10s3.67.46 4.99 1.56c.33.42.93.5 1.37.17.21-.16.33-.4.33-.67s-.13-.52-.34-.68C16.54 9.04 14.34 8.25 12 8.25zm0 5.25c-1.12 0-2.17.4-3.04 1.05-.25.19-.39.48-.37.78.02.3.19.57.45.73.42.25.96.15 1.27-.24.47-.38 1.05-.57 1.69-.57s1.22.19 1.69.57c.31.39.85.49 1.27.24.26-.16.43-.43.45-.73.02-.3-.12-.59-.37-.78-.87-.65-1.92-1.05-3.04-1.05zM12 18c-.55 0-1 .45-1 1s.45 1 1 1 1-.45 1-1-.45-1-1-1z"})],-1),t("span",null,"Connecting...",-1)])])):g("",!0),u.value==="countdown"?(r(),i("div",wt,[t("span",bt,n(k.value.toFixed(1))+"s",1)])):g("",!0),u.value==="crashed"?(r(),i("div",yt,[...e[14]||(e[14]=[t("div",{class:"crash-icons"},"üíÄüíÄüíÄ",-1)])])):g("",!0)])]),t("div",xt,[t("div",Ct,[e[15]||(e[15]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",opacity:"0.6"},[t("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"})],-1)),e[16]||(e[16]=t("span",{class:"traders-title"},"Traders",-1)),t("span",Mt,"("+n(p.value.length)+")",1)]),p.value.length>0?(r(),i("div",kt,[(r(!0),i(C,null,M(p.value,l=>(r(),i("div",{key:l.id,class:z(["trader-item",{exited:l.exited}])},[t("div",_t,[t("div",Bt,n(l.level),1),t("div",{class:"trader-avatar",style:f({background:l.color})},n(l.name.charAt(0).toUpperCase()),5),t("span",$t,"@"+n(l.name),1),l.exited?(r(),i("span",St,n(l.profit>=0?l.exitMult?.toFixed(2)+"x":""),1)):g("",!0)]),t("div",{class:z(["trader-profit",{positive:l.profit>=0,negative:l.profit<0}])},[t("span",null,n(l.profit>=0?"+":"")+n(l.profit.toFixed(2)),1),e[17]||(e[17]=t("svg",{width:"10",height:"10",viewBox:"0 0 56 56",fill:"currentColor"},[t("path",{d:"M37.56 15.63H18.44c-3.52 0-5.75 3.79-4 6.86l11.8 20.45c.77 1.34 2.7 1.34 3.47 0l11.84-20.45c1.77-3.06-.45-6.86-3.99-6.86z"})],-1))],2)],2))),128))])):g("",!0),t("div",zt,[t("span",It,"Game #"+n(V.value),1),t("button",Tt,[e[18]||(e[18]=t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1)),t("span",null,"Hash: "+n(N.value),1)])])]),t("div",Ft,[(r(),i(C,null,M([.5,1,5,10],l=>t("button",{key:l,class:z(["bet-pill",{active:h.value===l}]),onClick:o=>h.value=l},[e[19]||(e[19]=t("svg",{width:"12",height:"12",viewBox:"0 0 56 56",fill:"currentColor",class:"pill-ton"},[t("path",{d:"M37.56 15.63H18.44c-3.52 0-5.75 3.79-4 6.86l11.8 20.45c.77 1.34 2.7 1.34 3.47 0l11.84-20.45c1.77-3.06-.45-6.86-3.99-6.86z"})],-1)),t("span",null,n(l),1)],10,Ht)),64)),t("button",{class:"bet-pill",onClick:e[4]||(e[4]=l=>h.value=Math.floor(b.value*10)/10)},[...e[20]||(e[20]=[t("span",null,"Max",-1)])]),e[21]||(e[21]=t("button",{class:"bet-pill bet-pill-edit"},[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})])],-1))]),t("div",Dt,[t("button",{class:"action-btn swap-btn",onClick:e[5]||(e[5]=l=>s.$router.push("/swap"))},[...e[22]||(e[22]=[G('<svg width="24" height="24" viewBox="0 0 56 56" fill="#0098EA" data-v-729ed5c2><circle cx="28" cy="28" r="28" data-v-729ed5c2></circle><path d="M37.56 15.63H18.44c-3.52 0-5.75 3.79-4 6.86l11.8 20.45c.77 1.34 2.7 1.34 3.47 0l11.84-20.45c1.77-3.06-.45-6.86-3.99-6.86z" fill="white" data-v-729ed5c2></path></svg><span class="action-label" data-v-729ed5c2>Swap</span><span class="swap-star" data-v-729ed5c2>‚≠ê</span>',3)])]),c.value?(r(),i("button",{key:1,class:"main-btn sell-btn",disabled:!j.value,onClick:J},[t("div",At,[e[25]||(e[25]=t("span",{class:"btn-label"},"Sell",-1)),t("span",Pt,n(A.value>=0?"+":"")+n(A.value.toFixed(0))+"%",1)])],8,Et)):(r(),i("button",{key:0,class:"main-btn buy-btn",disabled:!P.value,onClick:q},[e[24]||(e[24]=t("svg",{width:"16",height:"16",viewBox:"0 0 56 56",fill:"currentColor",class:"btn-icon"},[t("path",{d:"M37.56 15.63H18.44c-3.52 0-5.75 3.79-4 6.86l11.8 20.45c.77 1.34 2.7 1.34 3.47 0l11.84-20.45c1.77-3.06-.45-6.86-3.99-6.86z"})],-1)),t("div",Vt,[e[23]||(e[23]=t("span",{class:"btn-label"},"Buy",-1)),t("span",Nt,n(h.value)+" TON",1)])],8,Lt)),t("button",{class:"action-btn deposit-btn",onClick:e[6]||(e[6]=l=>s.$router.push("/deposit"))},[...e[26]||(e[26]=[t("div",{class:"deposit-icon"},"+",-1),t("span",{class:"action-label"},"Deposit",-1)])])])]))}}),Rt=ot(jt,[["__scopeId","data-v-729ed5c2"]]);export{Rt as default};
