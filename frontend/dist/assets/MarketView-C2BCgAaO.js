import{d as U,k as W,c as o,b as t,t as u,F as L,g as V,s as S,v as w,r,x as h,o as n,n as x}from"./vue-TADZIX6E.js";import{u as q}from"./index-iTE5fw3g.js";import{a as G}from"./index-D5GkNzM3.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"market-view min-h-screen bg-[#1a1a2e]"},Q={class:"header-section px-4 pt-3 pb-2"},X={class:"grid grid-cols-2 gap-2 mb-2"},Y={class:"filter-value"},Z={key:0},ee={key:1,class:"text-gray-500"},te={class:"filter-value"},se={key:0},le={key:1,class:"text-gray-500"},oe={class:"grid grid-cols-2 gap-2 mb-3"},ne={class:"filter-value"},ae={key:0},re={key:1,class:"text-gray-500"},ie={class:"filter-value"},ue={key:0},de={key:1,class:"text-gray-500"},ce=["onClick"],ve={key:1,class:"flex items-center justify-center py-20"},pe={key:2,class:"px-2 pt-2 pb-24"},me={class:"grid grid-cols-3 gap-1.5"},ke=["onClick"],fe={class:"market-badge"},ge=["src","alt"],be=["onClick"],ye={class:"nft-image-container"},_e=["src","alt"],we={key:1,class:"nft-placeholder"},he={class:"price-text"},xe={key:0,class:"flex justify-center mt-4 mb-4"},Ce=["disabled"],Me={key:1,class:"empty-state"},Be=U({__name:"MarketView",setup(Fe){const{hapticImpact:d}=q(),z="http://localhost:3001",c=r(!0),k=r(!1),C=r(!0),y=r(30),_=r(0),v=r(""),i=r(""),p=r(""),m=r(""),a=r(null),M=r("price_asc"),f=r([]),B=h(()=>{const s=new Set;return f.value.forEach(e=>{const l=e.nft_name?.replace(/#\d+$/,"").trim();l&&s.add(l)}),Array.from(s).sort()}),F=h(()=>{let s=[...f.value];return i.value&&(s=s.filter(e=>e.nft_name?.startsWith(i.value))),s}),A=h(()=>a.value==="collection"?[{label:"–í—Å–µ",value:""},...B.value.map(s=>({label:s,value:s}))]:a.value==="model"?[{label:"–õ—é–±–æ–π",value:""},...B.value.map(s=>({label:s,value:s}))]:a.value==="background"?[{label:"–õ—é–±–æ–π",value:""},{label:"–ó–µ–ª—ë–Ω—ã–π",value:"green"},{label:"–°–∏–Ω–∏–π",value:"blue"},{label:"–ö—Ä–∞—Å–Ω—ã–π",value:"red"},{label:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π",value:"purple"},{label:"–û—Ä–∞–Ω–∂–µ–≤—ã–π",value:"orange"}]:a.value==="symbol"?[{label:"–õ—é–±–æ–π",value:""}]:[]),g=s=>{d("light"),a.value=a.value===s?null:s},D=s=>({collection:v,model:i,background:p,symbol:m})[a.value]?.value===s,I=s=>{const e={collection:v,model:i,background:p,symbol:m};e[a.value]&&(e[a.value].value=s),a.value=null},b=async(s=!1)=>{try{s?k.value=!0:(c.value=!0,_.value=0);const l=(await G.get(`${z}/api/listings`,{params:{limit:y.value,offset:_.value,sort:M.value}})).data.listings||[];s?f.value.push(...l):f.value=l,C.value=l.length>=y.value}catch(e){console.error("Fetch error:",e)}finally{c.value=!1,k.value=!1}},O=()=>{d("light"),_.value+=y.value,b(!0)},E=s=>{const e=parseFloat(s);return e>=1e3?e.toLocaleString("ru-RU",{maximumFractionDigits:0}):e>=100?e.toFixed(0):(e>=10,e.toFixed(2))},H=s=>{const e=parseFloat(s);return e<5?"price-green":e<25?"price-blue":e<100?"price-purple":"price-orange"},$=s=>{},P=()=>{d("medium"),b()},N=()=>{d("light"),v.value="",i.value="",p.value="",m.value="",M.value="price_asc",b()},T=s=>{d("medium"),s.listing_url&&window.open(s.listing_url,"_blank")},R=s=>{d("heavy")};return W(()=>{b()}),(s,e)=>(n(),o("div",K,[t("div",Q,[t("div",X,[t("div",{class:"filter-dropdown",onClick:e[0]||(e[0]=l=>g("collection"))},[e[7]||(e[7]=t("span",{class:"filter-label"},"–ö–æ–ª–ª–µ–∫—Ü–∏–∏",-1)),t("div",Y,[v.value?(n(),o("span",Z,u(v.value),1)):(n(),o("span",ee,"–í—Å–µ")),e[6]||(e[6]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),t("div",{class:"filter-dropdown",onClick:e[1]||(e[1]=l=>g("model"))},[e[9]||(e[9]=t("span",{class:"filter-label"},"–ú–æ–¥–µ–ª—å",-1)),t("div",te,[i.value?(n(),o("span",se,u(i.value),1)):(n(),o("span",le,"–õ—é–±")),e[8]||(e[8]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),t("div",oe,[t("div",{class:"filter-dropdown",onClick:e[2]||(e[2]=l=>g("background"))},[e[11]||(e[11]=t("span",{class:"filter-label"},"–§–æ–Ω",-1)),t("div",ne,[p.value?(n(),o("span",ae,u(p.value),1)):(n(),o("span",re,"–õ—é–±")),e[10]||(e[10]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),t("div",{class:"filter-dropdown",onClick:e[3]||(e[3]=l=>g("symbol"))},[e[13]||(e[13]=t("span",{class:"filter-label"},"–°–∏–º–≤–æ–ª",-1)),t("div",ie,[m.value?(n(),o("span",ue,u(m.value),1)):(n(),o("span",de,"–õ—é–±")),e[12]||(e[12]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),t("button",{class:"filter-btn w-full mb-2",onClick:P},[...e[14]||(e[14]=[t("span",null,"–§–∏–ª—å—Ç—Ä—ã",-1),t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1)])]),t("button",{class:"reset-btn w-full",onClick:N},[...e[15]||(e[15]=[t("span",null,"–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1),t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])]),a.value?(n(),o("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=l=>a.value=null)},[t("div",{class:"dropdown-menu",onClick:e[4]||(e[4]=S(()=>{},["stop"]))},[(n(!0),o(L,null,V(A.value,l=>(n(),o("div",{key:l.value,class:x(["dropdown-item",{active:D(l.value)}]),onClick:j=>I(l.value)},u(l.label),11,ce))),128))])])):w("",!0),c.value?(n(),o("div",ve,[...e[16]||(e[16]=[t("div",{class:"w-10 h-10 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):(n(),o("div",pe,[t("div",me,[(n(!0),o(L,null,V(F.value,l=>(n(),o("div",{key:l.id,class:"nft-card",onClick:j=>T(l)},[t("div",fe,[$(l.market)?(n(),o("img",{key:0,src:$(l.market),class:"w-4 h-4",alt:l.market},null,8,ge)):(n(),o("span",{key:1,class:x(["market-dot",l.market])},null,2))]),t("button",{class:"cart-btn",onClick:S(j=>R(),["stop"])},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 100 4 2 2 0 000-4z"})],-1)])],8,be),t("div",ye,[l.nft_image?(n(),o("img",{key:0,src:l.nft_image,alt:l.nft_name,class:"nft-image",loading:"lazy"},null,8,_e)):(n(),o("div",we,[...e[18]||(e[18]=[t("span",{class:"text-4xl"},"üéÅ",-1)])]))]),t("div",{class:x(["price-badge",H(l.price)])},[t("span",he,u(E(l.price)),1),e[19]||(e[19]=t("span",{class:"ton-icon"},"üíé",-1))],2)],8,ke))),128))]),C.value&&!c.value?(n(),o("div",xe,[t("button",{onClick:O,disabled:k.value,class:"load-more-btn"},u(k.value?"–ó–∞–≥—Ä—É–∑–∫–∞...":"–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë"),9,Ce)])):w("",!0),!c.value&&F.value.length===0?(n(),o("div",Me,[...e[20]||(e[20]=[t("span",{class:"text-5xl mb-3"},"üéÅ",-1),t("p",{class:"text-gray-400"},"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏—Ñ—Ç–æ–≤",-1),t("p",{class:"text-gray-500 text-sm mt-1"},"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1)])])):w("",!0)]))]))}}),Se=J(Be,[["__scopeId","data-v-3c3d2ff7"]]);export{Se as default};
