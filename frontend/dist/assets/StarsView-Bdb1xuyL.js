import{d as C,r as m,b as c,e as s,u as L,f as R,x as B,y as P,t as l,E as V,F as b,v as E,z as w,D as N,c as $,a as p,n as q}from"./vue-CF-r4DcL.js";import{_ as g}from"./stars-CI_OqwKa.js";import{u as z,_ as D}from"./index-QODlMPhp.js";const F={class:"stars-view"},W={class:"stars-header"},j={class:"stars-content"},O={class:"input-section"},U={class:"username-input-wrapper"},J={class:"amount-section"},X={class:"input-label"},G={class:"amount-input-wrapper"},H=["value"],K={class:"amount-price"},Q={class:"range-slider-wrapper"},Y=["value"],Z={class:"range-labels"},ss={class:"quick-amounts"},ts=["onClick"],es={class:"how-it-works"},as={class:"steps"},ns={class:"step"},ls={class:"step-content"},is={class:"step-desc"},os={class:"sticky-footer"},rs=["disabled"],ds={class:"btn-price"},i=50,r=2e4,us=1.8,cs=C({__name:"StarsView",setup(ps){const h=N(),{user:f,hapticImpact:d}=z(),o=m(f.value?.username?.replace("@","")||""),a=m(100),u=m(!1),k=[100,500,1e3,5e3],y=$(()=>{const e=(a.value-i)/(r-i)*100;return{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${e}%, #3a3a3c ${e}%, #3a3a3c 100%)`}}),v=e=>Math.ceil(e*us),_=e=>e.toLocaleString("ru-RU"),x=e=>{a.value=e,d("light")},T=e=>{const t=e.target.value.replace(/[^0-9]/g,"");if(t){const n=parseInt(t);a.value=Math.max(i,Math.min(r,n))}},I=e=>{const t=parseInt(e.target.value)||i;a.value=Math.max(i,Math.min(r,t))},A=e=>{a.value=parseInt(e.target.value),d("light")},M=async()=>{if(!o.value.trim()){alert("–í–≤–µ–¥–∏—Ç–µ Telegram username");return}u.value=!0,d("medium");try{const e=o.value.startsWith("@")?o.value:`@${o.value}`,t=await fetch("/api/v1/stars/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:f.value?.id,username:e,amount:a.value,price:v(a.value)})});if(!t.ok)throw new Error("Failed to create invoice");const n=await t.json();window.Telegram?.WebApp?.openInvoice?window.Telegram.WebApp.openInvoice(n.invoice_url,S=>{S==="paid"&&(d("heavy"),alert("–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! Stars –±—É–¥—É—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è."),h.push("/profile"))}):window.open(n.invoice_url,"_blank")}catch(e){console.error("Stars purchase failed:",e),alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞")}finally{u.value=!1}};return(e,t)=>(p(),c("div",F,[s("header",W,[s("button",{class:"back-btn",onClick:t[0]||(t[0]=n=>L(h).back())},[...t[2]||(t[2]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[3]||(t[3]=s("div",{class:"header-title"},[s("img",{src:g,alt:"Stars",class:"header-icon",width:"24",height:"24"}),R(" –ü–æ–∫—É–ø–∫–∞ Stars ")],-1)),t[4]||(t[4]=s("div",{class:"header-spacer"},null,-1))]),s("div",j,[t[12]||(t[12]=s("div",{class:"promo-banner"},[s("div",{class:"promo-icon"},[s("img",{src:g,alt:"Stars",width:"48",height:"48"})]),s("div",{class:"promo-text"},[s("h2",null,"Telegram Stars"),s("p",null,"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç")])],-1)),s("div",O,[t[6]||(t[6]=s("label",{class:"input-label"},"Telegram username",-1)),s("div",U,[t[5]||(t[5]=s("span",{class:"at-symbol"},"@",-1)),B(s("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>o.value=n),placeholder:"username",class:"username-input"},null,512),[[P,o.value]])]),t[7]||(t[7]=s("p",{class:"input-hint"},"Stars –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —ç—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç",-1))]),s("div",J,[s("label",X,"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Stars ("+l(i)+" - "+l(r.toLocaleString())+")",1),s("div",G,[s("input",{type:"text",inputmode:"numeric",value:a.value,onInput:T,onBlur:I,class:"amount-input"},null,40,H),s("span",K,"‚âà "+l(_(v(a.value)))+" ‚ÇΩ",1)]),s("div",Q,[s("input",{type:"range",value:a.value,onInput:A,min:i,max:r,step:10,class:"range-slider",style:V(y.value)},null,44,Y),s("div",Z,[s("span",null,l(i)),s("span",null,l(r.toLocaleString()),1)])]),s("div",ss,[(p(),c(b,null,E(k,n=>s("button",{key:n,class:q(["quick-btn",{active:a.value===n}]),onClick:S=>x(n)},l(n.toLocaleString()),11,ts)),64))])]),s("div",es,[t[11]||(t[11]=s("h3",{class:"section-title"},"–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",-1)),s("div",as,[s("div",ns,[t[9]||(t[9]=s("div",{class:"step-number"},"1",-1)),s("div",ls,[t[8]||(t[8]=s("p",{class:"step-title"},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Stars",-1)),s("p",is,"–û—Ç "+l(i)+" –¥–æ "+l(r.toLocaleString())+" Stars",1)])]),t[10]||(t[10]=w('<div class="step" data-v-b8d35e71><div class="step-number" data-v-b8d35e71>2</div><div class="step-content" data-v-b8d35e71><p class="step-title" data-v-b8d35e71>–û–ø–ª–∞—Ç–∏—Ç–µ</p><p class="step-desc" data-v-b8d35e71>–ß–µ—Ä–µ–∑ Telegram Stars</p></div></div><div class="step" data-v-b8d35e71><div class="step-number" data-v-b8d35e71>3</div><div class="step-content" data-v-b8d35e71><p class="step-title" data-v-b8d35e71>–ü–æ–ª—É—á–∏—Ç–µ Stars</p><p class="step-desc" data-v-b8d35e71>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç</p></div></div>',2))])]),t[13]||(t[13]=w('<div class="features-grid" data-v-b8d35e71><div class="feature" data-v-b8d35e71><span class="feature-icon" data-v-b8d35e71>‚ö°</span><span class="feature-text" data-v-b8d35e71>–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ</span></div><div class="feature" data-v-b8d35e71><span class="feature-icon" data-v-b8d35e71>üîí</span><span class="feature-text" data-v-b8d35e71>–ë–µ–∑–æ–ø–∞—Å–Ω–æ</span></div><div class="feature" data-v-b8d35e71><span class="feature-icon" data-v-b8d35e71>‚úì</span><span class="feature-text" data-v-b8d35e71>–ì–∞—Ä–∞–Ω—Ç–∏—è</span></div></div>',1))]),s("div",os,[s("button",{class:"buy-btn",disabled:u.value||!o.value.trim(),onClick:M},[u.value?(p(),c(b,{key:0},[t[14]||(t[14]=s("div",{class:"spinner"},null,-1)),t[15]||(t[15]=s("span",null,"–°–æ–∑–¥–∞–Ω–∏–µ...",-1))],64)):(p(),c(b,{key:1},[t[16]||(t[16]=s("img",{src:g,alt:"Stars",width:"20",height:"20",class:"btn-star-icon"},null,-1)),s("span",null,"–ö—É–ø–∏—Ç—å "+l(a.value.toLocaleString())+" Stars",1),s("span",ds,"‚Ä¢ "+l(_(v(a.value)))+" ‚ÇΩ",1)],64))],8,rs)])]))}}),gs=D(cs,[["__scopeId","data-v-b8d35e71"]]);export{gs as default};
