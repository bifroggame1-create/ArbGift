import{d as T}from"./client-WsuO9Up5.js";import{d as V,G as E,c as b,b as t,C as S,t as c,n as j,F as B,g as G,s as I,r as u,x as L,o as p,z as y,H as N}from"./vue-Bx9zvuFS.js";const q={class:"gonka-view min-h-screen flex flex-col",style:{background:"#000","padding-bottom":"16px"}},U={class:"px-3 pt-3 flex flex-col gap-2"},X={class:"flex items-center justify-between"},J={class:"flex items-center gap-1.5"},K={class:"flex items-center gap-1.5 rounded-full px-3 py-1.5",style:{background:"rgba(255,255,255,0.08)"}},O={class:"text-white font-bold text-sm"},Q={class:"flex justify-center gap-1 px-4 py-2"},W={class:"px-3 flex-1",style:{"max-height":"340px"}},Y={class:"grid grid-cols-3 gap-2 h-full"},Z={class:"text-white font-bold text-lg",style:{"text-shadow":"0 1px 3px rgba(0,0,0,0.5)"}},ee={class:"text-white/50 text-xs mt-1.5"},te={key:0,class:"mx-3 rounded-xl overflow-hidden",style:{height:"180px",background:"#0d1525"}},le={class:"px-3 py-3"},ae={class:"flex gap-2 mb-3"},ie=["onClick"],se={class:"text-white/75 text-sm"},re={class:"flex items-center gap-2"},oe=["disabled"],ne={class:"text-center mt-2"},ce={class:"text-white/20 text-xs"},xe=V({__name:"GonkaView",setup(de){const _=N("gameCanvas"),g=u(4.16),P=[1,3,10,30,50],r=u(1),o=u(!1),x=u("lite"),C=u("5b18...bb33"),f=u(-1),R={lite:[{multiplier:2,balls:6,prize:"2",circleColor:"#ef4444",circleHighlight:"#f87171",bgColor:"rgba(239,68,68,0.12)"},{multiplier:1.7,balls:6,prize:"1.7",circleColor:"#f97316",circleHighlight:"#fb923c",bgColor:"rgba(249,115,22,0.12)"},{multiplier:1.5,balls:6,prize:"1.5",circleColor:"#eab308",circleHighlight:"#facc15",bgColor:"rgba(234,179,8,0.12)"},{multiplier:1.2,balls:8,prize:"1.2",circleColor:"#22c55e",circleHighlight:"#4ade80",bgColor:"rgba(34,197,94,0.12)"},{multiplier:1,balls:12,prize:"1",circleColor:"#16a34a",circleHighlight:"#4ade80",bgColor:"rgba(22,163,74,0.12)"},{multiplier:.8,balls:12,prize:"0.8",circleColor:"#15803d",circleHighlight:"#22c55e",bgColor:"rgba(21,128,61,0.12)"},{multiplier:.5,balls:11,prize:"0.5",circleColor:"#166534",circleHighlight:"#16a34a",bgColor:"rgba(22,101,52,0.12)"},{multiplier:.3,balls:11,prize:"0.3",circleColor:"#14532d",circleHighlight:"#166534",bgColor:"rgba(20,83,45,0.12)"},{multiplier:.1,balls:28,prize:"0.1",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.15)"}],hard:[{multiplier:3,balls:4,prize:"3",circleColor:"#dc2626",circleHighlight:"#ef4444",bgColor:"rgba(220,38,38,0.12)"},{multiplier:2.5,balls:4,prize:"2.5",circleColor:"#ea580c",circleHighlight:"#f97316",bgColor:"rgba(234,88,12,0.12)"},{multiplier:2,balls:4,prize:"2",circleColor:"#ca8a04",circleHighlight:"#eab308",bgColor:"rgba(202,138,4,0.12)"},{multiplier:1.5,balls:6,prize:"1.5",circleColor:"#16a34a",circleHighlight:"#4ade80",bgColor:"rgba(22,163,74,0.12)"},{multiplier:1,balls:10,prize:"1",circleColor:"#15803d",circleHighlight:"#22c55e",bgColor:"rgba(21,128,61,0.12)"},{multiplier:.5,balls:14,prize:"0.5",circleColor:"#166534",circleHighlight:"#16a34a",bgColor:"rgba(22,101,52,0.12)"},{multiplier:.3,balls:18,prize:"0.3",circleColor:"#14532d",circleHighlight:"#166534",bgColor:"rgba(20,83,45,0.12)"},{multiplier:.1,balls:24,prize:"0.1",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.15)"},{multiplier:.05,balls:40,prize:"0.05",circleColor:"#052e16",circleHighlight:"#14532d",bgColor:"rgba(5,46,22,0.18)"}]},m=L(()=>R[x.value]);function k(s){o.value||(x.value=s)}function D(s){o.value||(r.value=s)}function H(){return Math.random().toString(36).substring(2,6)+"..."+Math.random().toString(36).substring(2,6)}let z=Date.now(),v=null,h=[];async function $(){if(o.value||g.value<r.value)return;o.value=!0,g.value-=r.value,f.value=-1;let s=4;try{z++;const i=await T({amount:r.value,mode:x.value,client_seed:H(),nonce:z,user_id:"anonymous"});s=i.cell_index,C.value=i.server_seed_hash}catch{const i=m.value,w=i.reduce((d,F)=>d+F.balls,0);let l=Math.random()*w;for(let d=0;d<i.length;d++)if(l-=i[d].balls,l<=0){s=d;break}C.value=H()}await new Promise(i=>setTimeout(i,50)),h=[];const e=m.value[s].balls;for(let i=0;i<Math.min(e,8);i++)h.push({x:60+Math.random()*240,y:-10-i*20,vx:(Math.random()-.5)*2,vy:1+Math.random()*.5});const a=Date.now(),n=2e3;function M(){const i=Date.now()-a,w=Math.min(i/n,1);if(h.forEach(l=>{l.vy+=.15,l.y+=l.vy,l.x+=l.vx,l.x<15&&(l.x=15,l.vx=Math.abs(l.vx)*.8),l.x>345&&(l.x=345,l.vx=-Math.abs(l.vx)*.8),l.y>165&&(l.y=165,l.vy=-l.vy*.6,l.vx+=(Math.random()-.5)*1)}),A(),w<1)v=requestAnimationFrame(M);else{f.value=s;const l=m.value[s].multiplier;g.value+=r.value*l,setTimeout(()=>{o.value=!1,f.value=-1,h=[]},1500)}}v=requestAnimationFrame(M)}function A(){const s=_.value;if(!s)return;const e=s.getContext("2d");if(!e)return;e.clearRect(0,0,360,180),e.fillStyle="#0d1525",e.fillRect(0,0,360,180);const a=e.createLinearGradient(0,0,0,180);a.addColorStop(0,"#1e3a5f"),a.addColorStop(1,"#0f2d4a"),e.fillStyle=a,e.fillRect(0,0,12,180),e.fillRect(348,0,12,180),e.fillStyle="#1a2a3a",e.fillRect(12,170,336,10),h.forEach(n=>{e.shadowColor="rgba(34, 211, 238, 0.5)",e.shadowBlur=6,e.fillStyle="#22d3ee",e.beginPath(),e.arc(n.x,n.y,6,0,Math.PI*2),e.fill(),e.shadowBlur=0})}return E(()=>{v&&cancelAnimationFrame(v)}),(s,e)=>(p(),b("div",q,[t("div",U,[e[5]||(e[5]=t("div",{class:"rounded-xl px-4 py-2.5 flex items-center justify-between",style:{background:"linear-gradient(135deg, #ca8a04 0%, #22c55e 60%, #4ade80 100%)"}},[t("span",{class:"text-white font-bold text-sm"},"Giftomania"),t("span",{class:"text-white/70 text-xs font-mono"},"3:04:57:06")],-1)),t("div",X,[e[4]||(e[4]=S('<div class="flex gap-2"><button class="w-9 h-9 rounded-xl flex items-center justify-center" style="background:rgba(255,255,255,0.06);"><svg class="w-4 h-4" fill="none" stroke="rgba(255,255,255,0.45)" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke-width="1.5"></rect><path d="M16 2v4M8 2v4M3 10h18" stroke-width="1.5" stroke-linecap="round"></path></svg></button><div class="flex items-center gap-1 rounded-full px-3 py-1" style="background:rgba(255,255,255,0.08);"><span class="text-white/50 text-xs">Max Prize</span><span class="text-white/40 text-xs">â–¼</span><span class="text-white font-bold text-sm">30</span></div></div>',1)),t("div",J,[t("button",K,[e[2]||(e[2]=t("span",{class:"text-white/45 text-xs"},"â–¼",-1)),t("span",O,c(g.value.toFixed(2)),1)]),e[3]||(e[3]=t("button",{class:"w-7 h-7 rounded-full flex items-center justify-center text-white/50 text-sm",style:{background:"rgba(255,255,255,0.12)"}},"+",-1))])])]),t("div",Q,[t("button",{onClick:e[0]||(e[0]=a=>k("lite")),class:j(["px-6 py-1.5 rounded-full text-sm font-bold transition-all",x.value==="lite"?"bg-white text-black":"bg-white/10 text-white/60"])},"Lite",2),t("button",{onClick:e[1]||(e[1]=a=>k("hard")),class:j(["px-6 py-1.5 rounded-full text-sm font-bold transition-all flex items-center gap-1",x.value==="hard"?"bg-white text-black":"bg-white/10 text-white/60"])},"ðŸ’€ Hard",2)]),t("div",W,[t("div",Y,[(p(!0),b(B,null,G(m.value,(a,n)=>(p(),b("div",{key:n,class:"relative rounded-xl flex flex-col items-center justify-center transition-all",style:y({background:a.bgColor,boxShadow:f.value===n?`0 0 16px ${a.circleColor}66`:"none"})},[t("div",{class:"absolute top-1.5 right-1.5 text-xs font-bold",style:y({color:a.circleColor})}," +"+c(a.prize)+" ðŸ’Ž ",5),t("div",{class:"w-14 h-14 rounded-full flex items-center justify-center",style:y({background:`radial-gradient(circle at 35% 35%, ${a.circleHighlight}, ${a.circleColor})`})},[t("span",Z," X"+c(a.multiplier),1)],4),t("div",ee,c(a.balls)+" Balls",1)],4))),128))])]),o.value?(p(),b("div",te,[t("canvas",{ref_key:"gameCanvas",ref:_,class:"w-full h-full",width:360,height:180},null,512)])):I("",!0),t("div",le,[t("div",ae,[(p(),b(B,null,G(P,a=>t("button",{key:a,onClick:n=>D(a),class:"flex-1 py-2 rounded-lg font-bold flex items-center justify-center gap-1 transition-all",style:y(r.value===a?{background:"rgba(34,211,238,0.2)",border:"1px solid rgba(34,211,238,0.4)"}:{background:"rgba(255,255,255,0.06)",border:"1px solid transparent"})},[t("span",se,c(a),1),e[6]||(e[6]=t("span",{class:"text-white/30 text-xs"},"â–¼",-1))],12,ie)),64))]),t("div",re,[e[7]||(e[7]=S('<button class="flex flex-col items-center gap-0.5"><div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background:rgba(255,255,255,0.06);"><div class="w-5 h-5 rounded-full flex items-center justify-center" style="background:#3b82f6;"><span class="text-white text-xs font-bold">â–¼</span></div></div><span class="text-white/35 text-xs">Swap â˜†</span></button>',1)),t("button",{onClick:$,disabled:o.value||g.value<r.value,class:"flex-1 py-3 rounded-xl font-bold text-sm text-white transition-all disabled:opacity-40 disabled:cursor-not-allowed",style:{background:"linear-gradient(135deg, #22d3ee, #06b6d4)"}},c(o.value?"Playing...":`Play â–¼ ${r.value}`),9,oe),e[8]||(e[8]=t("button",{class:"flex flex-col items-center gap-0.5"},[t("div",{class:"w-10 h-10 rounded-full flex items-center justify-center text-white/50 text-lg",style:{background:"rgba(255,255,255,0.10)"}},"+"),t("span",{class:"text-white/35 text-xs"},"Deposit")],-1))]),t("div",ne,[t("span",ce,"â± Hash: "+c(C.value),1)])])]))}});export{xe as default};
