import{d as R,k as T,c as o,b as t,t as d,F,g as V,s as L,v as _,r,x,o as n,n as h}from"./vue-TADZIX6E.js";import{u as J}from"./index-EKA3P65J.js";import{a as U}from"./index-D5GkNzM3.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"market-view min-h-screen bg-[#1a1a2e]"},G={class:"header-section px-4 pt-3 pb-2"},K={class:"grid grid-cols-2 gap-2 mb-2"},Q={class:"filter-value"},X={key:0},Y={key:1,class:"text-gray-500"},Z={class:"filter-value"},ee={key:0},te={key:1,class:"text-gray-500"},se={class:"grid grid-cols-2 gap-2 mb-3"},le={class:"filter-value"},oe={key:0},ne={key:1,class:"text-gray-500"},ae={class:"filter-value"},re={key:0},ie={key:1,class:"text-gray-500"},de=["onClick"],ue={key:1,class:"flex items-center justify-center py-20"},ve={key:2,class:"px-2 pt-2 pb-24"},ce={class:"grid grid-cols-3 gap-1.5"},me=["onClick"],pe={class:"market-badge"},ke=["onClick"],fe={class:"nft-image-container"},ge=["src","alt"],be={key:1,class:"nft-placeholder"},ye={class:"price-text"},we={key:0,class:"flex justify-center mt-4 mb-4"},_e=["disabled"],xe={key:1,class:"empty-state"},he="https://major.tg/api/v1",Ce=R({__name:"MarketView",setup(Me){const{hapticImpact:u}=J(),v=r(!0),k=r(!1),C=r(!0),y=r(30),w=r(0),c=r(""),i=r(""),m=r(""),p=r(""),a=r(null),M=r("price_asc"),f=r([]),j=x(()=>{const s=new Set;return f.value.forEach(e=>{const l=e.name?.replace(/#\d+$/,"").trim();l&&s.add(l)}),Array.from(s).sort()}),B=x(()=>{let s=[...f.value];return i.value&&(s=s.filter(e=>e.name?.startsWith(i.value))),s}),O=x(()=>a.value==="collection"?[{label:"–í—Å–µ",value:""},...j.value.map(s=>({label:s,value:s}))]:a.value==="model"?[{label:"–õ—é–±–æ–π",value:""},...j.value.map(s=>({label:s,value:s}))]:a.value==="background"?[{label:"–õ—é–±–æ–π",value:""},{label:"–ó–µ–ª—ë–Ω—ã–π",value:"green"},{label:"–°–∏–Ω–∏–π",value:"blue"},{label:"–ö—Ä–∞—Å–Ω—ã–π",value:"red"},{label:"–§–∏–æ–ª–µ—Ç–æ–≤—ã–π",value:"purple"},{label:"–û—Ä–∞–Ω–∂–µ–≤—ã–π",value:"orange"}]:a.value==="symbol"?[{label:"–õ—é–±–æ–π",value:""}]:[]),g=s=>{u("light"),a.value=a.value===s?null:s},S=s=>({collection:c,model:i,background:m,symbol:p})[a.value]?.value===s,z=s=>{const e={collection:c,model:i,background:m,symbol:p};e[a.value]&&(e[a.value].value=s),a.value=null},b=async(s=!1)=>{try{s?k.value=!0:(v.value=!0,w.value=0);const l=(await U.get(`${he}/nft/list/`,{params:{order_by:M.value,limit:y.value,offset:w.value}})).data.items||[];s?f.value.push(...l):f.value=l,C.value=l.length>=y.value}catch(e){console.error("Fetch error:",e)}finally{v.value=!1,k.value=!1}},A=()=>{u("light"),w.value+=y.value,b(!0)},D=s=>s>=1e3?s.toLocaleString("ru-RU",{maximumFractionDigits:0}):s>=100?s.toFixed(0):(s>=10,s.toFixed(2)),H=s=>s<5?"price-green":s<25?"price-blue":s<100?"price-purple":"price-orange",I=()=>{u("medium"),b()},P=()=>{u("light"),c.value="",i.value="",m.value="",p.value="",M.value="price_asc",b()},E=s=>{u("medium"),window.open(`https://major.tg/nft/${s.slug}`,"_blank")},N=s=>{u("heavy")};return T(()=>{b()}),(s,e)=>(n(),o("div",q,[t("div",G,[t("div",K,[t("div",{class:"filter-dropdown",onClick:e[0]||(e[0]=l=>g("collection"))},[e[7]||(e[7]=t("span",{class:"filter-label"},"–ö–æ–ª–ª–µ–∫—Ü–∏–∏",-1)),t("div",Q,[c.value?(n(),o("span",X,d(c.value),1)):(n(),o("span",Y,"–í—Å–µ")),e[6]||(e[6]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),t("div",{class:"filter-dropdown",onClick:e[1]||(e[1]=l=>g("model"))},[e[9]||(e[9]=t("span",{class:"filter-label"},"–ú–æ–¥–µ–ª—å",-1)),t("div",Z,[i.value?(n(),o("span",ee,d(i.value),1)):(n(),o("span",te,"–õ—é–±")),e[8]||(e[8]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),t("div",se,[t("div",{class:"filter-dropdown",onClick:e[2]||(e[2]=l=>g("background"))},[e[11]||(e[11]=t("span",{class:"filter-label"},"–§–æ–Ω",-1)),t("div",le,[m.value?(n(),o("span",oe,d(m.value),1)):(n(),o("span",ne,"–õ—é–±")),e[10]||(e[10]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])]),t("div",{class:"filter-dropdown",onClick:e[3]||(e[3]=l=>g("symbol"))},[e[13]||(e[13]=t("span",{class:"filter-label"},"–°–∏–º–≤–æ–ª",-1)),t("div",ae,[p.value?(n(),o("span",re,d(p.value),1)):(n(),o("span",ie,"–õ—é–±")),e[12]||(e[12]=t("svg",{class:"w-4 h-4 text-gray-400 ml-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))])])]),t("button",{class:"filter-btn w-full mb-2",onClick:I},[...e[14]||(e[14]=[t("span",null,"–§–∏–ª—å—Ç—Ä—ã",-1),t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1)])]),t("button",{class:"reset-btn w-full",onClick:P},[...e[15]||(e[15]=[t("span",null,"–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1),t("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])]),a.value?(n(),o("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=l=>a.value=null)},[t("div",{class:"dropdown-menu",onClick:e[4]||(e[4]=L(()=>{},["stop"]))},[(n(!0),o(F,null,V(O.value,l=>(n(),o("div",{key:l.value,class:h(["dropdown-item",{active:S(l.value)}]),onClick:$=>z(l.value)},d(l.label),11,de))),128))])])):_("",!0),v.value?(n(),o("div",ue,[...e[16]||(e[16]=[t("div",{class:"w-10 h-10 border-3 border-blue-500 border-t-transparent rounded-full animate-spin"},null,-1)])])):(n(),o("div",ve,[t("div",ce,[(n(!0),o(F,null,V(B.value,l=>(n(),o("div",{key:l.address,class:"nft-card",onClick:$=>E(l)},[t("div",pe,[t("span",{class:h(["market-dot",l.market_type||"getgems"])},null,2)]),t("button",{class:"cart-btn",onClick:L($=>N(),["stop"])},[...e[17]||(e[17]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 100 4 2 2 0 000-4z"})],-1)])],8,ke),t("div",fe,[l.image?(n(),o("img",{key:0,src:l.image,alt:l.name,class:"nft-image",loading:"lazy"},null,8,ge)):(n(),o("div",be,[...e[18]||(e[18]=[t("span",{class:"text-4xl"},"üéÅ",-1)])]))]),t("div",{class:h(["price-badge",H(l.min_bid)])},[t("span",ye,d(D(l.min_bid)),1),e[19]||(e[19]=t("span",{class:"ton-icon"},"üíé",-1))],2)],8,me))),128))]),C.value&&!v.value?(n(),o("div",we,[t("button",{onClick:A,disabled:k.value,class:"load-more-btn"},d(k.value?"–ó–∞–≥—Ä—É–∑–∫–∞...":"–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â—ë"),9,_e)])):_("",!0),!v.value&&B.value.length===0?(n(),o("div",xe,[...e[20]||(e[20]=[t("span",{class:"text-5xl mb-3"},"üéÅ",-1),t("p",{class:"text-gray-400"},"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏—Ñ—Ç–æ–≤",-1),t("p",{class:"text-gray-500 text-sm mt-1"},"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1)])])):_("",!0)]))]))}}),Ve=W(Ce,[["__scopeId","data-v-92a1c0a5"]]);export{Ve as default};
