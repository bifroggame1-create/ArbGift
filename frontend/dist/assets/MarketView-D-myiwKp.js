import{d as W,o as X,b as n,e as t,F as C,v as _,x as T,y as F,t as r,n as g,z as G,A as Y,k,r as o,c as Z,a,B as tt,j as et}from"./vue-En_qHaif.js";import{G as st}from"./GiftCard-Dh85a2uD.js";import{u as lt,_ as ot}from"./index-CboS_LLL.js";import{s as at,g as it,a as nt}from"./client-COG1KRRB.js";const rt={class:"market-view"},dt={class:"market-nav"},ut=["onClick"],vt={class:"market-toolbar"},ct={class:"search-box"},ht={class:"sort-content"},pt={class:"sort-value"},gt={class:"view-modes"},ft={class:"sort-menu"},bt=["onClick"],mt={key:1,class:"loading-container"},kt={key:2,class:"gift-grid-container"},wt={key:0,class:"pagination"},yt={class:"page-controls"},xt=["disabled"],Ct={class:"page-info"},_t={class:"current-page"},Bt={class:"total-pages"},Mt=["disabled"],St=["max"],Vt={key:2,class:"empty-state"},$t={class:"market-footer"},Tt={class:"footer-left"},Ft={class:"ton-price"},Gt={class:"price-value"},zt={class:"volume-info"},Lt={class:"volume-value"},w=50,Pt=W({__name:"MarketView",setup(Nt){const y=tt(),{hapticImpact:u}=lt(),z=[{id:"all",label:"–í—Å–µ –ø–æ–¥–∞—Ä–∫–∏"},{id:"collections",label:"–ö–æ–ª–ª–µ–∫—Ü–∏–∏"},{id:"bundles",label:"–ë–∞–Ω–¥–ª—ã"}],B=o("all"),f=o(!0),b=o([]),x=o(""),m=o("listed_at desc"),h=o("large"),p=o(!1),L=o(!1),P=o(!1),N=o(!1),v=o([]),i=o(1),c=o(50),M=o("1.33"),S=o("247.5K"),V=[{value:"listed_at desc",label:"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ"},{value:"listed_at asc",label:"–°–Ω–∞—á–∞–ª–∞ —Å—Ç–∞—Ä—ã–µ"},{value:"price asc",label:"–î–µ—à–µ–≤–ª–µ"},{value:"price desc",label:"–î–æ—Ä–æ–∂–µ"}],A=Z(()=>V.find(s=>s.value===m.value)?.label||"–°–Ω–∞—á–∞–ª–∞ –Ω–æ–≤—ã–µ"),H=s=>{u("light"),B.value=s,s==="collections"?y.push("/collection-list"):s==="bundles"&&y.push("/bundles")},I=s=>{u("light"),m.value=s,p.value=!1,d()};let $;const O=()=>{clearTimeout($),$=setTimeout(()=>{d()},300)},D=()=>{i.value>1&&(i.value--,d())},K=()=>{i.value<c.value&&(i.value++,d())},d=async()=>{f.value=!0;try{const s=(i.value-1)*w,e=x.value?.trim();let l;e?l=await at(e,{limit:w,collection_id:void 0}):l=await it({is_on_sale:!0,sort:m.value,limit:w,offset:s}),b.value=l.items||l||[],l.total&&(c.value=Math.ceil(l.total/w))}catch(s){console.error("Fetch gifts error:",s),b.value=[]}finally{f.value=!1}},U=async()=>{try{const s=await nt();s.volume_24h&&(S.value=j(s.volume_24h)),s.ton_price&&(M.value=s.ton_price.toFixed(2))}catch{}},j=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString(),q=s=>{u("light"),y.push(`/gift/${s.id}`)},E=s=>{u("medium")},Q=s=>{u("light");const e=v.value.indexOf(s.id);e>-1?v.value.splice(e,1):v.value.push(s.id)},R=()=>{u("heavy")};return X(()=>{d(),U()}),(s,e)=>(a(),n("div",rt,[t("nav",dt,[(a(),n(C,null,_(z,l=>t("button",{key:l.id,class:g(["nav-tab",{active:B.value===l.id}]),onClick:J=>H(l.id)},r(l.label),11,ut)),64))]),t("div",vt,[t("button",{class:"toolbar-btn filter-btn",onClick:e[0]||(e[0]=l=>L.value=!0)},[...e[8]||(e[8]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 3H2l8 9.46V19l4 2v-8.54L22 3z"})],-1),t("span",null,"–§–∏–ª—å—Ç—Ä—ã",-1)])]),t("div",ct,[e[9]||(e[9]=t("svg",{class:"search-icon",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("path",{d:"m21 21-4.35-4.35"})],-1)),T(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>x.value=l),type:"text",placeholder:"–ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫",class:"search-input",onInput:O},null,544),[[F,x.value]])]),t("button",{class:"toolbar-btn sort-btn",onClick:e[2]||(e[2]=l=>p.value=!p.value)},[t("div",ht,[e[10]||(e[10]=t("span",{class:"sort-label"},"–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ",-1)),t("span",pt,r(A.value),1)]),e[11]||(e[11]=t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m6 9 6 6 6-6"})],-1))]),t("button",{class:"toolbar-btn activity-btn",onClick:e[3]||(e[3]=l=>P.value=!0)},[...e[12]||(e[12]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})],-1),t("span",null,"–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å",-1)])]),t("div",gt,[t("button",{class:g(["view-btn",{active:h.value==="small"}]),onClick:e[4]||(e[4]=l=>h.value="small")},[...e[13]||(e[13]=[G('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-88485796><rect x="3" y="3" width="7" height="7" data-v-88485796></rect><rect x="14" y="3" width="7" height="7" data-v-88485796></rect><rect x="3" y="14" width="7" height="7" data-v-88485796></rect><rect x="14" y="14" width="7" height="7" data-v-88485796></rect></svg>',1)])],2),t("button",{class:g(["view-btn",{active:h.value==="large"}]),onClick:e[5]||(e[5]=l=>h.value="large")},[...e[14]||(e[14]=[G('<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" data-v-88485796><rect x="3" y="3" width="8" height="8" data-v-88485796></rect><rect x="13" y="3" width="8" height="8" data-v-88485796></rect><rect x="3" y="13" width="8" height="8" data-v-88485796></rect><rect x="13" y="13" width="8" height="8" data-v-88485796></rect></svg>',1)])],2)]),t("button",{class:"toolbar-btn refresh-btn",onClick:d},[...e[15]||(e[15]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M23 4v6h-6"}),t("path",{d:"M1 20v-6h6"}),t("path",{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"})],-1)])])]),p.value?(a(),n("div",{key:0,class:"sort-dropdown",onClick:e[6]||(e[6]=Y(l=>p.value=!1,["self"]))},[t("div",ft,[(a(),n(C,null,_(V,l=>t("button",{key:l.value,class:g(["sort-option",{active:m.value===l.value}]),onClick:J=>I(l.value)},r(l.label),11,bt)),64))])])):k("",!0),f.value?(a(),n("div",mt,[...e[16]||(e[16]=[t("div",{class:"loading-spinner"},null,-1)])])):(a(),n("div",kt,[t("div",{class:g(["gift-grid",h.value])},[(a(!0),n(C,null,_(b.value,l=>(a(),et(st,{key:l.id,gift:l,selectable:N.value,"is-selected":v.value.includes(l.id),onClick:q,onBuy:E,onSelect:Q},null,8,["gift","selectable","is-selected"]))),128))],2),c.value>0?(a(),n("div",wt,[t("div",yt,[t("button",{class:"page-btn",disabled:i.value<=1,onClick:D},[...e[17]||(e[17]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m15 18-6-6 6-6"})],-1)])],8,xt),t("div",Ct,[t("span",_t,r(i.value),1),e[18]||(e[18]=t("span",{class:"page-divider"},"/",-1)),t("span",Bt,r(c.value),1)]),t("button",{class:"page-btn",disabled:i.value>=c.value,onClick:K},[...e[19]||(e[19]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"m9 18 6-6-6-6"})],-1)])],8,Mt)]),T(t("input",{type:"range",class:"page-slider",min:1,max:c.value,"onUpdate:modelValue":e[7]||(e[7]=l=>i.value=l),onChange:d},null,40,St),[[F,i.value,void 0,{number:!0}]])])):k("",!0),v.value.length>0?(a(),n("button",{key:1,class:"bulk-buy-btn",onClick:R},[e[20]||(e[20]=t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"}),t("path",{d:"M3 6h18"}),t("path",{d:"M16 10a4 4 0 0 1-8 0"})],-1)),t("span",null,r(v.value.length),1)])):k("",!0),!f.value&&b.value.length===0?(a(),n("div",Vt,[...e[21]||(e[21]=[t("span",{class:"empty-icon"},"üéÅ",-1),t("p",{class:"empty-text"},"–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏—Ñ—Ç–æ–≤",-1),t("p",{class:"empty-hint"},"–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã",-1)])])):k("",!0)])),t("footer",$t,[t("div",Tt,[t("div",Ft,[e[22]||(e[22]=t("img",{src:"https://ton.org/download/ton_symbol.svg",alt:"TON",class:"ton-logo"},null,-1)),t("span",Gt,r(M.value)+"$",1)]),t("div",zt,[e[23]||(e[23]=t("span",{class:"volume-label"},"–û–±—â–∏–π –æ–±—ä–µ–º 24H",-1)),t("span",Lt,r(S.value),1),e[24]||(e[24]=t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"currentColor",class:"volume-icon"},[t("path",{d:"M12 2L2 7l10 5 10-5-10-5z"})],-1))])]),e[25]||(e[25]=t("div",{class:"footer-right"},[t("button",{class:"footer-btn"},"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"),t("a",{href:"https://t.me/portals_sup",target:"_blank",class:"footer-btn"},"–ü–æ–¥–¥–µ—Ä–∂–∫–∞"),t("a",{href:"https://t.me/portals",target:"_blank",class:"footer-btn"},"Telegram")],-1))])]))}}),Dt=ot(Pt,[["__scopeId","data-v-88485796"]]);export{Dt as default};
