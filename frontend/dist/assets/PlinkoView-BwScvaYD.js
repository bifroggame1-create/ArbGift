import{d as rt,H as ut,o as dt,E as vt,b as c,e as t,F as N,j as R,t as h,x as E,I as K,n as V,B as Q,J as ct,y as ht,h as A,w as I,r as v,c as ft,g as mt,a as f,D as pt}from"./vue-Cjsr3efg.js";import{_ as yt}from"./index-BJMxcBRC.js";const bt={class:"plinko-view"},gt={class:"stars-bg"},wt={class:"plinko-header"},Mt={class:"header-balance"},xt={class:"balance-value"},kt={class:"game-info-bar"},_t={class:"info-item"},Ct={class:"info-value"},Bt={class:"info-item"},St={class:"info-item"},$t={class:"game-container"},Pt={class:"result-multiplier"},Vt={class:"multipliers-row"},At={class:"bet-section"},It={class:"bet-amounts"},Dt=["onClick","disabled"],Ft={class:"action-row"},Ut=["disabled"],Nt=["disabled"],Rt={key:0,class:"loading-spinner"},Et={key:1},Tt=["disabled"],Wt={class:"auto-play"},Ht={class:"auto-label"},Yt=["disabled"],Lt={class:"history-section"},Xt={class:"history-header"},qt={class:"history-list"},zt={class:"history-mult"},Gt={class:"history-amount"},Ot={class:"bottom-nav"},b=340,M=280,Z=4,x=5,jt=.4,T=.5,Jt=500,Kt=rt({__name:"PlinkoView",setup(Qt){const g=v(5.16),z=v(48291),m=v(!1),D=v(!1),G=v(0),w=v(0),F=v("medium"),k=v(12),tt=[.5,1,2,5,10],u=v(1),U=v(!1),B=v(10),W=v([]),_=v(null),et={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},S=ft(()=>{const s=et[F.value];return s[k.value]||s[12]});let l=null,$=[],H=null,Y=0,L=0;const st=s=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),lt=s=>s>=10?"high":s>=2?"medium":s>=1?"low":"lose",ot=()=>{u.value=Math.max(.1,u.value/2)},at=()=>{u.value=Math.min(g.value,u.value*2)},X=()=>{$=[];const s=k.value,e=40,o=(M-50-e)/s,a=b/2;for(let n=0;n<s;n++){const i=n+3,y=20,d=a-(i-1)*y/2;for(let p=0;p<i;p++)$.push({x:d+p*y,y:e+n*o})}},O=async()=>{if(m.value||g.value<u.value)return;m.value=!0,D.value=!1,g.value-=u.value,z.value++;const s=S.value,e=s.map(a=>1/(a+.1)),r=e.reduce((a,n)=>a+n,0);let o=Math.random()*r;Y=Math.floor(s.length/2);for(let a=0;a<e.length;a++)if(o-=e[a],o<=0){Y=a;break}l={x:b/2+(Math.random()-.5)*20,y:15,vx:(Math.random()-.5)*3,vy:3},L=0,X(),j()},j=()=>{if(!l)return;const s=_.value;if(!s)return;const e=s.getContext("2d");if(!e)return;L++,L>Jt&&(l.y=M-25,l.vy=0),l.vy+=jt,l.x+=l.vx,l.y+=l.vy;const r=12;l.vx=Math.max(-r,Math.min(r,l.vx)),l.vy=Math.max(-r,Math.min(r,l.vy));for(const o of $){const a=l.x-o.x,n=l.y-o.y,i=Math.sqrt(a*a+n*n),y=Z+x;if(i<y&&i>.1){const d=a/i,p=n/i,P=y-i+1;l.x+=d*P,l.y+=p*P;const C=l.vx*d+l.vy*p;if(C<0&&(l.vx-=2*C*d*T,l.vy-=2*C*p*T),l.vx+=(Math.random()-.5)*1.5,l.y>M*.5){const nt=S.value,J=b/nt.length,it=Y*J+J/2;l.vx+=(it-l.x)*.005}Math.abs(l.vy)<1&&(l.vy=2)}}if(l.x<x&&(l.x=x,l.vx=Math.abs(l.vx)*T),l.x>b-x&&(l.x=b-x,l.vx=-Math.abs(l.vx)*T),q(e),l.y>M-30){const o=S.value,a=b/o.length,n=Math.floor(l.x/a),i=Math.max(0,Math.min(o.length-1,n));G.value=o[i],w.value=u.value*o[i]-u.value,g.value+=u.value*o[i],W.value.unshift({multiplier:o[i],win:w.value,bet:u.value}),D.value=!0,l=null,m.value=!1,setTimeout(()=>{D.value=!1,U.value&&B.value>0&&(B.value--,B.value>0&&g.value>=u.value&&O())},1500);return}H=requestAnimationFrame(j)},q=s=>{s.fillStyle="#0a1628",s.fillRect(0,0,b,M);const e=k.value;for(let n=0;n<$.length;n++){const i=$[n],d=Math.floor((-3+Math.sqrt(9+8*n))/2)/e,p=Math.round(59+-25*d),P=Math.round(130+81*d),C=Math.round(246+-8*d);s.fillStyle=`rgb(${p},${P},${C})`,s.shadowColor=`rgba(${p},${P},${C},0.5)`,s.shadowBlur=6,s.beginPath(),s.arc(i.x,i.y,Z,0,Math.PI*2),s.fill()}s.shadowBlur=0,l&&(s.fillStyle="#ec4899",s.shadowColor="rgba(236,72,153,0.7)",s.shadowBlur=12,s.beginPath(),s.arc(l.x,l.y,x,0,Math.PI*2),s.fill(),s.shadowBlur=0,s.fillStyle="rgba(255,255,255,0.4)",s.beginPath(),s.arc(l.x-2,l.y-2,x*.4,0,Math.PI*2),s.fill());const r=S.value,o=b/r.length,a=M-28;r.forEach((n,i)=>{const y=i*o;let d="rgba(99,102,241,0.3)";n>=10?d="rgba(34,197,94,0.4)":n>=2?d="rgba(34,211,238,0.3)":n<1&&(d="rgba(239,68,68,0.3)"),s.fillStyle=d,s.fillRect(y+1,a,o-2,26),s.fillStyle="#fff",s.font="bold 9px sans-serif",s.textAlign="center",s.fillText(`${n}x`,y+o/2,a+16)})};return ut([F,k],()=>{if(X(),_.value){const s=_.value.getContext("2d");s&&q(s)}}),dt(()=>{if(X(),_.value){const s=_.value.getContext("2d");s&&q(s)}}),vt(()=>{H&&cancelAnimationFrame(H)}),(s,e)=>{const r=mt("router-link");return f(),c("div",bt,[t("div",gt,[(f(),c(N,null,R(20,o=>t("div",{key:o,class:"star",style:pt(st())},null,4)),64))]),t("header",wt,[t("button",{class:"header-back",onClick:e[0]||(e[0]=o=>s.$router.push("/solo"))},[...e[6]||(e[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),e[9]||(e[9]=t("div",{class:"header-title"},[t("span",{class:"title-main"},"Plinko"),t("span",{class:"title-badge"},"x1000")],-1)),t("div",Mt,[e[7]||(e[7]=t("span",{class:"balance-icon"},"ðŸ’Ž",-1)),t("span",xt,h(g.value.toFixed(2)),1),e[8]||(e[8]=t("button",{class:"balance-add"},"+",-1))])]),t("div",kt,[t("div",_t,[e[10]||(e[10]=t("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),t("span",Ct,"#"+h(z.value),1)]),t("div",Bt,[e[12]||(e[12]=t("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),E(t("select",{"onUpdate:modelValue":e[1]||(e[1]=o=>F.value=o),class:"risk-select"},[...e[11]||(e[11]=[t("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),t("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),t("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[K,F.value]])]),t("div",St,[e[14]||(e[14]=t("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),E(t("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),class:"rows-select"},[...e[13]||(e[13]=[t("option",{value:8},"8",-1),t("option",{value:12},"12",-1),t("option",{value:16},"16",-1)])],512),[[K,k.value]])])]),t("div",$t,[t("canvas",{ref_key:"gameCanvas",ref:_,class:"game-canvas",width:b,height:M},null,512),D.value?(f(),c("div",{key:0,class:V(["result-overlay",{win:w.value>0,lose:w.value<=0}])},[t("div",Pt,h(G.value)+"x",1),t("div",{class:V(["result-amount",{positive:w.value>0}])},h(w.value>0?"+":"")+h(w.value.toFixed(2))+" TON ",3)],2)):Q("",!0)]),t("div",Vt,[(f(!0),c(N,null,R(S.value,(o,a)=>(f(),c("div",{key:a,class:V(["mult-slot",lt(o)])},h(o)+"x ",3))),128))]),t("div",At,[t("div",It,[(f(),c(N,null,R(tt,o=>t("button",{key:o,class:V(["bet-btn",{active:u.value===o}]),onClick:a=>u.value=o,disabled:m.value},h(o)+" ðŸ’Ž ",11,Dt)),64))]),t("div",Ft,[t("button",{class:"btn-half",onClick:ot,disabled:m.value},"Â½",8,Ut),t("button",{class:"btn-play",onClick:O,disabled:m.value||g.value<u.value},[m.value?(f(),c("span",Rt)):(f(),c("span",Et,h(m.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${u.value} TON`),1))],8,Nt),t("button",{class:"btn-double",onClick:at,disabled:m.value},"2x",8,Tt)]),t("div",Wt,[t("label",Ht,[E(t("input",{type:"checkbox","onUpdate:modelValue":e[3]||(e[3]=o=>U.value=o),disabled:m.value},null,8,Yt),[[ct,U.value]]),e[15]||(e[15]=t("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),U.value?E((f(),c("input",{key:0,type:"number","onUpdate:modelValue":e[4]||(e[4]=o=>B.value=o),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[ht,B.value,void 0,{number:!0}]]):Q("",!0)])]),t("div",Lt,[t("div",Xt,[e[16]||(e[16]=t("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),t("span",{class:"history-clear",onClick:e[5]||(e[5]=o=>W.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),t("div",qt,[(f(!0),c(N,null,R(W.value.slice(0,10),(o,a)=>(f(),c("div",{key:a,class:V(["history-item",{win:o.win>0}])},[t("span",zt,h(o.multiplier)+"x",1),t("span",Gt,h(o.win>0?"+":"")+h(o.win.toFixed(2)),1)],2))),128))])]),t("nav",Ot,[A(r,{to:"/pvp",class:"nav-item"},{default:I(()=>[...e[17]||(e[17]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4l4 4m8 8l4 4M4 20l4-4m8-8l4-4M12 12l-8 8m16 0l-8-8m0 0l8-8M4 4l8 8"})],-1),t("span",null,"ÐŸÐ²ÐŸ",-1)])]),_:1}),A(r,{to:"/solo",class:"nav-item active"},{default:I(()=>[...e[18]||(e[18]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),t("span",null,"Ð¡Ð¾Ð»Ð¾",-1)])]),_:1}),A(r,{to:"/inventory",class:"nav-item"},{default:I(()=>[...e[19]||(e[19]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("path",{d:"M3 9h18M9 21V9"})],-1),t("span",null,"Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ",-1)])]),_:1}),A(r,{to:"/shop",class:"nav-item"},{default:I(()=>[...e[20]||(e[20]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),t("span",null,"ÐœÐ°Ð³Ð°Ð·Ð¸Ð½",-1)])]),_:1}),A(r,{to:"/profile",class:"nav-item"},{default:I(()=>[...e[21]||(e[21]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1),t("span",null,"ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ",-1)])]),_:1})])])}}}),ee=yt(Kt,[["__scopeId","data-v-408a0f11"]]);export{ee as default};
