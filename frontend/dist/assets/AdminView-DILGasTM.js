import{d as Y,j as Z,c as l,b as e,F as b,f,t as i,y as m,B as u,C as c,K as L,n as h,r as v,o as a}from"./vue-DAmU7BeK.js";import{_ as ee}from"./index-OznhHCUl.js";const te={class:"admin-panel"},se={class:"admin-header"},oe={class:"header-left"},ne={class:"tabs"},le=["onClick"],ie={key:0,class:"section"},ae={class:"stats-grid"},de={class:"stat-card green"},re={class:"stat-value"},ue={class:"stat-card blue"},ce={class:"stat-value"},ve={class:"stat-card yellow"},pe={class:"stat-value"},me={class:"stat-card red"},_e={class:"stat-value"},ge={key:1,class:"section"},be={class:"game-header"},fe={class:"game-name"},ye={class:"game-controls"},he={class:"control-row"},ke=["onUpdate:modelValue","onChange"],we={class:"control-row"},Ce=["onUpdate:modelValue","onChange"],Te={class:"control-row"},Se=["onUpdate:modelValue","onChange"],Ue={class:"control-row"},Oe=["onUpdate:modelValue","onChange"],Pe={class:"control-row"},$e={class:"toggle-group"},xe=["onClick"],Ve=["onUpdate:modelValue","onChange"],Ae={class:"control-row actions"},Ne=["onClick"],Ee=["onClick"],Fe={key:2,class:"section"},Le={class:"create-form"},De={class:"form-grid"},Ie={class:"form-field"},Me={class:"form-field"},Re=["value"],Be={class:"form-field"},Ge={class:"form-field"},Je={class:"form-field"},We={class:"form-field"},qe={class:"form-field"},je={class:"form-field"},ze={class:"quick-target-actions"},He={class:"inline-form"},Qe={class:"targets-list"},Ke={class:"target-info"},Xe={class:"target-user"},Ye={class:"target-game"},Ze={class:"target-uses"},et=["onClick"],tt={key:0,class:"empty"},st={key:3,class:"section"},ot={class:"override-card"},nt={class:"inline-form"},lt={class:"override-card"},it={class:"slot-grid"},at=["onClick"],dt={class:"inline-form"},rt={class:"overrides-list"},ut={class:"override-game"},ct={key:0,class:"override-value"},vt={key:1,class:"override-value"},pt={class:"override-status"},mt={key:0,class:"empty"},_t={key:4,class:"section"},gt={class:"audit-time"},bt={class:"audit-action"},ft={class:"audit-desc"},yt={key:0,class:"empty"},ht={key:5,class:"status-bar"},kt="/api",wt=Y({__name:"AdminView",setup(Ct){const g=v("dashboard"),D=[{id:"dashboard",label:"Dashboard",icon:"ðŸ“Š"},{id:"settings",label:"Settings",icon:"âš™ï¸"},{id:"targets",label:"Targets",icon:"ðŸŽ¯"},{id:"rounds",label:"Rounds",icon:"ðŸŽ²"},{id:"audit",label:"Audit",icon:"ðŸ“‹"}],I=["plinko","trading","roulette","aviator","pvp","upgrade","lucky","gonka","ball_escape","rocket"],A=["ðŸ’€","ðŸŽ","2.0x","0.7x","0.6x","0.7x","2.0x","ðŸŽ","ðŸ’€"],k=v({}),N=v([]),T=v([]),$=v([]),x=v([]),n=v({user_id:"",game_type:"",target_mode:"win",forced_multiplier:null,custom_rtp:null,uses:1,active_hours:null,note:""}),_=v(""),S=v(1.5),w=v(4),U=v(""),O=v(""),E=v("success");function p(o,t="success"){O.value=o,E.value=t,setTimeout(()=>{O.value=""},3e3)}function M(o){return o?new Date(o).toLocaleString("ru-RU"):""}async function r(o,t){try{return await(await fetch(kt+o,{headers:{"Content-Type":"application/json"},...t})).json()}catch(s){return console.error("API error:",s),p("API Error: "+s.message,"error"),null}}async function R(){const o=await r("/admin/stats");o&&(k.value=o)}async function P(){const o=await r("/admin/settings");o&&(N.value=o.settings||[])}async function C(){const o=await r("/admin/targets");o&&(T.value=o.targets||[])}async function V(){const o=await r("/admin/rounds/trading"),t=await r("/admin/rounds/plinko");$.value=[...o?.overrides||[],...t?.overrides||[]]}async function B(){const o=await r("/admin/audit");o&&(x.value=o.logs||[])}async function y(o){await r(`/admin/settings/${o.game_type}`,{method:"PUT",body:JSON.stringify({rtp_percent:o.rtp_percent,house_edge_percent:o.house_edge_percent,min_bet:o.min_bet,max_bet:o.max_bet,rigged_mode:o.rigged_mode,rigged_win_rate:o.rigged_win_rate})}),p(`${o.game_type} settings updated`)}async function F(o,t){await r(`/admin/settings/${o.game_type}/toggle?enabled=${t}`,{method:"POST"}),o.is_enabled=t,p(`${o.game_type} ${t?"enabled":"disabled"}`)}async function G(o){o.rigged_mode=!o.rigged_mode,await y(o)}async function J(){const o={user_id:n.value.user_id,target_mode:n.value.target_mode,uses:n.value.uses};n.value.game_type&&(o.game_type=n.value.game_type),n.value.forced_multiplier&&(o.forced_multiplier=n.value.forced_multiplier),n.value.custom_rtp&&(o.custom_rtp=n.value.custom_rtp),n.value.active_hours&&(o.active_hours=n.value.active_hours),n.value.note&&(o.note=n.value.note),(await r("/admin/targets",{method:"POST",body:JSON.stringify(o)}))?.status==="ok"&&(p("Target created"),await C())}async function W(){_.value&&(await r("/admin/targets/force-win",{method:"POST",body:JSON.stringify({user_id:_.value,uses:1})}),p(`Force WIN for ${_.value}`),await C())}async function q(){_.value&&(await r("/admin/targets/force-lose",{method:"POST",body:JSON.stringify({user_id:_.value,uses:1})}),p(`Force LOSE for ${_.value}`,"error"),await C())}async function j(o){await r(`/admin/targets/${o}`,{method:"DELETE"}),p("Target deleted"),await C()}async function z(){(await r("/admin/rounds/force-crash",{method:"POST",body:JSON.stringify({crash_point:S.value})}))?.status==="ok"&&(p(`Next crash at ${S.value}x`),await V())}async function H(){const o=`/admin/rounds/force-plinko-slot?slot=${w.value}`+(U.value?`&user_id=${U.value}`:"");(await r(o,{method:"POST"}))?.status==="ok"&&(p(`Plinko â†’ slot ${w.value} (${A[w.value]})`),await V())}async function Q(){await r("/admin/emergency/stop-all",{method:"POST"}),p("ALL GAMES STOPPED","error"),await P()}async function K(){await r("/admin/emergency/resume-all",{method:"POST"}),p("All games resumed"),await P()}async function X(){await r("/admin/settings/init-defaults",{method:"POST"}),p("Default settings initialized"),await P()}return Z(async()=>{await Promise.all([R(),P(),C(),V(),B()])}),(o,t)=>(a(),l("div",te,[e("div",se,[e("div",oe,[e("button",{class:"back-btn",onClick:t[0]||(t[0]=s=>o.$router.back())},[...t[12]||(t[12]=[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[13]||(t[13]=e("h1",null,"Admin Panel",-1))]),t[14]||(t[14]=e("div",{class:"header-badge"},"GAMBLING CONTROL",-1))]),e("div",ne,[(a(),l(b,null,f(D,s=>e("button",{key:s.id,class:h(["tab",{active:g.value===s.id}]),onClick:d=>g.value=s.id},i(s.icon)+" "+i(s.label),11,le)),64))]),g.value==="dashboard"?(a(),l("div",ie,[e("div",ae,[e("div",de,[t[15]||(t[15]=e("div",{class:"stat-label"},"Today Profit",-1)),e("div",re,i(k.value.today?.profit?.toFixed(2)||"0.00")+" TON",1)]),e("div",ue,[t[16]||(t[16]=e("div",{class:"stat-label"},"Today Volume",-1)),e("div",ce,i(k.value.today?.volume?.toFixed(2)||"0.00")+" TON",1)]),e("div",ve,[t[17]||(t[17]=e("div",{class:"stat-label"},"Today Bets",-1)),e("div",pe,i(k.value.today?.bets||0),1)]),e("div",me,[t[18]||(t[18]=e("div",{class:"stat-label"},"Week Profit",-1)),e("div",_e,i(k.value.week?.profit?.toFixed(2)||"0.00")+" TON",1)])]),t[19]||(t[19]=e("h2",{class:"section-title"},"Quick Actions",-1)),e("div",{class:"quick-actions"},[e("button",{class:"action-btn red",onClick:Q},"STOP ALL GAMES"),e("button",{class:"action-btn green",onClick:K},"RESUME ALL"),e("button",{class:"action-btn blue",onClick:X},"Init Default Settings")])])):m("",!0),g.value==="settings"?(a(),l("div",ge,[t[25]||(t[25]=e("h2",{class:"section-title"},"Game Settings",-1)),(a(!0),l(b,null,f(N.value,s=>(a(),l("div",{key:s.game_type,class:"game-card"},[e("div",be,[e("span",fe,i(s.game_type.toUpperCase()),1),e("div",{class:h(["game-status",{enabled:s.is_enabled,disabled:!s.is_enabled}])},i(s.is_enabled?"ON":"OFF"),3)]),e("div",ye,[e("div",he,[t[20]||(t[20]=e("label",null,"RTP %",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.rtp_percent=d,min:"50",max:"99",step:"0.5",onChange:d=>y(s)},null,40,ke),[[c,s.rtp_percent,void 0,{number:!0}]])]),e("div",we,[t[21]||(t[21]=e("label",null,"House Edge %",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.house_edge_percent=d,min:"1",max:"50",step:"0.5",onChange:d=>y(s)},null,40,Ce),[[c,s.house_edge_percent,void 0,{number:!0}]])]),e("div",Te,[t[22]||(t[22]=e("label",null,"Min Bet",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.min_bet=d,min:"0.01",step:"0.1",onChange:d=>y(s)},null,40,Se),[[c,s.min_bet,void 0,{number:!0}]])]),e("div",Ue,[t[23]||(t[23]=e("label",null,"Max Bet",-1)),u(e("input",{type:"number","onUpdate:modelValue":d=>s.max_bet=d,min:"1",step:"1",onChange:d=>y(s)},null,40,Oe),[[c,s.max_bet,void 0,{number:!0}]])]),e("div",Pe,[t[24]||(t[24]=e("label",null,"Rigged Mode",-1)),e("div",$e,[e("button",{class:h(["toggle-btn",{active:s.rigged_mode}]),onClick:d=>G(s)},i(s.rigged_mode?"ON":"OFF"),11,xe),s.rigged_mode?u((a(),l("input",{key:0,type:"number","onUpdate:modelValue":d=>s.rigged_win_rate=d,min:"0",max:"1",step:"0.05",placeholder:"Win Rate",onChange:d=>y(s)},null,40,Ve)),[[c,s.rigged_win_rate,void 0,{number:!0}]]):m("",!0)])]),e("div",Ae,[e("button",{class:"btn-small green",onClick:d=>F(s,!0)},"Enable",8,Ne),e("button",{class:"btn-small red",onClick:d=>F(s,!1)},"Disable",8,Ee)])])]))),128))])):m("",!0),g.value==="targets"?(a(),l("div",Fe,[t[38]||(t[38]=e("h2",{class:"section-title"},"User Targeting",-1)),e("div",Le,[t[36]||(t[36]=e("h3",null,"New Target",-1)),e("div",De,[e("div",Ie,[t[26]||(t[26]=e("label",null,"User ID (Telegram)",-1)),u(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>n.value.user_id=s),placeholder:"123456789"},null,512),[[c,n.value.user_id]])]),e("div",Me,[t[28]||(t[28]=e("label",null,"Game",-1)),u(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>n.value.game_type=s)},[t[27]||(t[27]=e("option",{value:""},"All Games",-1)),(a(),l(b,null,f(I,s=>e("option",{key:s,value:s},i(s),9,Re)),64))],512),[[L,n.value.game_type]])]),e("div",Be,[t[30]||(t[30]=e("label",null,"Mode",-1)),u(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>n.value.target_mode=s)},[...t[29]||(t[29]=[e("option",{value:"win"},"FORCE WIN",-1),e("option",{value:"lose"},"FORCE LOSE",-1),e("option",{value:"specific"},"SPECIFIC RESULT",-1)])],512),[[L,n.value.target_mode]])]),e("div",Ge,[t[31]||(t[31]=e("label",null,"Forced Multiplier",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>n.value.forced_multiplier=s),placeholder:"2.5"},null,512),[[c,n.value.forced_multiplier,void 0,{number:!0}]])]),e("div",Je,[t[32]||(t[32]=e("label",null,"Custom RTP %",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>n.value.custom_rtp=s),placeholder:"97"},null,512),[[c,n.value.custom_rtp,void 0,{number:!0}]])]),e("div",We,[t[33]||(t[33]=e("label",null,"Uses (-1 = infinite)",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=s=>n.value.uses=s)},null,512),[[c,n.value.uses,void 0,{number:!0}]])]),e("div",qe,[t[34]||(t[34]=e("label",null,"Active Hours",-1)),u(e("input",{type:"number","onUpdate:modelValue":t[7]||(t[7]=s=>n.value.active_hours=s),placeholder:"24"},null,512),[[c,n.value.active_hours,void 0,{number:!0}]])]),e("div",je,[t[35]||(t[35]=e("label",null,"Note",-1)),u(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>n.value.note=s),placeholder:"Admin note..."},null,512),[[c,n.value.note]])])]),e("button",{class:"action-btn blue",onClick:J},"Create Target")]),e("div",ze,[t[37]||(t[37]=e("h3",null,"Quick",-1)),e("div",He,[u(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>_.value=s),placeholder:"User ID"},null,512),[[c,_.value]]),e("button",{class:"btn-small green",onClick:W},"Force Win"),e("button",{class:"btn-small red",onClick:q},"Force Lose")])]),e("div",Qe,[e("h3",null,"Active Targets ("+i(T.value.length)+")",1),(a(!0),l(b,null,f(T.value,s=>(a(),l("div",{key:s.id,class:"target-item"},[e("div",Ke,[e("span",Xe,i(s.user_id),1),e("span",{class:h(["target-mode",s.target_mode])},i(s.target_mode.toUpperCase()),3),e("span",Ye,i(s.game_type||"ALL"),1),e("span",Ze,i(s.uses_remaining===-1?"âˆž":s.uses_remaining)+" uses left",1)]),e("button",{class:"btn-small red",onClick:d=>j(s.id)},"Delete",8,et)]))),128)),T.value.length===0?(a(),l("div",tt,"No active targets")):m("",!0)])])):m("",!0),g.value==="rounds"?(a(),l("div",st,[t[44]||(t[44]=e("h2",{class:"section-title"},"Round Override",-1)),e("div",ot,[t[39]||(t[39]=e("h3",null,"Trading / Crash",-1)),t[40]||(t[40]=e("p",{class:"hint"},"Force next round crash point",-1)),e("div",nt,[u(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=s=>S.value=s),placeholder:"1.50",min:"1",step:"0.01"},null,512),[[c,S.value,void 0,{number:!0}]]),e("button",{class:"action-btn yellow",onClick:z},"Set Crash Point")])]),e("div",lt,[t[41]||(t[41]=e("h3",null,"Plinko",-1)),t[42]||(t[42]=e("p",{class:"hint"},"Force next drop landing slot",-1)),e("div",it,[(a(),l(b,null,f(A,(s,d)=>e("button",{key:d,class:h(["slot-btn",{selected:w.value===d}]),onClick:Tt=>w.value=d},i(s),11,at)),64))]),e("div",dt,[u(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>U.value=s),placeholder:"Target User ID (optional)"},null,512),[[c,U.value]]),e("button",{class:"action-btn yellow",onClick:H},"Set Slot")])]),e("div",rt,[t[43]||(t[43]=e("h3",null,"Pending Overrides",-1)),(a(!0),l(b,null,f($.value,s=>(a(),l("div",{key:s.id,class:"override-item"},[e("span",ut,i(s.game_type),1),s.forced_crash_point?(a(),l("span",ct,"Crash: "+i(s.forced_crash_point)+"x",1)):m("",!0),s.forced_slot!==null?(a(),l("span",vt,"Slot: "+i(s.forced_slot),1)):m("",!0),e("span",pt,i(s.is_used?"USED":"PENDING"),1)]))),128)),$.value.length===0?(a(),l("div",mt,"No pending overrides")):m("",!0)])])):m("",!0),g.value==="audit"?(a(),l("div",_t,[t[45]||(t[45]=e("h2",{class:"section-title"},"Audit Log",-1)),(a(!0),l(b,null,f(x.value,s=>(a(),l("div",{key:s.id,class:"audit-item"},[e("div",gt,i(M(s.timestamp)),1),e("div",bt,i(s.action),1),e("div",ft,i(s.description),1)]))),128)),x.value.length===0?(a(),l("div",yt,"No audit logs")):m("",!0)])):m("",!0),O.value?(a(),l("div",ht,[e("span",{class:h(["status-text",E.value])},i(O.value),3)])):m("",!0)]))}}),Ot=ee(wt,[["__scopeId","data-v-11406fad"]]);export{Ot as default};
