import{d as ht,I as ft,o as pt,E as mt,b as p,e as t,F as X,j as z,t as m,x as O,J as st,n as E,B as ot,K as bt,y as gt,h as F,w as G,r as c,c as yt,g as wt,a as b,D as _t}from"./vue-CvSvTxiL.js";import{_ as Mt}from"./index-B49LKGW4.js";const kt={class:"plinko-view"},Ct={class:"stars-bg"},xt={class:"plinko-header"},St={class:"header-balance"},Bt={class:"balance-value"},Pt={class:"game-info-bar"},$t={class:"info-item"},At={class:"info-value"},It={class:"info-item"},Tt={class:"info-item"},Vt={class:"game-container"},Ut={class:"result-multiplier"},Et={class:"multipliers-row"},Ft={class:"bet-section"},Gt={class:"bet-amounts"},Rt=["onClick","disabled"],Dt={class:"action-row"},Ht=["disabled"],Nt=["disabled"],Wt={key:0,class:"loading-spinner"},Yt={key:1},Lt=["disabled"],qt={class:"auto-play"},Xt={class:"auto-label"},zt=["disabled"],Ot={class:"history-section"},jt={class:"history-header"},Jt={class:"history-list"},Kt={class:"history-mult"},Qt={class:"history-amount"},Zt={class:"bottom-nav"},f=340,C=280,at=5,_=6,te=.15,j=.6,ee=800,R=28,P=35,nt=0,le=ht({__name:"PlinkoView",setup(se){const M=c(5.16),tt=c(48291),g=c(!1),D=c(!1),et=c(0),k=c(0),H=c("medium"),x=c(12),it=[.5,1,2,5,10],d=c(1),N=c(!1),$=c(10),J=c([]),S=c(null),rt={low:{8:[5.6,2.1,1.1,1,.5,1,1.1,2.1,5.6],12:[8.9,3,1.4,1.1,1,.5,1,1.1,1.4,3,8.9],16:[16,9,2,1.4,1.1,1,.5,1,1.1,1.4,2,9,16]},medium:{8:[13,3,1.3,.7,.4,.7,1.3,3,13],12:[33,11,4,2,1.1,.6,.3,.6,1.1,2,4,11,33],16:[110,41,10,5,3,1.5,1,.5,.3,.5,1,1.5,3,5,10,41,110]},high:{8:[29,4,1.5,.3,.2,.3,1.5,4,29],12:[170,24,8.1,2,.7,.2,.2,.7,2,8.1,24,170],16:[1e3,130,26,9,4,2,.2,.2,.2,.2,2,4,9,26,130,1e3]}},A=yt(()=>{const e=rt[H.value];return e[x.value]||e[12]});let y="in_tube",K=0,s=null,I=[],T=null,Q=0,W=0;const ut=e=>({left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,width:`${Math.random()*2+1}px`,height:`${Math.random()*2+1}px`,animationDelay:`${Math.random()*3}s`,animationDuration:`${Math.random()*2+2}s`}),dt=e=>e>=10?"high":e>=2?"medium":e>=1?"low":"lose",vt=()=>{d.value=Math.max(.1,d.value/2)},ct=()=>{d.value=Math.min(M.value,d.value*2)},Z=()=>{I=[];const e=x.value,l=P+15,o=(C-45-l)/e,a=f/2;for(let v=0;v<e;v++){const r=v+3,w=22,n=a-(r-1)*w/2;for(let u=0;u<r;u++)I.push({x:n+u*w,y:l+v*o})}},lt=async()=>{if(g.value||M.value<d.value)return;g.value=!0,D.value=!1,M.value-=d.value,tt.value++;const e=A.value,l=e.map(a=>1/(a+.1)),i=l.reduce((a,v)=>a+v,0);let o=Math.random()*i;Q=Math.floor(e.length/2);for(let a=0;a<l.length;a++)if(o-=l[a],o<=0){Q=a;break}s={x:f/2,y:8,vx:0,vy:0},W=0,y="in_tube",K=0,Z(),Y()},Y=()=>{if(!s)return;const e=S.value;if(!e)return;const l=e.getContext("2d");if(!l)return;if(W++,y==="in_tube"){K++,K>30&&(y="dropping",s.vy=.5,s.vx=(Math.random()-.5)*.5),V(l),T=requestAnimationFrame(Y);return}if(y==="dropping"){s.vy+=.08,s.y+=s.vy,s.y>P+10&&(y="falling"),V(l),T=requestAnimationFrame(Y);return}W>ee&&(s.y=C-25,s.vy=0),s.vy+=te,s.x+=s.vx,s.y+=s.vy;const i=8;s.vx=Math.max(-i,Math.min(i,s.vx)),s.vy=Math.max(-i,Math.min(i,s.vy));for(const o of I){const a=s.x-o.x,v=s.y-o.y,r=Math.sqrt(a*a+v*v),w=at+_;if(r<w&&r>.1){const n=a/r,u=v/r,B=w-r+.5;s.x+=n*B,s.y+=u*B;const h=s.vx*n+s.vy*u;if(h<0&&(s.vx-=2*h*n*j*1.2,s.vy-=2*h*u*j*.8,s.vx*=.95,s.vy*=.95),s.vx+=(Math.random()-.5)*1,s.y>C*.6){const L=A.value,U=f/L.length,q=Q*U+U/2;s.vx+=(q-s.x)*.003}s.vy<.5&&(s.vy=.8)}}if(s.x<_&&(s.x=_,s.vx=Math.abs(s.vx)*j),s.x>f-_&&(s.x=f-_,s.vx=-Math.abs(s.vx)*j),V(l),s.y>C-30){const o=A.value,a=f/o.length,v=Math.floor(s.x/a),r=Math.max(0,Math.min(o.length-1,v));et.value=o[r],k.value=d.value*o[r]-d.value,M.value+=d.value*o[r],J.value.unshift({multiplier:o[r],win:k.value,bet:d.value}),D.value=!0,s=null,g.value=!1,setTimeout(()=>{D.value=!1,N.value&&$.value>0&&($.value--,$.value>0&&M.value>=d.value&&lt())},1500);return}T=requestAnimationFrame(Y)},V=e=>{e.fillStyle="#0a1628",e.fillRect(0,0,f,C);const l=f/2-R/2,i=e.createLinearGradient(l,0,l+R,0);i.addColorStop(0,"#374151"),i.addColorStop(.3,"#4b5563"),i.addColorStop(.7,"#4b5563"),i.addColorStop(1,"#374151"),e.fillStyle=i,e.beginPath(),e.roundRect(l,nt,R,P,[0,0,8,8]),e.fill();const o=e.createLinearGradient(l+4,0,l+R-4,0);o.addColorStop(0,"rgba(0,0,0,0.4)"),o.addColorStop(.5,"rgba(0,0,0,0.1)"),o.addColorStop(1,"rgba(0,0,0,0.4)"),e.fillStyle=o,e.fillRect(l+3,nt,R-6,P-4),(y==="dropping"||y==="in_tube")&&(e.shadowColor="rgba(236, 72, 153, 0.5)",e.shadowBlur=10,e.fillStyle="rgba(236, 72, 153, 0.2)",e.beginPath(),e.ellipse(f/2,P,12,4,0,0,Math.PI*2),e.fill(),e.shadowBlur=0);const a=x.value;for(let n=0;n<I.length;n++){const u=I[n],h=Math.floor((-3+Math.sqrt(9+8*n))/2)/a,L=Math.round(59+-25*h),U=Math.round(130+81*h),q=Math.round(246+-8*h);e.fillStyle=`rgb(${L},${U},${q})`,e.shadowColor=`rgba(${L},${U},${q},0.5)`,e.shadowBlur=6,e.beginPath(),e.arc(u.x,u.y,at,0,Math.PI*2),e.fill()}if(e.shadowBlur=0,s){let n=s.y;y==="in_tube"&&(n=P-4,s.x=f/2+Math.sin(W*.15)*2);{e.shadowColor="rgba(236, 72, 153, 0.8)",e.shadowBlur=15;const u=e.createRadialGradient(s.x-2,n-2,0,s.x,n,_);u.addColorStop(0,"#f472b6"),u.addColorStop(.5,"#ec4899"),u.addColorStop(1,"#be185d"),e.fillStyle=u,e.beginPath(),e.arc(s.x,n,_,0,Math.PI*2),e.fill(),e.shadowBlur=0,e.fillStyle="rgba(255, 255, 255, 0.5)",e.beginPath(),e.arc(s.x-2,n-2,_*.35,0,Math.PI*2),e.fill()}}const v=A.value,r=f/v.length,w=C-28;v.forEach((n,u)=>{const B=u*r;let h="rgba(99,102,241,0.3)";n>=10?h="rgba(34,197,94,0.4)":n>=2?h="rgba(34,211,238,0.3)":n<1&&(h="rgba(239,68,68,0.3)"),e.fillStyle=h,e.fillRect(B+1,w,r-2,26),e.fillStyle="#fff",e.font="bold 9px sans-serif",e.textAlign="center",e.fillText(`${n}x`,B+r/2,w+16)})};return ft([H,x],()=>{if(Z(),S.value){const e=S.value.getContext("2d");e&&V(e)}}),pt(()=>{if(Z(),S.value){const e=S.value.getContext("2d");e&&V(e)}}),mt(()=>{T&&cancelAnimationFrame(T)}),(e,l)=>{const i=wt("router-link");return b(),p("div",kt,[t("div",Ct,[(b(),p(X,null,z(20,o=>t("div",{key:o,class:"star",style:_t(ut())},null,4)),64))]),t("header",xt,[t("button",{class:"header-back",onClick:l[0]||(l[0]=o=>e.$router.push("/solo"))},[...l[6]||(l[6]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M15 18l-6-6 6-6"})],-1)])]),l[9]||(l[9]=t("div",{class:"header-title"},[t("span",{class:"title-main"},"Plinko"),t("span",{class:"title-badge"},"x1000")],-1)),t("div",St,[l[7]||(l[7]=t("span",{class:"balance-icon"},"ðŸ’Ž",-1)),t("span",Bt,m(M.value.toFixed(2)),1),l[8]||(l[8]=t("button",{class:"balance-add"},"+",-1))])]),t("div",Pt,[t("div",$t,[l[10]||(l[10]=t("span",{class:"info-label"},"Ð˜Ð“Ð Ð",-1)),t("span",At,"#"+m(tt.value),1)]),t("div",It,[l[12]||(l[12]=t("span",{class:"info-label"},"Ð Ð˜Ð¡Ðš",-1)),O(t("select",{"onUpdate:modelValue":l[1]||(l[1]=o=>H.value=o),class:"risk-select"},[...l[11]||(l[11]=[t("option",{value:"low"},"ÐÐ¸Ð·ÐºÐ¸Ð¹",-1),t("option",{value:"medium"},"Ð¡Ñ€ÐµÐ´Ð½Ð¸Ð¹",-1),t("option",{value:"high"},"Ð’Ñ‹ÑÐ¾ÐºÐ¸Ð¹",-1)])],512),[[st,H.value]])]),t("div",Tt,[l[14]||(l[14]=t("span",{class:"info-label"},"Ð Ð¯Ð”Ð«",-1)),O(t("select",{"onUpdate:modelValue":l[2]||(l[2]=o=>x.value=o),class:"rows-select"},[...l[13]||(l[13]=[t("option",{value:8},"8",-1),t("option",{value:12},"12",-1),t("option",{value:16},"16",-1)])],512),[[st,x.value]])])]),t("div",Vt,[t("canvas",{ref_key:"gameCanvas",ref:S,class:"game-canvas",width:f,height:C},null,512),D.value?(b(),p("div",{key:0,class:E(["result-overlay",{win:k.value>0,lose:k.value<=0}])},[t("div",Ut,m(et.value)+"x",1),t("div",{class:E(["result-amount",{positive:k.value>0}])},m(k.value>0?"+":"")+m(k.value.toFixed(2))+" TON ",3)],2)):ot("",!0)]),t("div",Et,[(b(!0),p(X,null,z(A.value,(o,a)=>(b(),p("div",{key:a,class:E(["mult-slot",dt(o)])},m(o)+"x ",3))),128))]),t("div",Ft,[t("div",Gt,[(b(),p(X,null,z(it,o=>t("button",{key:o,class:E(["bet-btn",{active:d.value===o}]),onClick:a=>d.value=o,disabled:g.value},m(o)+" ðŸ’Ž ",11,Rt)),64))]),t("div",Dt,[t("button",{class:"btn-half",onClick:vt,disabled:g.value},"Â½",8,Ht),t("button",{class:"btn-play",onClick:lt,disabled:g.value||M.value<d.value},[g.value?(b(),p("span",Wt)):(b(),p("span",Yt,m(g.value?"Ð˜Ð³Ñ€Ð°...":`Ð˜Ð³Ñ€Ð°Ñ‚ÑŒ ${d.value} TON`),1))],8,Nt),t("button",{class:"btn-double",onClick:ct,disabled:g.value},"2x",8,Lt)]),t("div",qt,[t("label",Xt,[O(t("input",{type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=o=>N.value=o),disabled:g.value},null,8,zt),[[bt,N.value]]),l[15]||(l[15]=t("span",null,"ÐÐ²Ñ‚Ð¾-Ð¸Ð³Ñ€Ð°",-1))]),N.value?O((b(),p("input",{key:0,type:"number","onUpdate:modelValue":l[4]||(l[4]=o=>$.value=o),class:"auto-count",min:"1",max:"100",placeholder:"ÐšÐ¾Ð»-Ð²Ð¾"},null,512)),[[gt,$.value,void 0,{number:!0}]]):ot("",!0)])]),t("div",Ot,[t("div",jt,[l[16]||(l[16]=t("span",null,"Ð˜ÑÑ‚Ð¾Ñ€Ð¸Ñ",-1)),t("span",{class:"history-clear",onClick:l[5]||(l[5]=o=>J.value=[])},"ÐžÑ‡Ð¸ÑÑ‚Ð¸Ñ‚ÑŒ")]),t("div",Jt,[(b(!0),p(X,null,z(J.value.slice(0,10),(o,a)=>(b(),p("div",{key:a,class:E(["history-item",{win:o.win>0}])},[t("span",Kt,m(o.multiplier)+"x",1),t("span",Qt,m(o.win>0?"+":"")+m(o.win.toFixed(2)),1)],2))),128))])]),t("nav",Zt,[F(i,{to:"/pvp",class:"nav-item"},{default:G(()=>[...l[17]||(l[17]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 4l4 4m8 8l4 4M4 20l4-4m8-8l4-4M12 12l-8 8m16 0l-8-8m0 0l8-8M4 4l8 8"})],-1),t("span",null,"ÐŸÐ²ÐŸ",-1)])]),_:1}),F(i,{to:"/solo",class:"nav-item active"},{default:G(()=>[...l[18]||(l[18]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("circle",{cx:"12",cy:"12",r:"3"})],-1),t("span",null,"Ð¡Ð¾Ð»Ð¾",-1)])]),_:1}),F(i,{to:"/inventory",class:"nav-item"},{default:G(()=>[...l[19]||(l[19]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("path",{d:"M3 9h18M9 21V9"})],-1),t("span",null,"Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ",-1)])]),_:1}),F(i,{to:"/shop",class:"nav-item"},{default:G(()=>[...l[20]||(l[20]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),t("polyline",{points:"9 22 9 12 15 12 15 22"})],-1),t("span",null,"ÐœÐ°Ð³Ð°Ð·Ð¸Ð½",-1)])]),_:1}),F(i,{to:"/profile",class:"nav-item"},{default:G(()=>[...l[21]||(l[21]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2"}),t("circle",{cx:"12",cy:"7",r:"4"})],-1),t("span",null,"ÐŸÑ€Ð¾Ñ„Ð¸Ð»ÑŒ",-1)])]),_:1})])])}}}),ne=Mt(le,[["__scopeId","data-v-86e6c681"]]);export{ne as default};
