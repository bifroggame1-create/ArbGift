import{d as M,r as m,c,b as s,J as B,E as L,C as R,D as P,t as l,k as V,F as b,f as E,a as S,I as N,l as $,o as p,n as q}from"./vue-ao1au3Rh.js";import{_ as w}from"./stars-CI_OqwKa.js";import{u as D,a as F}from"./index-D9_dVF2h.js";const W="/images/starBonus-banner.svg",j={class:"stars-view"},z={class:"stars-header"},J={class:"stars-content"},O={class:"input-section"},U={class:"username-input-wrapper"},X={class:"amount-section"},G={class:"input-label"},H={class:"amount-input-wrapper"},K=["value"],Q={class:"amount-price"},Y={class:"range-slider-wrapper"},Z=["value"],ss={class:"range-labels"},ts={class:"quick-amounts"},as=["onClick"],es={class:"how-it-works"},ns={class:"steps"},ls={class:"step"},is={class:"step-content"},os={class:"step-desc"},rs=["disabled"],ds={class:"btn-price"},i=50,r=2e4,us=1.8,cs=M({__name:"StarsView",setup(ps){const g=N(),{user:f,hapticImpact:d}=D(),o=m(f.value?.username?.replace("@","")||""),e=m(100),u=m(!1),k=[100,500,1e3,5e3],y=$(()=>{const a=(e.value-i)/(r-i)*100;return{background:`linear-gradient(to right, #a855f7 0%, #a855f7 ${a}%, #3a3a3c ${a}%, #3a3a3c 100%)`}}),v=a=>Math.ceil(a*us),_=a=>a.toLocaleString("ru-RU"),x=a=>{e.value=a,d("light")},T=a=>{const t=a.target.value.replace(/[^0-9]/g,"");if(t){const n=parseInt(t);e.value=Math.max(i,Math.min(r,n))}},I=a=>{const t=parseInt(a.target.value)||i;e.value=Math.max(i,Math.min(r,t))},A=a=>{e.value=parseInt(a.target.value),d("light")},C=async()=>{if(!o.value.trim()){alert("–í–≤–µ–¥–∏—Ç–µ Telegram username");return}u.value=!0,d("medium");try{const a=o.value.startsWith("@")?o.value:`@${o.value}`,t=await fetch("/api/v1/stars/invoice",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:f.value?.id,username:a,amount:e.value,price:v(e.value)})});if(!t.ok)throw new Error("Failed to create invoice");const n=await t.json();window.Telegram?.WebApp?.openInvoice?window.Telegram.WebApp.openInvoice(n.invoice_url,h=>{h==="paid"&&(d("heavy"),alert("–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! Stars –±—É–¥—É—Ç –¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è."),g.push("/profile"))}):window.open(n.invoice_url,"_blank")}catch(a){console.error("Stars purchase failed:",a),alert("–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–∫–∞–∑–∞")}finally{u.value=!1}};return(a,t)=>(p(),c("div",j,[s("header",z,[s("button",{class:"back-btn",onClick:t[0]||(t[0]=n=>B(g).back())},[...t[2]||(t[2]=[s("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[s("path",{d:"M15 18l-6-6 6-6"})],-1)])]),t[3]||(t[3]=s("div",{class:"header-title"},[s("img",{src:w,alt:"Stars",class:"header-icon",width:"24",height:"24"}),L(" –ü–æ–∫—É–ø–∫–∞ Stars ")],-1)),t[4]||(t[4]=s("div",{class:"header-spacer"},null,-1))]),s("div",J,[t[15]||(t[15]=s("div",{class:"promo-banner"},[s("div",{class:"promo-icon"},[s("img",{src:W,alt:"Stars",class:"promo-icon-img"})]),s("div",{class:"promo-text"},[s("h2",null,"Telegram Stars"),s("p",null,"–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç")])],-1)),s("div",O,[t[6]||(t[6]=s("label",{class:"input-label"},"Telegram username",-1)),s("div",U,[t[5]||(t[5]=s("span",{class:"at-symbol"},"@",-1)),R(s("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=n=>o.value=n),placeholder:"username",class:"username-input"},null,512),[[P,o.value]])]),t[7]||(t[7]=s("p",{class:"input-hint"},"Stars –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ —ç—Ç–æ—Ç –∞–∫–∫–∞—É–Ω—Ç",-1))]),s("div",X,[s("label",G,"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ Stars ("+l(i)+" - "+l(r.toLocaleString())+")",1),s("div",H,[s("input",{type:"text",inputmode:"numeric",value:e.value,onInput:T,onBlur:I,class:"amount-input"},null,40,K),s("span",Q,"‚âà "+l(_(v(e.value)))+" ‚ÇΩ",1)]),s("div",Y,[s("input",{type:"range",value:e.value,onInput:A,min:i,max:r,step:10,class:"range-slider",style:V(y.value)},null,44,Z),s("div",ss,[s("span",null,l(i)),s("span",null,l(r.toLocaleString()),1)])]),s("div",ts,[(p(),c(b,null,E(k,n=>s("button",{key:n,class:q(["quick-btn",{active:e.value===n}]),onClick:h=>x(n)},l(n.toLocaleString()),11,as)),64))])]),s("div",es,[t[11]||(t[11]=s("h3",{class:"section-title"},"–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç",-1)),s("div",ns,[s("div",ls,[t[9]||(t[9]=s("div",{class:"step-number"},"1",-1)),s("div",is,[t[8]||(t[8]=s("p",{class:"step-title"},"–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ Stars",-1)),s("p",os,"–û—Ç "+l(i)+" –¥–æ "+l(r.toLocaleString())+" Stars",1)])]),t[10]||(t[10]=S('<div class="step" data-v-049b4621><div class="step-number" data-v-049b4621>2</div><div class="step-content" data-v-049b4621><p class="step-title" data-v-049b4621>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Ç–æ–¥ –æ–ø–ª–∞—Ç—ã</p><p class="step-desc" data-v-049b4621>Telegram Stars –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã</p></div></div><div class="step" data-v-049b4621><div class="step-number" data-v-049b4621>3</div><div class="step-content" data-v-049b4621><p class="step-title" data-v-049b4621>–ü–æ–ª—É—á–∏—Ç–µ Stars</p><p class="step-desc" data-v-049b4621>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –∞–∫–∫–∞—É–Ω—Ç</p></div></div>',2))])]),s("button",{class:"buy-btn",disabled:u.value||!o.value.trim(),onClick:C},[u.value?(p(),c(b,{key:0},[t[12]||(t[12]=s("div",{class:"spinner"},null,-1)),t[13]||(t[13]=s("span",null,"–°–æ–∑–¥–∞–Ω–∏–µ...",-1))],64)):(p(),c(b,{key:1},[t[14]||(t[14]=s("img",{src:w,alt:"Stars",width:"20",height:"20",class:"btn-star-icon"},null,-1)),s("span",null,"–ö—É–ø–∏—Ç—å "+l(e.value.toLocaleString())+" Stars",1),s("span",ds,"‚Ä¢ "+l(_(v(e.value)))+" ‚ÇΩ",1)],64))],8,rs),t[16]||(t[16]=S('<div class="features-grid" data-v-049b4621><div class="feature" data-v-049b4621><span class="feature-icon" data-v-049b4621>‚ö°</span><span class="feature-text" data-v-049b4621>–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ</span></div><div class="feature" data-v-049b4621><span class="feature-icon" data-v-049b4621>üîí</span><span class="feature-text" data-v-049b4621>–ë–µ–∑–æ–ø–∞—Å–Ω–æ</span></div><div class="feature" data-v-049b4621><span class="feature-icon" data-v-049b4621>‚úì</span><span class="feature-text" data-v-049b4621>–ì–∞—Ä–∞–Ω—Ç–∏—è</span></div></div>',1))])]))}}),gs=F(cs,[["__scopeId","data-v-049b4621"]]);export{gs as default};
