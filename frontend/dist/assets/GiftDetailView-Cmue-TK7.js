import{d as b,b as a,e as t,t as r,c as $,a as s,o as B,j as g,k as i,n as F,h as p,F as L,v as V,w as j,r as u,g as G,i as P,u as T,f as z}from"./vue-CF-r4DcL.js";import{b as A,c as D}from"./client-COG1KRRB.js";import{_ as y}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-Cc0AO_nH.js";import{u as q}from"./index-hgAJBUmO.js";const E={class:"flex items-center space-x-1"},I={class:"font-bold text-white"},f=b({__name:"PriceTag",props:{price:{}},setup(_){const c=_,m=$(()=>(typeof c.price=="string"?parseFloat(c.price):c.price).toFixed(2));return(e,n)=>(s(),a("div",E,[n[0]||(n[0]=t("span",{class:"text-blue-400 text-lg"},"üíé",-1)),t("span",I,r(m.value),1),n[1]||(n[1]=t("span",{class:"text-xs text-gray-400"},"TON",-1))]))}}),M={class:"max-w-4xl mx-auto px-4 py-6"},O={key:1},R={class:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden mb-6"},S={class:"aspect-square max-w-md mx-auto p-8"},H=["src","alt"],J={key:1,class:"flex items-center justify-center h-full text-9xl"},K={class:"bg-gray-800 rounded-2xl p-6 mb-6"},Q={class:"flex items-start justify-between mb-4"},U={class:"text-2xl font-bold mb-2"},W={key:0,class:"text-gray-400 text-sm"},X={key:0,class:"text-gray-300 mb-4"},Y={key:1,class:"flex flex-wrap gap-2 mb-4"},Z={key:0,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},ee={key:1,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},te={key:2,class:"border-t border-gray-700 pt-4"},se={class:"bg-gray-800 rounded-2xl p-6"},oe={class:"text-xl font-bold mb-4"},ae={key:1,class:"space-y-3"},le=["href"],re={class:"flex items-center justify-between"},ne={class:"font-semibold text-lg mb-1"},ie={class:"text-gray-400 text-xs truncate"},ce={class:"text-right"},de={key:2,class:"text-center py-8 text-gray-400"},ue={key:2,class:"text-center py-16"},ge=b({__name:"GiftDetailView",setup(_){const c=P(),{hapticImpact:m}=q(),e=u(null),n=u([]),x=u(!0),v=u(!0),h=async()=>{try{const l=Number(c.params.id);e.value=await A(l)}catch(l){console.error("Failed to load gift:",l)}finally{x.value=!1}},k=async()=>{try{const l=Number(c.params.id),o=await D(l);n.value=o.listings||[]}catch(l){console.error("Failed to load listings:",l)}finally{v.value=!1}},w=l=>l?`${l.slice(0,6)}...${l.slice(-4)}`:"",C=l=>{const o={common:"bg-gray-600 text-gray-100",uncommon:"bg-green-600 text-green-100",rare:"bg-blue-600 text-blue-100",epic:"bg-purple-600 text-purple-100",legendary:"bg-yellow-600 text-yellow-100"};return o[l.toLowerCase()]||o.common};return B(async()=>{await Promise.all([h(),k()])}),(l,o)=>{const N=G("router-link");return s(),a("div",M,[x.value?(s(),g(y,{key:0,"full-height":!0})):e.value?(s(),a("div",O,[t("div",R,[t("div",S,[e.value.image_url?(s(),a("img",{key:0,src:e.value.image_url,alt:e.value.name,class:"w-full h-full object-contain"},null,8,H)):(s(),a("div",J," üéÅ "))])]),t("div",K,[t("div",Q,[t("div",null,[t("h1",U,r(e.value.name),1),e.value.collection_name?(s(),a("p",W,r(e.value.collection_name),1)):i("",!0)]),e.value.rarity?(s(),a("div",{key:0,class:F(["px-3 py-1 rounded-full text-sm font-semibold",C(e.value.rarity)])},r(e.value.rarity),3)):i("",!0)]),e.value.description?(s(),a("p",X,r(e.value.description),1)):i("",!0),e.value.backdrop||e.value.model?(s(),a("div",Y,[e.value.backdrop?(s(),a("span",Z," üé® "+r(e.value.backdrop),1)):i("",!0),e.value.model?(s(),a("span",ee," üéÅ "+r(e.value.model),1)):i("",!0)])):i("",!0),e.value.min_price_ton?(s(),a("div",te,[o[1]||(o[1]=t("div",{class:"text-gray-400 text-sm mb-1"},"Best Price",-1)),p(f,{price:e.value.min_price_ton,class:"text-2xl"},null,8,["price"])])):i("",!0)]),t("div",se,[t("h2",oe," Available Listings ("+r(n.value.length)+") ",1),v.value?(s(),g(y,{key:0,size:"sm"})):n.value.length>0?(s(),a("div",ae,[(s(!0),a(L,null,V(n.value,d=>(s(),a("a",{key:d.id,href:d.listing_url,target:"_blank",class:"block bg-gray-900 rounded-xl p-4 hover:ring-2 hover:ring-blue-500 transition-all",onClick:o[0]||(o[0]=me=>T(m)("medium"))},[t("div",re,[t("div",null,[t("div",ne,r(d.market_name),1),t("div",ie,r(w(d.seller_address)),1)]),t("div",ce,[p(f,{price:d.price_ton},null,8,["price"]),o[2]||(o[2]=t("div",{class:"text-xs text-blue-400 mt-1"},"View ‚Üí",-1))])])],8,le))),128))])):(s(),a("div",de," No active listings "))])])):(s(),a("div",ue,[o[4]||(o[4]=t("div",{class:"text-6xl mb-4"},"üòï",-1)),o[5]||(o[5]=t("h3",{class:"text-xl font-semibold mb-2"},"Gift not found",-1)),p(N,{to:"/",class:"text-blue-400 hover:text-blue-300"},{default:j(()=>[...o[3]||(o[3]=[z(" ‚Üê Back to all gifts ",-1)])]),_:1})]))])}}});export{ge as default};
