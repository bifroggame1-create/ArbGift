import{d as f,o as s,c as l,n as v,b as t,l as g,t as n,j as $,h as b,z as c,g as x,F as j,f as z,w as F,r as p,e as V,u as G,I as P,J as T}from"./vue-DZ84P2GM.js";import{b as A,c as H}from"./client-pJ2CWAUX.js";import{u as D}from"./index-oCPHr1cc.js";const h=f({__name:"LoadingSpinner",props:{size:{default:"md"},fullHeight:{type:Boolean,default:!1}},setup(m){const i=m,d=g(()=>({sm:"w-6 h-6",md:"w-12 h-12",lg:"w-16 h-16"})[i.size]),e=g(()=>i.fullHeight?"min-h-[60vh]":"py-8");return(r,_)=>(s(),l("div",{class:v(["flex items-center justify-center",e.value])},[t("div",{class:v(["animate-spin rounded-full border-4 border-gray-700 border-t-blue-500",d.value])},null,2)],2))}}),E={class:"flex items-center space-x-1"},I={class:"font-bold text-white"},k=f({__name:"PriceTag",props:{price:{}},setup(m){const i=m,d=g(()=>(typeof i.price=="string"?parseFloat(i.price):i.price).toFixed(2));return(e,r)=>(s(),l("div",E,[r[0]||(r[0]=t("svg",{class:"w-4 h-4 flex-shrink-0",viewBox:"0 0 56 56",fill:"none"},[t("circle",{cx:"28",cy:"28",r:"28",fill:"#0098EA"}),t("path",{d:"M37.5603 15.6277H18.4386C14.9228 15.6277 12.6944 19.4202 14.4632 22.4861L26.2644 42.9409C27.0345 44.2765 28.9644 44.2765 29.7345 42.9409L41.5765 22.4861C43.3045 19.4202 41.0761 15.6277 37.5603 15.6277Z",fill:"white"})],-1)),t("span",I,n(d.value),1),r[1]||(r[1]=t("span",{class:"text-xs text-gray-400"},"TON",-1))]))}}),M={class:"max-w-4xl mx-auto px-4 py-6"},S={key:1},q={class:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl overflow-hidden mb-6"},J={class:"aspect-square max-w-md mx-auto p-8"},O=["src","alt"],R={key:1,class:"flex items-center justify-center h-full text-9xl"},Z={class:"bg-gray-800 rounded-2xl p-6 mb-6"},K={class:"flex items-start justify-between mb-4"},Q={class:"text-2xl font-bold mb-2"},U={key:0,class:"text-gray-400 text-sm"},W={key:0,class:"text-gray-300 mb-4"},X={key:1,class:"flex flex-wrap gap-2 mb-4"},Y={key:0,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},ee={key:1,class:"px-3 py-1 bg-gray-700 rounded-full text-sm"},te={key:2,class:"border-t border-gray-700 pt-4"},se={class:"bg-gray-800 rounded-2xl p-6"},le={class:"text-xl font-bold mb-4"},oe={key:1,class:"space-y-3"},ae=["href"],re={class:"flex items-center justify-between"},ne={class:"font-semibold text-lg mb-1"},ie={class:"text-gray-400 text-xs truncate"},ce={class:"text-right"},de={key:2,class:"text-center py-8 text-gray-400"},ue={key:2,class:"text-center py-16"},ve=f({__name:"GiftDetailView",setup(m){const i=G(),{hapticImpact:d}=D(),e=p(null),r=p([]),_=p(!0),y=p(!0),w=async()=>{try{const a=Number(i.params.id);e.value=await A(a)}catch(a){console.error("Failed to load gift:",a)}finally{_.value=!1}},C=async()=>{try{const a=Number(i.params.id),o=await H(a);r.value=o.listings||[]}catch(a){console.error("Failed to load listings:",a)}finally{y.value=!1}},L=a=>a?`${a.slice(0,6)}...${a.slice(-4)}`:"",B=a=>{const o={common:"bg-gray-600 text-gray-100",uncommon:"bg-green-600 text-green-100",rare:"bg-blue-600 text-blue-100",epic:"bg-purple-600 text-purple-100",legendary:"bg-yellow-600 text-yellow-100"};return o[a.toLowerCase()]||o.common};return $(async()=>{await Promise.all([w(),C()])}),(a,o)=>{const N=V("router-link");return s(),l("div",M,[_.value?(s(),b(h,{key:0,"full-height":!0})):e.value?(s(),l("div",S,[t("div",q,[t("div",J,[e.value.image_url?(s(),l("img",{key:0,src:e.value.image_url,alt:e.value.name,class:"w-full h-full object-contain"},null,8,O)):(s(),l("div",R," üéÅ "))])]),t("div",Z,[t("div",K,[t("div",null,[t("h1",Q,n(e.value.name),1),e.value.collection_name?(s(),l("p",U,n(e.value.collection_name),1)):c("",!0)]),e.value.rarity?(s(),l("div",{key:0,class:v(["px-3 py-1 rounded-full text-sm font-semibold",B(e.value.rarity)])},n(e.value.rarity),3)):c("",!0)]),e.value.description?(s(),l("p",W,n(e.value.description),1)):c("",!0),e.value.backdrop||e.value.model?(s(),l("div",X,[e.value.backdrop?(s(),l("span",Y," üé® "+n(e.value.backdrop),1)):c("",!0),e.value.model?(s(),l("span",ee," üéÅ "+n(e.value.model),1)):c("",!0)])):c("",!0),e.value.min_price_ton?(s(),l("div",te,[o[1]||(o[1]=t("div",{class:"text-gray-400 text-sm mb-1"},"Best Price",-1)),x(k,{price:e.value.min_price_ton,class:"text-2xl"},null,8,["price"])])):c("",!0)]),t("div",se,[t("h2",le," Available Listings ("+n(r.value.length)+") ",1),y.value?(s(),b(h,{key:0,size:"sm"})):r.value.length>0?(s(),l("div",oe,[(s(!0),l(j,null,z(r.value,u=>(s(),l("a",{key:u.id,href:u.listing_url,target:"_blank",class:"block bg-gray-900 rounded-xl p-4 hover:ring-2 hover:ring-blue-500 transition-all",onClick:o[0]||(o[0]=me=>P(d)("medium"))},[t("div",re,[t("div",null,[t("div",ne,n(u.market_name),1),t("div",ie,n(L(u.seller_address)),1)]),t("div",ce,[x(k,{price:u.price_ton},null,8,["price"]),o[2]||(o[2]=t("div",{class:"text-xs text-blue-400 mt-1"},"View ‚Üí",-1))])])],8,ae))),128))])):(s(),l("div",de," No active listings "))])])):(s(),l("div",ue,[o[4]||(o[4]=t("div",{class:"text-6xl mb-4"},"üòï",-1)),o[5]||(o[5]=t("h3",{class:"text-xl font-semibold mb-2"},"Gift not found",-1)),x(N,{to:"/",class:"text-blue-400 hover:text-blue-300"},{default:F(()=>[...o[3]||(o[3]=[T(" ‚Üê Back to all gifts ",-1)])]),_:1})]))])}}});export{ve as default};
